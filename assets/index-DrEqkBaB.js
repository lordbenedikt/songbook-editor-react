(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var mh={exports:{}},Lr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function vw(){if(hy)return Lr;hy=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,r,o){var u=null;if(o!==void 0&&(u=""+o),r.key!==void 0&&(u=""+r.key),"key"in r){o={};for(var f in r)f!=="key"&&(o[f]=r[f])}else o=r;return r=o.ref,{$$typeof:l,type:n,key:u,ref:r!==void 0?r:null,props:o}}return Lr.Fragment=t,Lr.jsx=e,Lr.jsxs=e,Lr}var dy;function bw(){return dy||(dy=1,mh.exports=vw()),mh.exports}var Gt=bw(),gh={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function Sw(){if(my)return gt;my=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function v(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,M={};function k(C,U,W){this.props=C,this.context=U,this.refs=M,this.updater=W||S}k.prototype.isReactComponent={},k.prototype.setState=function(C,U){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,U,"setState")},k.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function R(){}R.prototype=k.prototype;function Y(C,U,W){this.props=C,this.context=U,this.refs=M,this.updater=W||S}var j=Y.prototype=new R;j.constructor=Y,w(j,k.prototype),j.isPureReactComponent=!0;var K=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function X(C,U,W,Z,nt,vt){return W=vt.ref,{$$typeof:l,type:C,key:U,ref:W!==void 0?W:null,props:vt}}function st(C,U){return X(C.type,U,void 0,void 0,void 0,C.props)}function ht(C){return typeof C=="object"&&C!==null&&C.$$typeof===l}function Ct(C){var U={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(W){return U[W]})}var ft=/\/+/g;function tt(C,U){return typeof C=="object"&&C!==null&&C.key!=null?Ct(""+C.key):U.toString(36)}function xt(){}function yt(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(xt,xt):(C.status="pending",C.then(function(U){C.status==="pending"&&(C.status="fulfilled",C.value=U)},function(U){C.status==="pending"&&(C.status="rejected",C.reason=U)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function mt(C,U,W,Z,nt){var vt=typeof C;(vt==="undefined"||vt==="boolean")&&(C=null);var at=!1;if(C===null)at=!0;else switch(vt){case"bigint":case"string":case"number":at=!0;break;case"object":switch(C.$$typeof){case l:case t:at=!0;break;case p:return at=C._init,mt(at(C._payload),U,W,Z,nt)}}if(at)return nt=nt(C),at=Z===""?"."+tt(C,0):Z,K(nt)?(W="",at!=null&&(W=at.replace(ft,"$&/")+"/"),mt(nt,U,W,"",function(dn){return dn})):nt!=null&&(ht(nt)&&(nt=st(nt,W+(nt.key==null||C&&C.key===nt.key?"":(""+nt.key).replace(ft,"$&/")+"/")+at)),U.push(nt)),1;at=0;var xe=Z===""?".":Z+":";if(K(C))for(var Kt=0;Kt<C.length;Kt++)Z=C[Kt],vt=xe+tt(Z,Kt),at+=mt(Z,U,W,vt,nt);else if(Kt=v(C),typeof Kt=="function")for(C=Kt.call(C),Kt=0;!(Z=C.next()).done;)Z=Z.value,vt=xe+tt(Z,Kt++),at+=mt(Z,U,W,vt,nt);else if(vt==="object"){if(typeof C.then=="function")return mt(yt(C),U,W,Z,nt);throw U=String(C),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return at}function L(C,U,W){if(C==null)return C;var Z=[],nt=0;return mt(C,Z,"","",function(vt){return U.call(W,vt,nt++)}),Z}function Q(C){if(C._status===-1){var U=C._result;U=U(),U.then(function(W){(C._status===0||C._status===-1)&&(C._status=1,C._result=W)},function(W){(C._status===0||C._status===-1)&&(C._status=2,C._result=W)}),C._status===-1&&(C._status=0,C._result=U)}if(C._status===1)return C._result.default;throw C._result}var it=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function dt(){}return gt.Children={map:L,forEach:function(C,U,W){L(C,function(){U.apply(this,arguments)},W)},count:function(C){var U=0;return L(C,function(){U++}),U},toArray:function(C){return L(C,function(U){return U})||[]},only:function(C){if(!ht(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},gt.Component=k,gt.Fragment=e,gt.Profiler=r,gt.PureComponent=Y,gt.StrictMode=n,gt.Suspense=h,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,gt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return z.H.useMemoCache(C)}},gt.cache=function(C){return function(){return C.apply(null,arguments)}},gt.cloneElement=function(C,U,W){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var Z=w({},C.props),nt=C.key,vt=void 0;if(U!=null)for(at in U.ref!==void 0&&(vt=void 0),U.key!==void 0&&(nt=""+U.key),U)!G.call(U,at)||at==="key"||at==="__self"||at==="__source"||at==="ref"&&U.ref===void 0||(Z[at]=U[at]);var at=arguments.length-2;if(at===1)Z.children=W;else if(1<at){for(var xe=Array(at),Kt=0;Kt<at;Kt++)xe[Kt]=arguments[Kt+2];Z.children=xe}return X(C.type,nt,void 0,void 0,vt,Z)},gt.createContext=function(C){return C={$$typeof:u,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:o,_context:C},C},gt.createElement=function(C,U,W){var Z,nt={},vt=null;if(U!=null)for(Z in U.key!==void 0&&(vt=""+U.key),U)G.call(U,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(nt[Z]=U[Z]);var at=arguments.length-2;if(at===1)nt.children=W;else if(1<at){for(var xe=Array(at),Kt=0;Kt<at;Kt++)xe[Kt]=arguments[Kt+2];nt.children=xe}if(C&&C.defaultProps)for(Z in at=C.defaultProps,at)nt[Z]===void 0&&(nt[Z]=at[Z]);return X(C,vt,void 0,void 0,null,nt)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(C){return{$$typeof:f,render:C}},gt.isValidElement=ht,gt.lazy=function(C){return{$$typeof:p,_payload:{_status:-1,_result:C},_init:Q}},gt.memo=function(C,U){return{$$typeof:m,type:C,compare:U===void 0?null:U}},gt.startTransition=function(C){var U=z.T,W={};z.T=W;try{var Z=C(),nt=z.S;nt!==null&&nt(W,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(dt,it)}catch(vt){it(vt)}finally{z.T=U}},gt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},gt.use=function(C){return z.H.use(C)},gt.useActionState=function(C,U,W){return z.H.useActionState(C,U,W)},gt.useCallback=function(C,U){return z.H.useCallback(C,U)},gt.useContext=function(C){return z.H.useContext(C)},gt.useDebugValue=function(){},gt.useDeferredValue=function(C,U){return z.H.useDeferredValue(C,U)},gt.useEffect=function(C,U,W){var Z=z.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(C,U)},gt.useId=function(){return z.H.useId()},gt.useImperativeHandle=function(C,U,W){return z.H.useImperativeHandle(C,U,W)},gt.useInsertionEffect=function(C,U){return z.H.useInsertionEffect(C,U)},gt.useLayoutEffect=function(C,U){return z.H.useLayoutEffect(C,U)},gt.useMemo=function(C,U){return z.H.useMemo(C,U)},gt.useOptimistic=function(C,U){return z.H.useOptimistic(C,U)},gt.useReducer=function(C,U,W){return z.H.useReducer(C,U,W)},gt.useRef=function(C){return z.H.useRef(C)},gt.useState=function(C){return z.H.useState(C)},gt.useSyncExternalStore=function(C,U,W){return z.H.useSyncExternalStore(C,U,W)},gt.useTransition=function(){return z.H.useTransition()},gt.version="19.1.0",gt}var gy;function qd(){return gy||(gy=1,gh.exports=Sw()),gh.exports}var ps=qd(),ph={exports:{}},zr={},yh={exports:{}},vh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function xw(){return py||(py=1,function(l){function t(L,Q){var it=L.length;L.push(Q);t:for(;0<it;){var dt=it-1>>>1,C=L[dt];if(0<r(C,Q))L[dt]=Q,L[it]=C,it=dt;else break t}}function e(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var Q=L[0],it=L.pop();if(it!==Q){L[0]=it;t:for(var dt=0,C=L.length,U=C>>>1;dt<U;){var W=2*(dt+1)-1,Z=L[W],nt=W+1,vt=L[nt];if(0>r(Z,it))nt<C&&0>r(vt,Z)?(L[dt]=vt,L[nt]=it,dt=nt):(L[dt]=Z,L[W]=it,dt=W);else if(nt<C&&0>r(vt,it))L[dt]=vt,L[nt]=it,dt=nt;else break t}}return Q}function r(L,Q){var it=L.sortIndex-Q.sortIndex;return it!==0?it:L.id-Q.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;l.unstable_now=function(){return o.now()}}else{var u=Date,f=u.now();l.unstable_now=function(){return u.now()-f}}var h=[],m=[],p=1,y=null,v=3,S=!1,w=!1,M=!1,k=!1,R=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function K(L){for(var Q=e(m);Q!==null;){if(Q.callback===null)n(m);else if(Q.startTime<=L)n(m),Q.sortIndex=Q.expirationTime,t(h,Q);else break;Q=e(m)}}function z(L){if(M=!1,K(L),!w)if(e(h)!==null)w=!0,G||(G=!0,tt());else{var Q=e(m);Q!==null&&mt(z,Q.startTime-L)}}var G=!1,X=-1,st=5,ht=-1;function Ct(){return k?!0:!(l.unstable_now()-ht<st)}function ft(){if(k=!1,G){var L=l.unstable_now();ht=L;var Q=!0;try{t:{w=!1,M&&(M=!1,Y(X),X=-1),S=!0;var it=v;try{e:{for(K(L),y=e(h);y!==null&&!(y.expirationTime>L&&Ct());){var dt=y.callback;if(typeof dt=="function"){y.callback=null,v=y.priorityLevel;var C=dt(y.expirationTime<=L);if(L=l.unstable_now(),typeof C=="function"){y.callback=C,K(L),Q=!0;break e}y===e(h)&&n(h),K(L)}else n(h);y=e(h)}if(y!==null)Q=!0;else{var U=e(m);U!==null&&mt(z,U.startTime-L),Q=!1}}break t}finally{y=null,v=it,S=!1}Q=void 0}}finally{Q?tt():G=!1}}}var tt;if(typeof j=="function")tt=function(){j(ft)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,yt=xt.port2;xt.port1.onmessage=ft,tt=function(){yt.postMessage(null)}}else tt=function(){R(ft,0)};function mt(L,Q){X=R(function(){L(l.unstable_now())},Q)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(L){L.callback=null},l.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):st=0<L?Math.floor(1e3/L):5},l.unstable_getCurrentPriorityLevel=function(){return v},l.unstable_next=function(L){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var it=v;v=Q;try{return L()}finally{v=it}},l.unstable_requestPaint=function(){k=!0},l.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var it=v;v=L;try{return Q()}finally{v=it}},l.unstable_scheduleCallback=function(L,Q,it){var dt=l.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?dt+it:dt):it=dt,L){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=it+C,L={id:p++,callback:Q,priorityLevel:L,startTime:it,expirationTime:C,sortIndex:-1},it>dt?(L.sortIndex=it,t(m,L),e(h)===null&&L===e(m)&&(M?(Y(X),X=-1):M=!0,mt(z,it-dt))):(L.sortIndex=C,t(h,L),w||S||(w=!0,G||(G=!0,tt()))),L},l.unstable_shouldYield=Ct,l.unstable_wrapCallback=function(L){var Q=v;return function(){var it=v;v=Q;try{return L.apply(this,arguments)}finally{v=it}}}}(vh)),vh}var yy;function ww(){return yy||(yy=1,yh.exports=xw()),yh.exports}var bh={exports:{}},Me={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function Aw(){if(vy)return Me;vy=1;var l=qd();function t(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(h,m,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:m,implementation:p}}var u=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Me.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Me.createPortal=function(h,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(h,m,null,p)},Me.flushSync=function(h){var m=u.T,p=n.p;try{if(u.T=null,n.p=2,h)return h()}finally{u.T=m,n.p=p,n.d.f()}},Me.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(h,m))},Me.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},Me.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var p=m.as,y=f(p,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?n.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:S}):p==="script"&&n.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Me.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=f(m.as,m.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(h)},Me.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,y=f(p,m.crossOrigin);n.d.L(h,p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Me.preloadModule=function(h,m){if(typeof h=="string")if(m){var p=f(m.as,m.crossOrigin);n.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(h)},Me.requestFormReset=function(h){n.d.r(h)},Me.unstable_batchedUpdates=function(h,m){return h(m)},Me.useFormState=function(h,m,p){return u.H.useFormState(h,m,p)},Me.useFormStatus=function(){return u.H.useHostTransitionStatus()},Me.version="19.1.0",Me}var by;function Mw(){if(by)return bh.exports;by=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),bh.exports=Aw(),bh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function Cw(){if(Sy)return zr;Sy=1;var l=ww(),t=qd(),e=Mw();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(n(188))}function h(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(n(188));return s!==i?null:i}for(var a=i,c=s;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return f(d),i;if(g===c)return f(d),s;g=g.sibling}throw Error(n(188))}if(a.return!==c.return)a=d,c=g;else{for(var b=!1,x=d.child;x;){if(x===a){b=!0,a=d,c=g;break}if(x===c){b=!0,c=d,a=g;break}x=x.sibling}if(!b){for(x=g.child;x;){if(x===a){b=!0,a=g,c=d;break}if(x===c){b=!0,c=g,a=d;break}x=x.sibling}if(!b)throw Error(n(189))}}if(a.alternate!==c)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),j=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),ht=Symbol.for("react.activity"),Ct=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function tt(i){return i===null||typeof i!="object"?null:(i=ft&&i[ft]||i["@@iterator"],typeof i=="function"?i:null)}var xt=Symbol.for("react.client.reference");function yt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===xt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case k:return"Profiler";case M:return"StrictMode";case z:return"Suspense";case G:return"SuspenseList";case ht:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case j:return(i.displayName||"Context")+".Provider";case Y:return(i._context.displayName||"Context")+".Consumer";case K:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case X:return s=i.displayName||null,s!==null?s:yt(i.type)||"Memo";case st:s=i._payload,i=i._init;try{return yt(i(s))}catch{}}return null}var mt=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},dt=[],C=-1;function U(i){return{current:i}}function W(i){0>C||(i.current=dt[C],dt[C]=null,C--)}function Z(i,s){C++,dt[C]=i.current,i.current=s}var nt=U(null),vt=U(null),at=U(null),xe=U(null);function Kt(i,s){switch(Z(at,s),Z(vt,i),Z(nt,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?V0(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=V0(s),i=Y0(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}W(nt),Z(nt,i)}function dn(){W(nt),W(vt),W(at)}function Iu(i){i.memoizedState!==null&&Z(xe,i);var s=nt.current,a=Y0(s,i.type);s!==a&&(Z(vt,i),Z(nt,a))}function wo(i){vt.current===i&&(W(nt),W(vt)),xe.current===i&&(W(xe),Or._currentValue=it)}var $u=Object.prototype.hasOwnProperty,tc=l.unstable_scheduleCallback,ec=l.unstable_cancelCallback,JS=l.unstable_shouldYield,FS=l.unstable_requestPaint,Ci=l.unstable_now,IS=l.unstable_getCurrentPriorityLevel,Sm=l.unstable_ImmediatePriority,xm=l.unstable_UserBlockingPriority,Ao=l.unstable_NormalPriority,$S=l.unstable_LowPriority,wm=l.unstable_IdlePriority,tx=l.log,ex=l.unstable_setDisableYieldValue,_s=null,Xe=null;function mn(i){if(typeof tx=="function"&&ex(i),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(_s,i)}catch{}}var Ke=Math.clz32?Math.clz32:lx,ix=Math.log,nx=Math.LN2;function lx(i){return i>>>=0,i===0?32:31-(ix(i)/nx|0)|0}var Mo=256,Co=4194304;function $n(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function To(i,s,a){var c=i.pendingLanes;if(c===0)return 0;var d=0,g=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var x=c&134217727;return x!==0?(c=x&~g,c!==0?d=$n(c):(b&=x,b!==0?d=$n(b):a||(a=x&~i,a!==0&&(d=$n(a))))):(x=c&~g,x!==0?d=$n(x):b!==0?d=$n(b):a||(a=c&~i,a!==0&&(d=$n(a)))),d===0?0:s!==0&&s!==d&&(s&g)===0&&(g=d&-d,a=s&-s,g>=a||g===32&&(a&4194048)!==0)?s:d}function Us(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function sx(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Am(){var i=Mo;return Mo<<=1,(Mo&4194048)===0&&(Mo=256),i}function Mm(){var i=Co;return Co<<=1,(Co&62914560)===0&&(Co=4194304),i}function ic(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function qs(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function rx(i,s,a,c,d,g){var b=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var x=i.entanglements,A=i.expirationTimes,E=i.hiddenUpdates;for(a=b&~a;0<a;){var H=31-Ke(a),q=1<<H;x[H]=0,A[H]=-1;var B=E[H];if(B!==null)for(E[H]=null,H=0;H<B.length;H++){var N=B[H];N!==null&&(N.lane&=-536870913)}a&=~q}c!==0&&Cm(i,c,0),g!==0&&d===0&&i.tag!==0&&(i.suspendedLanes|=g&~(b&~s))}function Cm(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-Ke(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|a&4194090}function Tm(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var c=31-Ke(a),d=1<<c;d&s|i[c]&s&&(i[c]|=s),a&=~d}}function nc(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function lc(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function km(){var i=Q.p;return i!==0?i:(i=window.event,i===void 0?32:ry(i.type))}function ox(i,s){var a=Q.p;try{return Q.p=i,s()}finally{Q.p=a}}var gn=Math.random().toString(36).slice(2),we="__reactFiber$"+gn,Le="__reactProps$"+gn,El="__reactContainer$"+gn,sc="__reactEvents$"+gn,ax="__reactListeners$"+gn,ux="__reactHandles$"+gn,Dm="__reactResources$"+gn,Vs="__reactMarker$"+gn;function rc(i){delete i[we],delete i[Le],delete i[sc],delete i[ax],delete i[ux]}function Rl(i){var s=i[we];if(s)return s;for(var a=i.parentNode;a;){if(s=a[El]||a[we]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=K0(i);i!==null;){if(a=i[we])return a;i=K0(i)}return s}i=a,a=i.parentNode}return null}function Bl(i){if(i=i[we]||i[El]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function Ys(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function Nl(i){var s=i[Dm];return s||(s=i[Dm]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ae(i){i[Vs]=!0}var Om=new Set,Em={};function tl(i,s){Ll(i,s),Ll(i+"Capture",s)}function Ll(i,s){for(Em[i]=s,i=0;i<s.length;i++)Om.add(s[i])}var cx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rm={},Bm={};function fx(i){return $u.call(Bm,i)?!0:$u.call(Rm,i)?!1:cx.test(i)?Bm[i]=!0:(Rm[i]=!0,!1)}function ko(i,s,a){if(fx(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function Do(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function Ki(i,s,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+c)}}var oc,Nm;function zl(i){if(oc===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);oc=s&&s[1]||"",Nm=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oc+i+Nm}var ac=!1;function uc(i,s){if(!i||ac)return"";ac=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var q=function(){throw Error()};if(Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(N){var B=N}Reflect.construct(i,[],q)}else{try{q.call()}catch(N){B=N}i.call(q.prototype)}}else{try{throw Error()}catch(N){B=N}(q=i())&&typeof q.catch=="function"&&q.catch(function(){})}}catch(N){if(N&&B&&typeof N.stack=="string")return[N.stack,B.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),b=g[0],x=g[1];if(b&&x){var A=b.split(`
`),E=x.split(`
`);for(d=c=0;c<A.length&&!A[c].includes("DetermineComponentFrameRoot");)c++;for(;d<E.length&&!E[d].includes("DetermineComponentFrameRoot");)d++;if(c===A.length||d===E.length)for(c=A.length-1,d=E.length-1;1<=c&&0<=d&&A[c]!==E[d];)d--;for(;1<=c&&0<=d;c--,d--)if(A[c]!==E[d]){if(c!==1||d!==1)do if(c--,d--,0>d||A[c]!==E[d]){var H=`
`+A[c].replace(" at new "," at ");return i.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",i.displayName)),H}while(1<=c&&0<=d);break}}}finally{ac=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?zl(a):""}function hx(i){switch(i.tag){case 26:case 27:case 5:return zl(i.type);case 16:return zl("Lazy");case 13:return zl("Suspense");case 19:return zl("SuspenseList");case 0:case 15:return uc(i.type,!1);case 11:return uc(i.type.render,!1);case 1:return uc(i.type,!0);case 31:return zl("Activity");default:return""}}function Lm(i){try{var s="";do s+=hx(i),i=i.return;while(i);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ii(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function zm(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function dx(i){var s=zm(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),c=""+i[s];if(!i.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return d.call(this)},set:function(b){c=""+b,g.call(this,b)}}),Object.defineProperty(i,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Oo(i){i._valueTracker||(i._valueTracker=dx(i))}function Hm(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return i&&(c=zm(i)?i.checked?"true":"false":i.value),i=c,i!==a?(s.setValue(i),!0):!1}function Eo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var mx=/[\n"\\]/g;function ni(i){return i.replace(mx,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function cc(i,s,a,c,d,g,b,x){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),s!=null?b==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+ii(s)):i.value!==""+ii(s)&&(i.value=""+ii(s)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),s!=null?fc(i,b,ii(s)):a!=null?fc(i,b,ii(a)):c!=null&&i.removeAttribute("value"),d==null&&g!=null&&(i.defaultChecked=!!g),d!=null&&(i.checked=d&&typeof d!="function"&&typeof d!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.name=""+ii(x):i.removeAttribute("name")}function _m(i,s,a,c,d,g,b,x){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),s!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;a=a!=null?""+ii(a):"",s=s!=null?""+ii(s):a,x||s===i.value||(i.value=s),i.defaultValue=s}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=x?i.checked:!!c,i.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b)}function fc(i,s,a){s==="number"&&Eo(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Hl(i,s,a,c){if(i=i.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<i.length;a++)d=s.hasOwnProperty("$"+i[a].value),i[a].selected!==d&&(i[a].selected=d),d&&c&&(i[a].defaultSelected=!0)}else{for(a=""+ii(a),s=null,d=0;d<i.length;d++){if(i[d].value===a){i[d].selected=!0,c&&(i[d].defaultSelected=!0);return}s!==null||i[d].disabled||(s=i[d])}s!==null&&(s.selected=!0)}}function Um(i,s,a){if(s!=null&&(s=""+ii(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+ii(a):""}function qm(i,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(n(92));if(mt(c)){if(1<c.length)throw Error(n(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=ii(s),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c)}function _l(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var gx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vm(i,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,a):typeof a!="number"||a===0||gx.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function Ym(i,s,a){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&a[d]!==c&&Vm(i,d,c)}else for(var g in s)s.hasOwnProperty(g)&&Vm(i,g,s[g])}function hc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var px=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ro(i){return yx.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var dc=null;function mc(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ul=null,ql=null;function jm(i){var s=Bl(i);if(s&&(i=s.stateNode)){var a=i[Le]||null;t:switch(i=s.stateNode,s.type){case"input":if(cc(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ni(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==i&&c.form===i.form){var d=c[Le]||null;if(!d)throw Error(n(90));cc(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===i.form&&Hm(c)}break t;case"textarea":Um(i,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Hl(i,!!a.multiple,s,!1)}}}var gc=!1;function Gm(i,s,a){if(gc)return i(s,a);gc=!0;try{var c=i(s);return c}finally{if(gc=!1,(Ul!==null||ql!==null)&&(pa(),Ul&&(s=Ul,i=ql,ql=Ul=null,jm(s),i)))for(s=0;s<i.length;s++)jm(i[s])}}function js(i,s){var a=i.stateNode;if(a===null)return null;var c=a[Le]||null;if(c===null)return null;a=c[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break t;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(n(231,s,typeof a));return a}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pc=!1;if(Qi)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){pc=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{pc=!1}var pn=null,yc=null,Bo=null;function Xm(){if(Bo)return Bo;var i,s=yc,a=s.length,c,d="value"in pn?pn.value:pn.textContent,g=d.length;for(i=0;i<a&&s[i]===d[i];i++);var b=a-i;for(c=1;c<=b&&s[a-c]===d[g-c];c++);return Bo=d.slice(i,1<c?1-c:void 0)}function No(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Lo(){return!0}function Km(){return!1}function ze(i){function s(a,c,d,g,b){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(a=i[x],this[x]=a?a(g):g[x]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Lo:Km,this.isPropagationStopped=Km,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Lo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Lo)},persist:function(){},isPersistent:Lo}),s}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=ze(el),Xs=p({},el,{view:0,detail:0}),vx=ze(Xs),vc,bc,Ks,Ho=p({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ks&&(Ks&&i.type==="mousemove"?(vc=i.screenX-Ks.screenX,bc=i.screenY-Ks.screenY):bc=vc=0,Ks=i),vc)},movementY:function(i){return"movementY"in i?i.movementY:bc}}),Qm=ze(Ho),bx=p({},Ho,{dataTransfer:0}),Sx=ze(bx),xx=p({},Xs,{relatedTarget:0}),Sc=ze(xx),wx=p({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),Ax=ze(wx),Mx=p({},el,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Cx=ze(Mx),Tx=p({},el,{data:0}),Zm=ze(Tx),kx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ox={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ex(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Ox[i])?!!s[i]:!1}function xc(){return Ex}var Rx=p({},Xs,{key:function(i){if(i.key){var s=kx[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=No(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Dx[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xc,charCode:function(i){return i.type==="keypress"?No(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?No(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Bx=ze(Rx),Nx=p({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wm=ze(Nx),Lx=p({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xc}),zx=ze(Lx),Hx=p({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),_x=ze(Hx),Ux=p({},Ho,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qx=ze(Ux),Vx=p({},el,{newState:0,oldState:0}),Yx=ze(Vx),jx=[9,13,27,32],wc=Qi&&"CompositionEvent"in window,Qs=null;Qi&&"documentMode"in document&&(Qs=document.documentMode);var Gx=Qi&&"TextEvent"in window&&!Qs,Pm=Qi&&(!wc||Qs&&8<Qs&&11>=Qs),Jm=" ",Fm=!1;function Im(i,s){switch(i){case"keyup":return jx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $m(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Vl=!1;function Xx(i,s){switch(i){case"compositionend":return $m(s);case"keypress":return s.which!==32?null:(Fm=!0,Jm);case"textInput":return i=s.data,i===Jm&&Fm?null:i;default:return null}}function Kx(i,s){if(Vl)return i==="compositionend"||!wc&&Im(i,s)?(i=Xm(),Bo=yc=pn=null,Vl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Pm&&s.locale!=="ko"?null:s.data;default:return null}}var Qx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tg(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Qx[i.type]:s==="textarea"}function eg(i,s,a,c){Ul?ql?ql.push(c):ql=[c]:Ul=c,s=wa(s,"onChange"),0<s.length&&(a=new zo("onChange","change",null,a,c),i.push({event:a,listeners:s}))}var Zs=null,Ws=null;function Zx(i){z0(i,0)}function _o(i){var s=Ys(i);if(Hm(s))return i}function ig(i,s){if(i==="change")return s}var ng=!1;if(Qi){var Ac;if(Qi){var Mc="oninput"in document;if(!Mc){var lg=document.createElement("div");lg.setAttribute("oninput","return;"),Mc=typeof lg.oninput=="function"}Ac=Mc}else Ac=!1;ng=Ac&&(!document.documentMode||9<document.documentMode)}function sg(){Zs&&(Zs.detachEvent("onpropertychange",rg),Ws=Zs=null)}function rg(i){if(i.propertyName==="value"&&_o(Ws)){var s=[];eg(s,Ws,i,mc(i)),Gm(Zx,s)}}function Wx(i,s,a){i==="focusin"?(sg(),Zs=s,Ws=a,Zs.attachEvent("onpropertychange",rg)):i==="focusout"&&sg()}function Px(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return _o(Ws)}function Jx(i,s){if(i==="click")return _o(s)}function Fx(i,s){if(i==="input"||i==="change")return _o(s)}function Ix(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Qe=typeof Object.is=="function"?Object.is:Ix;function Ps(i,s){if(Qe(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!$u.call(s,d)||!Qe(i[d],s[d]))return!1}return!0}function og(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ag(i,s){var a=og(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=s&&c>=s)return{node:a,offset:s-i};i=c}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=og(a)}}function ug(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?ug(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function cg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Eo(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=Eo(i.document)}return s}function Cc(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var $x=Qi&&"documentMode"in document&&11>=document.documentMode,Yl=null,Tc=null,Js=null,kc=!1;function fg(i,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kc||Yl==null||Yl!==Eo(c)||(c=Yl,"selectionStart"in c&&Cc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Js&&Ps(Js,c)||(Js=c,c=wa(Tc,"onSelect"),0<c.length&&(s=new zo("onSelect","select",null,s,a),i.push({event:s,listeners:c}),s.target=Yl)))}function il(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var jl={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionrun:il("Transition","TransitionRun"),transitionstart:il("Transition","TransitionStart"),transitioncancel:il("Transition","TransitionCancel"),transitionend:il("Transition","TransitionEnd")},Dc={},hg={};Qi&&(hg=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function nl(i){if(Dc[i])return Dc[i];if(!jl[i])return i;var s=jl[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in hg)return Dc[i]=s[a];return i}var dg=nl("animationend"),mg=nl("animationiteration"),gg=nl("animationstart"),t2=nl("transitionrun"),e2=nl("transitionstart"),i2=nl("transitioncancel"),pg=nl("transitionend"),yg=new Map,Oc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oc.push("scrollEnd");function bi(i,s){yg.set(i,s),tl(s,[i])}var vg=new WeakMap;function li(i,s){if(typeof i=="object"&&i!==null){var a=vg.get(i);return a!==void 0?a:(s={value:i,source:s,stack:Lm(s)},vg.set(i,s),s)}return{value:i,source:s,stack:Lm(s)}}var si=[],Gl=0,Ec=0;function Uo(){for(var i=Gl,s=Ec=Gl=0;s<i;){var a=si[s];si[s++]=null;var c=si[s];si[s++]=null;var d=si[s];si[s++]=null;var g=si[s];if(si[s++]=null,c!==null&&d!==null){var b=c.pending;b===null?d.next=d:(d.next=b.next,b.next=d),c.pending=d}g!==0&&bg(a,d,g)}}function qo(i,s,a,c){si[Gl++]=i,si[Gl++]=s,si[Gl++]=a,si[Gl++]=c,Ec|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Rc(i,s,a,c){return qo(i,s,a,c),Vo(i)}function Xl(i,s){return qo(i,null,null,s),Vo(i)}function bg(i,s,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var d=!1,g=i.return;g!==null;)g.childLanes|=a,c=g.alternate,c!==null&&(c.childLanes|=a),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(d=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,d&&s!==null&&(d=31-Ke(a),i=g.hiddenUpdates,c=i[d],c===null?i[d]=[s]:c.push(s),s.lane=a|536870912),g):null}function Vo(i){if(50<xr)throw xr=0,Uf=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Kl={};function n2(i,s,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ze(i,s,a,c){return new n2(i,s,a,c)}function Bc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zi(i,s){var a=i.alternate;return a===null?(a=Ze(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Sg(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Yo(i,s,a,c,d,g){var b=0;if(c=i,typeof i=="function")Bc(i)&&(b=1);else if(typeof i=="string")b=sw(i,a,nt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case ht:return i=Ze(31,a,s,d),i.elementType=ht,i.lanes=g,i;case w:return ll(a.children,d,g,s);case M:b=8,d|=24;break;case k:return i=Ze(12,a,s,d|2),i.elementType=k,i.lanes=g,i;case z:return i=Ze(13,a,s,d),i.elementType=z,i.lanes=g,i;case G:return i=Ze(19,a,s,d),i.elementType=G,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:case j:b=10;break t;case Y:b=9;break t;case K:b=11;break t;case X:b=14;break t;case st:b=16,c=null;break t}b=29,a=Error(n(130,i===null?"null":typeof i,"")),c=null}return s=Ze(b,a,s,d),s.elementType=i,s.type=c,s.lanes=g,s}function ll(i,s,a,c){return i=Ze(7,i,c,s),i.lanes=a,i}function Nc(i,s,a){return i=Ze(6,i,null,s),i.lanes=a,i}function Lc(i,s,a){return s=Ze(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Ql=[],Zl=0,jo=null,Go=0,ri=[],oi=0,sl=null,Wi=1,Pi="";function rl(i,s){Ql[Zl++]=Go,Ql[Zl++]=jo,jo=i,Go=s}function xg(i,s,a){ri[oi++]=Wi,ri[oi++]=Pi,ri[oi++]=sl,sl=i;var c=Wi;i=Pi;var d=32-Ke(c)-1;c&=~(1<<d),a+=1;var g=32-Ke(s)+d;if(30<g){var b=d-d%5;g=(c&(1<<b)-1).toString(32),c>>=b,d-=b,Wi=1<<32-Ke(s)+d|a<<d|c,Pi=g+i}else Wi=1<<g|a<<d|c,Pi=i}function zc(i){i.return!==null&&(rl(i,1),xg(i,1,0))}function Hc(i){for(;i===jo;)jo=Ql[--Zl],Ql[Zl]=null,Go=Ql[--Zl],Ql[Zl]=null;for(;i===sl;)sl=ri[--oi],ri[oi]=null,Pi=ri[--oi],ri[oi]=null,Wi=ri[--oi],ri[oi]=null}var Ee=null,Pt=null,Rt=!1,ol=null,Ti=!1,_c=Error(n(519));function al(i){var s=Error(n(418,""));throw $s(li(s,i)),_c}function wg(i){var s=i.stateNode,a=i.type,c=i.memoizedProps;switch(s[we]=i,s[Le]=c,a){case"dialog":At("cancel",s),At("close",s);break;case"iframe":case"object":case"embed":At("load",s);break;case"video":case"audio":for(a=0;a<Ar.length;a++)At(Ar[a],s);break;case"source":At("error",s);break;case"img":case"image":case"link":At("error",s),At("load",s);break;case"details":At("toggle",s);break;case"input":At("invalid",s),_m(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Oo(s);break;case"select":At("invalid",s);break;case"textarea":At("invalid",s),qm(s,c.value,c.defaultValue,c.children),Oo(s)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||q0(s.textContent,a)?(c.popover!=null&&(At("beforetoggle",s),At("toggle",s)),c.onScroll!=null&&At("scroll",s),c.onScrollEnd!=null&&At("scrollend",s),c.onClick!=null&&(s.onclick=Aa),s=!0):s=!1,s||al(i)}function Ag(i){for(Ee=i.return;Ee;)switch(Ee.tag){case 5:case 13:Ti=!1;return;case 27:case 3:Ti=!0;return;default:Ee=Ee.return}}function Fs(i){if(i!==Ee)return!1;if(!Rt)return Ag(i),Rt=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||th(i.type,i.memoizedProps)),a=!a),a&&Pt&&al(i),Ag(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(s===0){Pt=xi(i.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;i=i.nextSibling}Pt=null}}else s===27?(s=Pt,Bn(i.type)?(i=lh,lh=null,Pt=i):Pt=s):Pt=Ee?xi(i.stateNode.nextSibling):null;return!0}function Is(){Pt=Ee=null,Rt=!1}function Mg(){var i=ol;return i!==null&&(Ue===null?Ue=i:Ue.push.apply(Ue,i),ol=null),i}function $s(i){ol===null?ol=[i]:ol.push(i)}var Uc=U(null),ul=null,Ji=null;function yn(i,s,a){Z(Uc,s._currentValue),s._currentValue=a}function Fi(i){i._currentValue=Uc.current,W(Uc)}function qc(i,s,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===a)break;i=i.return}}function Vc(i,s,a,c){var d=i.child;for(d!==null&&(d.return=i);d!==null;){var g=d.dependencies;if(g!==null){var b=d.child;g=g.firstContext;t:for(;g!==null;){var x=g;g=d;for(var A=0;A<s.length;A++)if(x.context===s[A]){g.lanes|=a,x=g.alternate,x!==null&&(x.lanes|=a),qc(g.return,a,i),c||(b=null);break t}g=x.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(n(341));b.lanes|=a,g=b.alternate,g!==null&&(g.lanes|=a),qc(b,a,i),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===i){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function tr(i,s,a,c){i=null;for(var d=s,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(n(387));if(b=b.memoizedProps,b!==null){var x=d.type;Qe(d.pendingProps.value,b.value)||(i!==null?i.push(x):i=[x])}}else if(d===xe.current){if(b=d.alternate,b===null)throw Error(n(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(i!==null?i.push(Or):i=[Or])}d=d.return}i!==null&&Vc(s,i,a,c),s.flags|=262144}function Xo(i){for(i=i.firstContext;i!==null;){if(!Qe(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function cl(i){ul=i,Ji=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ae(i){return Cg(ul,i)}function Ko(i,s){return ul===null&&cl(i),Cg(i,s)}function Cg(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ji===null){if(i===null)throw Error(n(308));Ji=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Ji=Ji.next=s;return a}var l2=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},s2=l.unstable_scheduleCallback,r2=l.unstable_NormalPriority,le={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yc(){return{controller:new l2,data:new Map,refCount:0}}function er(i){i.refCount--,i.refCount===0&&s2(r2,function(){i.controller.abort()})}var ir=null,jc=0,Wl=0,Pl=null;function o2(i,s){if(ir===null){var a=ir=[];jc=0,Wl=Kf(),Pl={status:"pending",value:void 0,then:function(c){a.push(c)}}}return jc++,s.then(Tg,Tg),s}function Tg(){if(--jc===0&&ir!==null){Pl!==null&&(Pl.status="fulfilled");var i=ir;ir=null,Wl=0,Pl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function a2(i,s){var a=[],c={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),c}var kg=L.S;L.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&o2(i,s),kg!==null&&kg(i,s)};var fl=U(null);function Gc(){var i=fl.current;return i!==null?i:Yt.pooledCache}function Qo(i,s){s===null?Z(fl,fl.current):Z(fl,s.pool)}function Dg(){var i=Gc();return i===null?null:{parent:le._currentValue,pool:i}}var nr=Error(n(460)),Og=Error(n(474)),Zo=Error(n(542)),Xc={then:function(){}};function Eg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Wo(){}function Rg(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Wo,Wo),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Ng(i),i;default:if(typeof s.status=="string")s.then(Wo,Wo);else{if(i=Yt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Ng(i),i}throw lr=s,nr}}var lr=null;function Bg(){if(lr===null)throw Error(n(459));var i=lr;return lr=null,i}function Ng(i){if(i===nr||i===Zo)throw Error(n(483))}var vn=!1;function Kc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qc(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function bn(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Sn(i,s,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Bt&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=Vo(i),bg(i,null,a),s}return qo(i,c,s,a),Vo(i)}function sr(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,Tm(i,a)}}function Zc(i,s){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?d=g=b:g=g.next=b,a=a.next}while(a!==null);g===null?d=g=s:g=g.next=s}else d=g=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var Wc=!1;function rr(){if(Wc){var i=Pl;if(i!==null)throw i}}function or(i,s,a,c){Wc=!1;var d=i.updateQueue;vn=!1;var g=d.firstBaseUpdate,b=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var A=x,E=A.next;A.next=null,b===null?g=E:b.next=E,b=A;var H=i.alternate;H!==null&&(H=H.updateQueue,x=H.lastBaseUpdate,x!==b&&(x===null?H.firstBaseUpdate=E:x.next=E,H.lastBaseUpdate=A))}if(g!==null){var q=d.baseState;b=0,H=E=A=null,x=g;do{var B=x.lane&-536870913,N=B!==x.lane;if(N?(Tt&B)===B:(c&B)===B){B!==0&&B===Wl&&(Wc=!0),H!==null&&(H=H.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var ct=i,rt=x;B=s;var Ht=a;switch(rt.tag){case 1:if(ct=rt.payload,typeof ct=="function"){q=ct.call(Ht,q,B);break t}q=ct;break t;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=rt.payload,B=typeof ct=="function"?ct.call(Ht,q,B):ct,B==null)break t;q=p({},q,B);break t;case 2:vn=!0}}B=x.callback,B!==null&&(i.flags|=64,N&&(i.flags|=8192),N=d.callbacks,N===null?d.callbacks=[B]:N.push(B))}else N={lane:B,tag:x.tag,payload:x.payload,callback:x.callback,next:null},H===null?(E=H=N,A=q):H=H.next=N,b|=B;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;N=x,x=N.next,N.next=null,d.lastBaseUpdate=N,d.shared.pending=null}}while(!0);H===null&&(A=q),d.baseState=A,d.firstBaseUpdate=E,d.lastBaseUpdate=H,g===null&&(d.shared.lanes=0),Dn|=b,i.lanes=b,i.memoizedState=q}}function Lg(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function zg(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Lg(a[i],s)}var Jl=U(null),Po=U(0);function Hg(i,s){i=sn,Z(Po,i),Z(Jl,s),sn=i|s.baseLanes}function Pc(){Z(Po,sn),Z(Jl,Jl.current)}function Jc(){sn=Po.current,W(Jl),W(Po)}var xn=0,bt=null,Lt=null,te=null,Jo=!1,Fl=!1,hl=!1,Fo=0,ar=0,Il=null,u2=0;function Ft(){throw Error(n(321))}function Fc(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Qe(i[a],s[a]))return!1;return!0}function Ic(i,s,a,c,d,g){return xn=g,bt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,L.H=i===null||i.memoizedState===null?bp:Sp,hl=!1,g=a(c,d),hl=!1,Fl&&(g=Ug(s,a,c,d)),_g(i),g}function _g(i){L.H=na;var s=Lt!==null&&Lt.next!==null;if(xn=0,te=Lt=bt=null,Jo=!1,ar=0,Il=null,s)throw Error(n(300));i===null||ue||(i=i.dependencies,i!==null&&Xo(i)&&(ue=!0))}function Ug(i,s,a,c){bt=i;var d=0;do{if(Fl&&(Il=null),ar=0,Fl=!1,25<=d)throw Error(n(301));if(d+=1,te=Lt=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}L.H=p2,g=s(a,c)}while(Fl);return g}function c2(){var i=L.H,s=i.useState()[0];return s=typeof s.then=="function"?ur(s):s,i=i.useState()[0],(Lt!==null?Lt.memoizedState:null)!==i&&(bt.flags|=1024),s}function $c(){var i=Fo!==0;return Fo=0,i}function tf(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function ef(i){if(Jo){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Jo=!1}xn=0,te=Lt=bt=null,Fl=!1,ar=Fo=0,Il=null}function He(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return te===null?bt.memoizedState=te=i:te=te.next=i,te}function ee(){if(Lt===null){var i=bt.alternate;i=i!==null?i.memoizedState:null}else i=Lt.next;var s=te===null?bt.memoizedState:te.next;if(s!==null)te=s,Lt=i;else{if(i===null)throw bt.alternate===null?Error(n(467)):Error(n(310));Lt=i,i={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},te===null?bt.memoizedState=te=i:te=te.next=i}return te}function nf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ur(i){var s=ar;return ar+=1,Il===null&&(Il=[]),i=Rg(Il,i,s),s=bt,(te===null?s.memoizedState:te.next)===null&&(s=s.alternate,L.H=s===null||s.memoizedState===null?bp:Sp),i}function Io(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ur(i);if(i.$$typeof===j)return Ae(i)}throw Error(n(438,String(i)))}function lf(i){var s=null,a=bt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=bt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=nf(),bt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),c=0;c<i;c++)a[c]=Ct;return s.index++,a}function Ii(i,s){return typeof s=="function"?s(i):s}function $o(i){var s=ee();return sf(s,Lt,i)}function sf(i,s,a){var c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=a;var d=i.baseQueue,g=c.pending;if(g!==null){if(d!==null){var b=d.next;d.next=g.next,g.next=b}s.baseQueue=d=g,c.pending=null}if(g=i.baseState,d===null)i.memoizedState=g;else{s=d.next;var x=b=null,A=null,E=s,H=!1;do{var q=E.lane&-536870913;if(q!==E.lane?(Tt&q)===q:(xn&q)===q){var B=E.revertLane;if(B===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),q===Wl&&(H=!0);else if((xn&B)===B){E=E.next,B===Wl&&(H=!0);continue}else q={lane:0,revertLane:E.revertLane,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},A===null?(x=A=q,b=g):A=A.next=q,bt.lanes|=B,Dn|=B;q=E.action,hl&&a(g,q),g=E.hasEagerState?E.eagerState:a(g,q)}else B={lane:q,revertLane:E.revertLane,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},A===null?(x=A=B,b=g):A=A.next=B,bt.lanes|=q,Dn|=q;E=E.next}while(E!==null&&E!==s);if(A===null?b=g:A.next=x,!Qe(g,i.memoizedState)&&(ue=!0,H&&(a=Pl,a!==null)))throw a;i.memoizedState=g,i.baseState=b,i.baseQueue=A,c.lastRenderedState=g}return d===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function rf(i){var s=ee(),a=s.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=i;var c=a.dispatch,d=a.pending,g=s.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do g=i(g,b.action),b=b.next;while(b!==d);Qe(g,s.memoizedState)||(ue=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function qg(i,s,a){var c=bt,d=ee(),g=Rt;if(g){if(a===void 0)throw Error(n(407));a=a()}else a=s();var b=!Qe((Lt||d).memoizedState,a);b&&(d.memoizedState=a,ue=!0),d=d.queue;var x=jg.bind(null,c,d,i);if(cr(2048,8,x,[i]),d.getSnapshot!==s||b||te!==null&&te.memoizedState.tag&1){if(c.flags|=2048,$l(9,ta(),Yg.bind(null,c,d,a,s),null),Yt===null)throw Error(n(349));g||(xn&124)!==0||Vg(c,s,a)}return a}function Vg(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=bt.updateQueue,s===null?(s=nf(),bt.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function Yg(i,s,a,c){s.value=a,s.getSnapshot=c,Gg(s)&&Xg(i)}function jg(i,s,a){return a(function(){Gg(s)&&Xg(i)})}function Gg(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Qe(i,a)}catch{return!0}}function Xg(i){var s=Xl(i,2);s!==null&&Ie(s,i,2)}function of(i){var s=He();if(typeof i=="function"){var a=i;if(i=a(),hl){mn(!0);try{a()}finally{mn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:i},s}function Kg(i,s,a,c){return i.baseState=a,sf(i,Lt,typeof c=="function"?c:Ii)}function f2(i,s,a,c,d){if(ia(i))throw Error(n(485));if(i=s.action,i!==null){var g={payload:d,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};L.T!==null?a(!0):g.isTransition=!1,c(g),a=s.pending,a===null?(g.next=s.pending=g,Qg(s,g)):(g.next=a.next,s.pending=a.next=g)}}function Qg(i,s){var a=s.action,c=s.payload,d=i.state;if(s.isTransition){var g=L.T,b={};L.T=b;try{var x=a(d,c),A=L.S;A!==null&&A(b,x),Zg(i,s,x)}catch(E){af(i,s,E)}finally{L.T=g}}else try{g=a(d,c),Zg(i,s,g)}catch(E){af(i,s,E)}}function Zg(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Wg(i,s,c)},function(c){return af(i,s,c)}):Wg(i,s,a)}function Wg(i,s,a){s.status="fulfilled",s.value=a,Pg(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,Qg(i,a)))}function af(i,s,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,Pg(s),s=s.next;while(s!==c)}i.action=null}function Pg(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Jg(i,s){return s}function Fg(i,s){if(Rt){var a=Yt.formState;if(a!==null){t:{var c=bt;if(Rt){if(Pt){e:{for(var d=Pt,g=Ti;d.nodeType!==8;){if(!g){d=null;break e}if(d=xi(d.nextSibling),d===null){d=null;break e}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Pt=xi(d.nextSibling),c=d.data==="F!";break t}}al(c)}c=!1}c&&(s=a[0])}}return a=He(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jg,lastRenderedState:s},a.queue=c,a=pp.bind(null,bt,c),c.dispatch=a,c=of(!1),g=df.bind(null,bt,!1,c.queue),c=He(),d={state:s,dispatch:null,action:i,pending:null},c.queue=d,a=f2.bind(null,bt,d,g,a),d.dispatch=a,c.memoizedState=i,[s,a,!1]}function Ig(i){var s=ee();return $g(s,Lt,i)}function $g(i,s,a){if(s=sf(i,s,Jg)[0],i=$o(Ii)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ur(s)}catch(b){throw b===nr?Zo:b}else c=s;s=ee();var d=s.queue,g=d.dispatch;return a!==s.memoizedState&&(bt.flags|=2048,$l(9,ta(),h2.bind(null,d,a),null)),[c,g,i]}function h2(i,s){i.action=s}function tp(i){var s=ee(),a=Lt;if(a!==null)return $g(s,a,i);ee(),s=s.memoizedState,a=ee();var c=a.queue.dispatch;return a.memoizedState=i,[s,c,!1]}function $l(i,s,a,c){return i={tag:i,create:a,deps:c,inst:s,next:null},s=bt.updateQueue,s===null&&(s=nf(),bt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,s.lastEffect=i),i}function ta(){return{destroy:void 0,resource:void 0}}function ep(){return ee().memoizedState}function ea(i,s,a,c){var d=He();c=c===void 0?null:c,bt.flags|=i,d.memoizedState=$l(1|s,ta(),a,c)}function cr(i,s,a,c){var d=ee();c=c===void 0?null:c;var g=d.memoizedState.inst;Lt!==null&&c!==null&&Fc(c,Lt.memoizedState.deps)?d.memoizedState=$l(s,g,a,c):(bt.flags|=i,d.memoizedState=$l(1|s,g,a,c))}function ip(i,s){ea(8390656,8,i,s)}function np(i,s){cr(2048,8,i,s)}function lp(i,s){return cr(4,2,i,s)}function sp(i,s){return cr(4,4,i,s)}function rp(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function op(i,s,a){a=a!=null?a.concat([i]):null,cr(4,4,rp.bind(null,s,i),a)}function uf(){}function ap(i,s){var a=ee();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&Fc(s,c[1])?c[0]:(a.memoizedState=[i,s],i)}function up(i,s){var a=ee();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&Fc(s,c[1]))return c[0];if(c=i(),hl){mn(!0);try{i()}finally{mn(!1)}}return a.memoizedState=[c,s],c}function cf(i,s,a){return a===void 0||(xn&1073741824)!==0?i.memoizedState=s:(i.memoizedState=a,i=h0(),bt.lanes|=i,Dn|=i,a)}function cp(i,s,a,c){return Qe(a,s)?a:Jl.current!==null?(i=cf(i,a,c),Qe(i,s)||(ue=!0),i):(xn&42)===0?(ue=!0,i.memoizedState=a):(i=h0(),bt.lanes|=i,Dn|=i,s)}function fp(i,s,a,c,d){var g=Q.p;Q.p=g!==0&&8>g?g:8;var b=L.T,x={};L.T=x,df(i,!1,s,a);try{var A=d(),E=L.S;if(E!==null&&E(x,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var H=a2(A,c);fr(i,s,H,Fe(i))}else fr(i,s,c,Fe(i))}catch(q){fr(i,s,{then:function(){},status:"rejected",reason:q},Fe())}finally{Q.p=g,L.T=b}}function d2(){}function ff(i,s,a,c){if(i.tag!==5)throw Error(n(476));var d=hp(i).queue;fp(i,d,s,it,a===null?d2:function(){return dp(i),a(c)})}function hp(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:it},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function dp(i){var s=hp(i).next.queue;fr(i,s,{},Fe())}function hf(){return Ae(Or)}function mp(){return ee().memoizedState}function gp(){return ee().memoizedState}function m2(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=Fe();i=bn(a);var c=Sn(s,i,a);c!==null&&(Ie(c,s,a),sr(c,s,a)),s={cache:Yc()},i.payload=s;return}s=s.return}}function g2(i,s,a){var c=Fe();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ia(i)?yp(s,a):(a=Rc(i,s,a,c),a!==null&&(Ie(a,i,c),vp(a,s,c)))}function pp(i,s,a){var c=Fe();fr(i,s,a,c)}function fr(i,s,a,c){var d={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ia(i))yp(s,d);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var b=s.lastRenderedState,x=g(b,a);if(d.hasEagerState=!0,d.eagerState=x,Qe(x,b))return qo(i,s,d,0),Yt===null&&Uo(),!1}catch{}finally{}if(a=Rc(i,s,d,c),a!==null)return Ie(a,i,c),vp(a,s,c),!0}return!1}function df(i,s,a,c){if(c={lane:2,revertLane:Kf(),action:c,hasEagerState:!1,eagerState:null,next:null},ia(i)){if(s)throw Error(n(479))}else s=Rc(i,a,c,2),s!==null&&Ie(s,i,2)}function ia(i){var s=i.alternate;return i===bt||s!==null&&s===bt}function yp(i,s){Fl=Jo=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function vp(i,s,a){if((a&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,Tm(i,a)}}var na={readContext:Ae,use:Io,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft},bp={readContext:Ae,use:Io,useCallback:function(i,s){return He().memoizedState=[i,s===void 0?null:s],i},useContext:Ae,useEffect:ip,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,ea(4194308,4,rp.bind(null,s,i),a)},useLayoutEffect:function(i,s){return ea(4194308,4,i,s)},useInsertionEffect:function(i,s){ea(4,2,i,s)},useMemo:function(i,s){var a=He();s=s===void 0?null:s;var c=i();if(hl){mn(!0);try{i()}finally{mn(!1)}}return a.memoizedState=[c,s],c},useReducer:function(i,s,a){var c=He();if(a!==void 0){var d=a(s);if(hl){mn(!0);try{a(s)}finally{mn(!1)}}}else d=s;return c.memoizedState=c.baseState=d,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:d},c.queue=i,i=i.dispatch=g2.bind(null,bt,i),[c.memoizedState,i]},useRef:function(i){var s=He();return i={current:i},s.memoizedState=i},useState:function(i){i=of(i);var s=i.queue,a=pp.bind(null,bt,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:uf,useDeferredValue:function(i,s){var a=He();return cf(a,i,s)},useTransition:function(){var i=of(!1);return i=fp.bind(null,bt,i.queue,!0,!1),He().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var c=bt,d=He();if(Rt){if(a===void 0)throw Error(n(407));a=a()}else{if(a=s(),Yt===null)throw Error(n(349));(Tt&124)!==0||Vg(c,s,a)}d.memoizedState=a;var g={value:a,getSnapshot:s};return d.queue=g,ip(jg.bind(null,c,g,i),[i]),c.flags|=2048,$l(9,ta(),Yg.bind(null,c,g,a,s),null),a},useId:function(){var i=He(),s=Yt.identifierPrefix;if(Rt){var a=Pi,c=Wi;a=(c&~(1<<32-Ke(c)-1)).toString(32)+a,s=""+s+"R"+a,a=Fo++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=u2++,s=""+s+"r"+a.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:hf,useFormState:Fg,useActionState:Fg,useOptimistic:function(i){var s=He();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=df.bind(null,bt,!0,a),a.dispatch=s,[i,s]},useMemoCache:lf,useCacheRefresh:function(){return He().memoizedState=m2.bind(null,bt)}},Sp={readContext:Ae,use:Io,useCallback:ap,useContext:Ae,useEffect:np,useImperativeHandle:op,useInsertionEffect:lp,useLayoutEffect:sp,useMemo:up,useReducer:$o,useRef:ep,useState:function(){return $o(Ii)},useDebugValue:uf,useDeferredValue:function(i,s){var a=ee();return cp(a,Lt.memoizedState,i,s)},useTransition:function(){var i=$o(Ii)[0],s=ee().memoizedState;return[typeof i=="boolean"?i:ur(i),s]},useSyncExternalStore:qg,useId:mp,useHostTransitionStatus:hf,useFormState:Ig,useActionState:Ig,useOptimistic:function(i,s){var a=ee();return Kg(a,Lt,i,s)},useMemoCache:lf,useCacheRefresh:gp},p2={readContext:Ae,use:Io,useCallback:ap,useContext:Ae,useEffect:np,useImperativeHandle:op,useInsertionEffect:lp,useLayoutEffect:sp,useMemo:up,useReducer:rf,useRef:ep,useState:function(){return rf(Ii)},useDebugValue:uf,useDeferredValue:function(i,s){var a=ee();return Lt===null?cf(a,i,s):cp(a,Lt.memoizedState,i,s)},useTransition:function(){var i=rf(Ii)[0],s=ee().memoizedState;return[typeof i=="boolean"?i:ur(i),s]},useSyncExternalStore:qg,useId:mp,useHostTransitionStatus:hf,useFormState:tp,useActionState:tp,useOptimistic:function(i,s){var a=ee();return Lt!==null?Kg(a,Lt,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:lf,useCacheRefresh:gp},ts=null,hr=0;function la(i){var s=hr;return hr+=1,ts===null&&(ts=[]),Rg(ts,i,s)}function dr(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function sa(i,s){throw s.$$typeof===y?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function xp(i){var s=i._init;return s(i._payload)}function wp(i){function s(D,T){if(i){var O=D.deletions;O===null?(D.deletions=[T],D.flags|=16):O.push(T)}}function a(D,T){if(!i)return null;for(;T!==null;)s(D,T),T=T.sibling;return null}function c(D){for(var T=new Map;D!==null;)D.key!==null?T.set(D.key,D):T.set(D.index,D),D=D.sibling;return T}function d(D,T){return D=Zi(D,T),D.index=0,D.sibling=null,D}function g(D,T,O){return D.index=O,i?(O=D.alternate,O!==null?(O=O.index,O<T?(D.flags|=67108866,T):O):(D.flags|=67108866,T)):(D.flags|=1048576,T)}function b(D){return i&&D.alternate===null&&(D.flags|=67108866),D}function x(D,T,O,_){return T===null||T.tag!==6?(T=Nc(O,D.mode,_),T.return=D,T):(T=d(T,O),T.return=D,T)}function A(D,T,O,_){var et=O.type;return et===w?H(D,T,O.props.children,_,O.key):T!==null&&(T.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===st&&xp(et)===T.type)?(T=d(T,O.props),dr(T,O),T.return=D,T):(T=Yo(O.type,O.key,O.props,null,D.mode,_),dr(T,O),T.return=D,T)}function E(D,T,O,_){return T===null||T.tag!==4||T.stateNode.containerInfo!==O.containerInfo||T.stateNode.implementation!==O.implementation?(T=Lc(O,D.mode,_),T.return=D,T):(T=d(T,O.children||[]),T.return=D,T)}function H(D,T,O,_,et){return T===null||T.tag!==7?(T=ll(O,D.mode,_,et),T.return=D,T):(T=d(T,O),T.return=D,T)}function q(D,T,O){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Nc(""+T,D.mode,O),T.return=D,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case v:return O=Yo(T.type,T.key,T.props,null,D.mode,O),dr(O,T),O.return=D,O;case S:return T=Lc(T,D.mode,O),T.return=D,T;case st:var _=T._init;return T=_(T._payload),q(D,T,O)}if(mt(T)||tt(T))return T=ll(T,D.mode,O,null),T.return=D,T;if(typeof T.then=="function")return q(D,la(T),O);if(T.$$typeof===j)return q(D,Ko(D,T),O);sa(D,T)}return null}function B(D,T,O,_){var et=T!==null?T.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return et!==null?null:x(D,T,""+O,_);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case v:return O.key===et?A(D,T,O,_):null;case S:return O.key===et?E(D,T,O,_):null;case st:return et=O._init,O=et(O._payload),B(D,T,O,_)}if(mt(O)||tt(O))return et!==null?null:H(D,T,O,_,null);if(typeof O.then=="function")return B(D,T,la(O),_);if(O.$$typeof===j)return B(D,T,Ko(D,O),_);sa(D,O)}return null}function N(D,T,O,_,et){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return D=D.get(O)||null,x(T,D,""+_,et);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case v:return D=D.get(_.key===null?O:_.key)||null,A(T,D,_,et);case S:return D=D.get(_.key===null?O:_.key)||null,E(T,D,_,et);case st:var St=_._init;return _=St(_._payload),N(D,T,O,_,et)}if(mt(_)||tt(_))return D=D.get(O)||null,H(T,D,_,et,null);if(typeof _.then=="function")return N(D,T,O,la(_),et);if(_.$$typeof===j)return N(D,T,O,Ko(T,_),et);sa(T,_)}return null}function ct(D,T,O,_){for(var et=null,St=null,lt=T,ot=T=0,fe=null;lt!==null&&ot<O.length;ot++){lt.index>ot?(fe=lt,lt=null):fe=lt.sibling;var Et=B(D,lt,O[ot],_);if(Et===null){lt===null&&(lt=fe);break}i&&lt&&Et.alternate===null&&s(D,lt),T=g(Et,T,ot),St===null?et=Et:St.sibling=Et,St=Et,lt=fe}if(ot===O.length)return a(D,lt),Rt&&rl(D,ot),et;if(lt===null){for(;ot<O.length;ot++)lt=q(D,O[ot],_),lt!==null&&(T=g(lt,T,ot),St===null?et=lt:St.sibling=lt,St=lt);return Rt&&rl(D,ot),et}for(lt=c(lt);ot<O.length;ot++)fe=N(lt,D,ot,O[ot],_),fe!==null&&(i&&fe.alternate!==null&&lt.delete(fe.key===null?ot:fe.key),T=g(fe,T,ot),St===null?et=fe:St.sibling=fe,St=fe);return i&&lt.forEach(function(_n){return s(D,_n)}),Rt&&rl(D,ot),et}function rt(D,T,O,_){if(O==null)throw Error(n(151));for(var et=null,St=null,lt=T,ot=T=0,fe=null,Et=O.next();lt!==null&&!Et.done;ot++,Et=O.next()){lt.index>ot?(fe=lt,lt=null):fe=lt.sibling;var _n=B(D,lt,Et.value,_);if(_n===null){lt===null&&(lt=fe);break}i&&lt&&_n.alternate===null&&s(D,lt),T=g(_n,T,ot),St===null?et=_n:St.sibling=_n,St=_n,lt=fe}if(Et.done)return a(D,lt),Rt&&rl(D,ot),et;if(lt===null){for(;!Et.done;ot++,Et=O.next())Et=q(D,Et.value,_),Et!==null&&(T=g(Et,T,ot),St===null?et=Et:St.sibling=Et,St=Et);return Rt&&rl(D,ot),et}for(lt=c(lt);!Et.done;ot++,Et=O.next())Et=N(lt,D,ot,Et.value,_),Et!==null&&(i&&Et.alternate!==null&&lt.delete(Et.key===null?ot:Et.key),T=g(Et,T,ot),St===null?et=Et:St.sibling=Et,St=Et);return i&&lt.forEach(function(yw){return s(D,yw)}),Rt&&rl(D,ot),et}function Ht(D,T,O,_){if(typeof O=="object"&&O!==null&&O.type===w&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case v:t:{for(var et=O.key;T!==null;){if(T.key===et){if(et=O.type,et===w){if(T.tag===7){a(D,T.sibling),_=d(T,O.props.children),_.return=D,D=_;break t}}else if(T.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===st&&xp(et)===T.type){a(D,T.sibling),_=d(T,O.props),dr(_,O),_.return=D,D=_;break t}a(D,T);break}else s(D,T);T=T.sibling}O.type===w?(_=ll(O.props.children,D.mode,_,O.key),_.return=D,D=_):(_=Yo(O.type,O.key,O.props,null,D.mode,_),dr(_,O),_.return=D,D=_)}return b(D);case S:t:{for(et=O.key;T!==null;){if(T.key===et)if(T.tag===4&&T.stateNode.containerInfo===O.containerInfo&&T.stateNode.implementation===O.implementation){a(D,T.sibling),_=d(T,O.children||[]),_.return=D,D=_;break t}else{a(D,T);break}else s(D,T);T=T.sibling}_=Lc(O,D.mode,_),_.return=D,D=_}return b(D);case st:return et=O._init,O=et(O._payload),Ht(D,T,O,_)}if(mt(O))return ct(D,T,O,_);if(tt(O)){if(et=tt(O),typeof et!="function")throw Error(n(150));return O=et.call(O),rt(D,T,O,_)}if(typeof O.then=="function")return Ht(D,T,la(O),_);if(O.$$typeof===j)return Ht(D,T,Ko(D,O),_);sa(D,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,T!==null&&T.tag===6?(a(D,T.sibling),_=d(T,O),_.return=D,D=_):(a(D,T),_=Nc(O,D.mode,_),_.return=D,D=_),b(D)):a(D,T)}return function(D,T,O,_){try{hr=0;var et=Ht(D,T,O,_);return ts=null,et}catch(lt){if(lt===nr||lt===Zo)throw lt;var St=Ze(29,lt,null,D.mode);return St.lanes=_,St.return=D,St}finally{}}}var es=wp(!0),Ap=wp(!1),ai=U(null),ki=null;function wn(i){var s=i.alternate;Z(se,se.current&1),Z(ai,i),ki===null&&(s===null||Jl.current!==null||s.memoizedState!==null)&&(ki=i)}function Mp(i){if(i.tag===22){if(Z(se,se.current),Z(ai,i),ki===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(ki=i)}}else An()}function An(){Z(se,se.current),Z(ai,ai.current)}function $i(i){W(ai),ki===i&&(ki=null),W(se)}var se=U(0);function ra(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||nh(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function mf(i,s,a,c){s=i.memoizedState,a=a(c,s),a=a==null?s:p({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var gf={enqueueSetState:function(i,s,a){i=i._reactInternals;var c=Fe(),d=bn(c);d.payload=s,a!=null&&(d.callback=a),s=Sn(i,d,c),s!==null&&(Ie(s,i,c),sr(s,i,c))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var c=Fe(),d=bn(c);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=Sn(i,d,c),s!==null&&(Ie(s,i,c),sr(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Fe(),c=bn(a);c.tag=2,s!=null&&(c.callback=s),s=Sn(i,c,a),s!==null&&(Ie(s,i,a),sr(s,i,a))}};function Cp(i,s,a,c,d,g,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,b):s.prototype&&s.prototype.isPureReactComponent?!Ps(a,c)||!Ps(d,g):!0}function Tp(i,s,a,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==i&&gf.enqueueReplaceState(s,s.state,null)}function dl(i,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(i=i.defaultProps){a===s&&(a=p({},a));for(var d in i)a[d]===void 0&&(a[d]=i[d])}return a}var oa=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function kp(i){oa(i)}function Dp(i){console.error(i)}function Op(i){oa(i)}function aa(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Ep(i,s,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function pf(i,s,a){return a=bn(a),a.tag=3,a.payload={element:null},a.callback=function(){aa(i,s)},a}function Rp(i){return i=bn(i),i.tag=3,i}function Bp(i,s,a,c){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var g=c.value;i.payload=function(){return d(g)},i.callback=function(){Ep(s,a,c)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){Ep(s,a,c),typeof d!="function"&&(On===null?On=new Set([this]):On.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function y2(i,s,a,c,d){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&tr(s,a,d,!0),a=ai.current,a!==null){switch(a.tag){case 13:return ki===null?Vf():a.alternate===null&&Jt===0&&(Jt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,c===Xc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),jf(i,c,d)),!1;case 22:return a.flags|=65536,c===Xc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),jf(i,c,d)),!1}throw Error(n(435,a.tag))}return jf(i,c,d),Vf(),!1}if(Rt)return s=ai.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==_c&&(i=Error(n(422),{cause:c}),$s(li(i,a)))):(c!==_c&&(s=Error(n(423),{cause:c}),$s(li(s,a))),i=i.current.alternate,i.flags|=65536,d&=-d,i.lanes|=d,c=li(c,a),d=pf(i.stateNode,c,d),Zc(i,d),Jt!==4&&(Jt=2)),!1;var g=Error(n(520),{cause:c});if(g=li(g,a),Sr===null?Sr=[g]:Sr.push(g),Jt!==4&&(Jt=2),s===null)return!0;c=li(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=d&-d,a.lanes|=i,i=pf(a.stateNode,c,i),Zc(a,i),!1;case 1:if(s=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(On===null||!On.has(g))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Rp(d),Bp(d,i,a,c),Zc(a,d),!1}a=a.return}while(a!==null);return!1}var Np=Error(n(461)),ue=!1;function de(i,s,a,c){s.child=i===null?Ap(s,null,a,c):es(s,i.child,a,c)}function Lp(i,s,a,c,d){a=a.render;var g=s.ref;if("ref"in c){var b={};for(var x in c)x!=="ref"&&(b[x]=c[x])}else b=c;return cl(s),c=Ic(i,s,a,b,g,d),x=$c(),i!==null&&!ue?(tf(i,s,d),tn(i,s,d)):(Rt&&x&&zc(s),s.flags|=1,de(i,s,c,d),s.child)}function zp(i,s,a,c,d){if(i===null){var g=a.type;return typeof g=="function"&&!Bc(g)&&g.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=g,Hp(i,s,g,c,d)):(i=Yo(a.type,null,c,s,s.mode,d),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,!Mf(i,d)){var b=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ps,a(b,c)&&i.ref===s.ref)return tn(i,s,d)}return s.flags|=1,i=Zi(g,c),i.ref=s.ref,i.return=s,s.child=i}function Hp(i,s,a,c,d){if(i!==null){var g=i.memoizedProps;if(Ps(g,c)&&i.ref===s.ref)if(ue=!1,s.pendingProps=c=g,Mf(i,d))(i.flags&131072)!==0&&(ue=!0);else return s.lanes=i.lanes,tn(i,s,d)}return yf(i,s,a,c,d)}function _p(i,s,a){var c=s.pendingProps,d=c.children,g=i!==null?i.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=g!==null?g.baseLanes|a:a,i!==null){for(d=s.child=i.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return Up(i,s,c,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Qo(s,g!==null?g.cachePool:null),g!==null?Hg(s,g):Pc(),Mp(s);else return s.lanes=s.childLanes=536870912,Up(i,s,g!==null?g.baseLanes|a:a,a)}else g!==null?(Qo(s,g.cachePool),Hg(s,g),An(),s.memoizedState=null):(i!==null&&Qo(s,null),Pc(),An());return de(i,s,d,a),s.child}function Up(i,s,a,c){var d=Gc();return d=d===null?null:{parent:le._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},i!==null&&Qo(s,null),Pc(),Mp(s),i!==null&&tr(i,s,c,!0),null}function ua(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(n(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function yf(i,s,a,c,d){return cl(s),a=Ic(i,s,a,c,void 0,d),c=$c(),i!==null&&!ue?(tf(i,s,d),tn(i,s,d)):(Rt&&c&&zc(s),s.flags|=1,de(i,s,a,d),s.child)}function qp(i,s,a,c,d,g){return cl(s),s.updateQueue=null,a=Ug(s,c,a,d),_g(i),c=$c(),i!==null&&!ue?(tf(i,s,g),tn(i,s,g)):(Rt&&c&&zc(s),s.flags|=1,de(i,s,a,g),s.child)}function Vp(i,s,a,c,d){if(cl(s),s.stateNode===null){var g=Kl,b=a.contextType;typeof b=="object"&&b!==null&&(g=Ae(b)),g=new a(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=gf,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Kc(s),b=a.contextType,g.context=typeof b=="object"&&b!==null?Ae(b):Kl,g.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(mf(s,a,b,c),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&gf.enqueueReplaceState(g,g.state,null),or(s,c,g,d),rr(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){g=s.stateNode;var x=s.memoizedProps,A=dl(a,x);g.props=A;var E=g.context,H=a.contextType;b=Kl,typeof H=="object"&&H!==null&&(b=Ae(H));var q=a.getDerivedStateFromProps;H=typeof q=="function"||typeof g.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,H||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x||E!==b)&&Tp(s,g,c,b),vn=!1;var B=s.memoizedState;g.state=B,or(s,c,g,d),rr(),E=s.memoizedState,x||B!==E||vn?(typeof q=="function"&&(mf(s,a,q,c),E=s.memoizedState),(A=vn||Cp(s,a,A,c,B,E,b))?(H||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=E),g.props=c,g.state=E,g.context=b,c=A):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,Qc(i,s),b=s.memoizedProps,H=dl(a,b),g.props=H,q=s.pendingProps,B=g.context,E=a.contextType,A=Kl,typeof E=="object"&&E!==null&&(A=Ae(E)),x=a.getDerivedStateFromProps,(E=typeof x=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==q||B!==A)&&Tp(s,g,c,A),vn=!1,B=s.memoizedState,g.state=B,or(s,c,g,d),rr();var N=s.memoizedState;b!==q||B!==N||vn||i!==null&&i.dependencies!==null&&Xo(i.dependencies)?(typeof x=="function"&&(mf(s,a,x,c),N=s.memoizedState),(H=vn||Cp(s,a,H,c,B,N,A)||i!==null&&i.dependencies!==null&&Xo(i.dependencies))?(E||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,N,A),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,N,A)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&B===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&B===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=N),g.props=c,g.state=N,g.context=A,c=H):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&B===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&B===i.memoizedState||(s.flags|=1024),c=!1)}return g=c,ua(i,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,i!==null&&c?(s.child=es(s,i.child,null,d),s.child=es(s,null,a,d)):de(i,s,a,d),s.memoizedState=g.state,i=s.child):i=tn(i,s,d),i}function Yp(i,s,a,c){return Is(),s.flags|=256,de(i,s,a,c),s.child}var vf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bf(i){return{baseLanes:i,cachePool:Dg()}}function Sf(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=ui),i}function jp(i,s,a){var c=s.pendingProps,d=!1,g=(s.flags&128)!==0,b;if((b=g)||(b=i!==null&&i.memoizedState===null?!1:(se.current&2)!==0),b&&(d=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,i===null){if(Rt){if(d?wn(s):An(),Rt){var x=Pt,A;if(A=x){t:{for(A=x,x=Ti;A.nodeType!==8;){if(!x){x=null;break t}if(A=xi(A.nextSibling),A===null){x=null;break t}}x=A}x!==null?(s.memoizedState={dehydrated:x,treeContext:sl!==null?{id:Wi,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},A=Ze(18,null,null,0),A.stateNode=x,A.return=s,s.child=A,Ee=s,Pt=null,A=!0):A=!1}A||al(s)}if(x=s.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return nh(x)?s.lanes=32:s.lanes=536870912,null;$i(s)}return x=c.children,c=c.fallback,d?(An(),d=s.mode,x=ca({mode:"hidden",children:x},d),c=ll(c,d,a,null),x.return=s,c.return=s,x.sibling=c,s.child=x,d=s.child,d.memoizedState=bf(a),d.childLanes=Sf(i,b,a),s.memoizedState=vf,c):(wn(s),xf(s,x))}if(A=i.memoizedState,A!==null&&(x=A.dehydrated,x!==null)){if(g)s.flags&256?(wn(s),s.flags&=-257,s=wf(i,s,a)):s.memoizedState!==null?(An(),s.child=i.child,s.flags|=128,s=null):(An(),d=c.fallback,x=s.mode,c=ca({mode:"visible",children:c.children},x),d=ll(d,x,a,null),d.flags|=2,c.return=s,d.return=s,c.sibling=d,s.child=c,es(s,i.child,null,a),c=s.child,c.memoizedState=bf(a),c.childLanes=Sf(i,b,a),s.memoizedState=vf,s=d);else if(wn(s),nh(x)){if(b=x.nextSibling&&x.nextSibling.dataset,b)var E=b.dgst;b=E,c=Error(n(419)),c.stack="",c.digest=b,$s({value:c,source:null,stack:null}),s=wf(i,s,a)}else if(ue||tr(i,s,a,!1),b=(a&i.childLanes)!==0,ue||b){if(b=Yt,b!==null&&(c=a&-a,c=(c&42)!==0?1:nc(c),c=(c&(b.suspendedLanes|a))!==0?0:c,c!==0&&c!==A.retryLane))throw A.retryLane=c,Xl(i,c),Ie(b,i,c),Np;x.data==="$?"||Vf(),s=wf(i,s,a)}else x.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=A.treeContext,Pt=xi(x.nextSibling),Ee=s,Rt=!0,ol=null,Ti=!1,i!==null&&(ri[oi++]=Wi,ri[oi++]=Pi,ri[oi++]=sl,Wi=i.id,Pi=i.overflow,sl=s),s=xf(s,c.children),s.flags|=4096);return s}return d?(An(),d=c.fallback,x=s.mode,A=i.child,E=A.sibling,c=Zi(A,{mode:"hidden",children:c.children}),c.subtreeFlags=A.subtreeFlags&65011712,E!==null?d=Zi(E,d):(d=ll(d,x,a,null),d.flags|=2),d.return=s,c.return=s,c.sibling=d,s.child=c,c=d,d=s.child,x=i.child.memoizedState,x===null?x=bf(a):(A=x.cachePool,A!==null?(E=le._currentValue,A=A.parent!==E?{parent:E,pool:E}:A):A=Dg(),x={baseLanes:x.baseLanes|a,cachePool:A}),d.memoizedState=x,d.childLanes=Sf(i,b,a),s.memoizedState=vf,c):(wn(s),a=i.child,i=a.sibling,a=Zi(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,i!==null&&(b=s.deletions,b===null?(s.deletions=[i],s.flags|=16):b.push(i)),s.child=a,s.memoizedState=null,a)}function xf(i,s){return s=ca({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function ca(i,s){return i=Ze(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function wf(i,s,a){return es(s,i.child,null,a),i=xf(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Gp(i,s,a){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),qc(i.return,s,a)}function Af(i,s,a,c,d){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function Xp(i,s,a){var c=s.pendingProps,d=c.revealOrder,g=c.tail;if(de(i,s,c.children,a),c=se.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Gp(i,a,s);else if(i.tag===19)Gp(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(Z(se,c),d){case"forwards":for(a=s.child,d=null;a!==null;)i=a.alternate,i!==null&&ra(i)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Af(s,!1,d,a,g);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(i=d.alternate,i!==null&&ra(i)===null){s.child=d;break}i=d.sibling,d.sibling=a,a=d,d=i}Af(s,!0,a,null,g);break;case"together":Af(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function tn(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),Dn|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(tr(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,a=Zi(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=Zi(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function Mf(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Xo(i)))}function v2(i,s,a){switch(s.tag){case 3:Kt(s,s.stateNode.containerInfo),yn(s,le,i.memoizedState.cache),Is();break;case 27:case 5:Iu(s);break;case 4:Kt(s,s.stateNode.containerInfo);break;case 10:yn(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(wn(s),s.flags|=128,null):(a&s.child.childLanes)!==0?jp(i,s,a):(wn(s),i=tn(i,s,a),i!==null?i.sibling:null);wn(s);break;case 19:var d=(i.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(tr(i,s,a,!1),c=(a&s.childLanes)!==0),d){if(c)return Xp(i,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Z(se,se.current),c)break;return null;case 22:case 23:return s.lanes=0,_p(i,s,a);case 24:yn(s,le,i.memoizedState.cache)}return tn(i,s,a)}function Kp(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)ue=!0;else{if(!Mf(i,a)&&(s.flags&128)===0)return ue=!1,v2(i,s,a);ue=(i.flags&131072)!==0}else ue=!1,Rt&&(s.flags&1048576)!==0&&xg(s,Go,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var c=s.elementType,d=c._init;if(c=d(c._payload),s.type=c,typeof c=="function")Bc(c)?(i=dl(c,i),s.tag=1,s=Vp(null,s,c,i,a)):(s.tag=0,s=yf(null,s,c,i,a));else{if(c!=null){if(d=c.$$typeof,d===K){s.tag=11,s=Lp(null,s,c,i,a);break t}else if(d===X){s.tag=14,s=zp(null,s,c,i,a);break t}}throw s=yt(c)||c,Error(n(306,s,""))}}return s;case 0:return yf(i,s,s.type,s.pendingProps,a);case 1:return c=s.type,d=dl(c,s.pendingProps),Vp(i,s,c,d,a);case 3:t:{if(Kt(s,s.stateNode.containerInfo),i===null)throw Error(n(387));c=s.pendingProps;var g=s.memoizedState;d=g.element,Qc(i,s),or(s,c,null,a);var b=s.memoizedState;if(c=b.cache,yn(s,le,c),c!==g.cache&&Vc(s,[le],a,!0),rr(),c=b.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=Yp(i,s,c,a);break t}else if(c!==d){d=li(Error(n(424)),s),$s(d),s=Yp(i,s,c,a);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Pt=xi(i.firstChild),Ee=s,Rt=!0,ol=null,Ti=!0,a=Ap(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Is(),c===d){s=tn(i,s,a);break t}de(i,s,c,a)}s=s.child}return s;case 26:return ua(i,s),i===null?(a=P0(s.type,null,s.pendingProps,null))?s.memoizedState=a:Rt||(a=s.type,i=s.pendingProps,c=Ma(at.current).createElement(a),c[we]=s,c[Le]=i,ge(c,a,i),ae(c),s.stateNode=c):s.memoizedState=P0(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Iu(s),i===null&&Rt&&(c=s.stateNode=Q0(s.type,s.pendingProps,at.current),Ee=s,Ti=!0,d=Pt,Bn(s.type)?(lh=d,Pt=xi(c.firstChild)):Pt=d),de(i,s,s.pendingProps.children,a),ua(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Rt&&((d=c=Pt)&&(c=Q2(c,s.type,s.pendingProps,Ti),c!==null?(s.stateNode=c,Ee=s,Pt=xi(c.firstChild),Ti=!1,d=!0):d=!1),d||al(s)),Iu(s),d=s.type,g=s.pendingProps,b=i!==null?i.memoizedProps:null,c=g.children,th(d,g)?c=null:b!==null&&th(d,b)&&(s.flags|=32),s.memoizedState!==null&&(d=Ic(i,s,c2,null,null,a),Or._currentValue=d),ua(i,s),de(i,s,c,a),s.child;case 6:return i===null&&Rt&&((i=a=Pt)&&(a=Z2(a,s.pendingProps,Ti),a!==null?(s.stateNode=a,Ee=s,Pt=null,i=!0):i=!1),i||al(s)),null;case 13:return jp(i,s,a);case 4:return Kt(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=es(s,null,c,a):de(i,s,c,a),s.child;case 11:return Lp(i,s,s.type,s.pendingProps,a);case 7:return de(i,s,s.pendingProps,a),s.child;case 8:return de(i,s,s.pendingProps.children,a),s.child;case 12:return de(i,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,yn(s,s.type,c.value),de(i,s,c.children,a),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,cl(s),d=Ae(d),c=c(d),s.flags|=1,de(i,s,c,a),s.child;case 14:return zp(i,s,s.type,s.pendingProps,a);case 15:return Hp(i,s,s.type,s.pendingProps,a);case 19:return Xp(i,s,a);case 31:return c=s.pendingProps,a=s.mode,c={mode:c.mode,children:c.children},i===null?(a=ca(c,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Zi(i.child,c),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return _p(i,s,a);case 24:return cl(s),c=Ae(le),i===null?(d=Gc(),d===null&&(d=Yt,g=Yc(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=a),d=g),s.memoizedState={parent:c,cache:d},Kc(s),yn(s,le,d)):((i.lanes&a)!==0&&(Qc(i,s),or(s,null,null,a),rr()),d=i.memoizedState,g=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),yn(s,le,c)):(c=g.cache,yn(s,le,c),c!==d.cache&&Vc(s,[le],a,!0))),de(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function en(i){i.flags|=4}function Qp(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ty(s)){if(s=ai.current,s!==null&&((Tt&4194048)===Tt?ki!==null:(Tt&62914560)!==Tt&&(Tt&536870912)===0||s!==ki))throw lr=Xc,Og;i.flags|=8192}}function fa(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Mm():536870912,i.lanes|=s,ss|=s)}function mr(i,s){if(!Rt)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Wt(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(s)for(var d=i.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=i,d=d.sibling;else for(d=i.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=i,d=d.sibling;return i.subtreeFlags|=c,i.childLanes=a,s}function b2(i,s,a){var c=s.pendingProps;switch(Hc(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(s),null;case 1:return Wt(s),null;case 3:return a=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Fi(le),dn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Fs(s)?en(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mg())),Wt(s),null;case 26:return a=s.memoizedState,i===null?(en(s),a!==null?(Wt(s),Qp(s,a)):(Wt(s),s.flags&=-16777217)):a?a!==i.memoizedState?(en(s),Wt(s),Qp(s,a)):(Wt(s),s.flags&=-16777217):(i.memoizedProps!==c&&en(s),Wt(s),s.flags&=-16777217),null;case 27:wo(s),a=at.current;var d=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==c&&en(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return Wt(s),null}i=nt.current,Fs(s)?wg(s):(i=Q0(d,c,a),s.stateNode=i,en(s))}return Wt(s),null;case 5:if(wo(s),a=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&en(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return Wt(s),null}if(i=nt.current,Fs(s))wg(s);else{switch(d=Ma(at.current),i){case 1:i=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=d.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?d.createElement(a,{is:c.is}):d.createElement(a)}}i[we]=s,i[Le]=c;t:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break t;for(;d.sibling===null;){if(d.return===null||d.return===s)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=i;t:switch(ge(i,a,c),a){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&en(s)}}return Wt(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&en(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(n(166));if(i=at.current,Fs(s)){if(i=s.stateNode,a=s.memoizedProps,c=null,d=Ee,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}i[we]=s,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||q0(i.nodeValue,a)),i||al(s)}else i=Ma(i).createTextNode(c),i[we]=s,s.stateNode=i}return Wt(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(d=Fs(s),c!==null&&c.dehydrated!==null){if(i===null){if(!d)throw Error(n(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));d[we]=s}else Is(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Wt(s),d=!1}else d=Mg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?($i(s),s):($i(s),null)}if($i(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=c!==null,i=i!==null&&i.memoizedState!==null,a){c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==d&&(c.flags|=2048)}return a!==i&&a&&(s.child.flags|=8192),fa(s,s.updateQueue),Wt(s),null;case 4:return dn(),i===null&&Pf(s.stateNode.containerInfo),Wt(s),null;case 10:return Fi(s.type),Wt(s),null;case 19:if(W(se),d=s.memoizedState,d===null)return Wt(s),null;if(c=(s.flags&128)!==0,g=d.rendering,g===null)if(c)mr(d,!1);else{if(Jt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(g=ra(i),g!==null){for(s.flags|=128,mr(d,!1),i=g.updateQueue,s.updateQueue=i,fa(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)Sg(a,i),a=a.sibling;return Z(se,se.current&1|2),s.child}i=i.sibling}d.tail!==null&&Ci()>ma&&(s.flags|=128,c=!0,mr(d,!1),s.lanes=4194304)}else{if(!c)if(i=ra(g),i!==null){if(s.flags|=128,c=!0,i=i.updateQueue,s.updateQueue=i,fa(s,i),mr(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Rt)return Wt(s),null}else 2*Ci()-d.renderingStartTime>ma&&a!==536870912&&(s.flags|=128,c=!0,mr(d,!1),s.lanes=4194304);d.isBackwards?(g.sibling=s.child,s.child=g):(i=d.last,i!==null?i.sibling=g:s.child=g,d.last=g)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Ci(),s.sibling=null,i=se.current,Z(se,c?i&1|2:i&1),s):(Wt(s),null);case 22:case 23:return $i(s),Jc(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(Wt(s),s.subtreeFlags&6&&(s.flags|=8192)):Wt(s),a=s.updateQueue,a!==null&&fa(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),i!==null&&W(fl),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Fi(le),Wt(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function S2(i,s){switch(Hc(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Fi(le),dn(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return wo(s),null;case 13:if($i(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Is()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return W(se),null;case 4:return dn(),null;case 10:return Fi(s.type),null;case 22:case 23:return $i(s),Jc(),i!==null&&W(fl),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Fi(le),null;case 25:return null;default:return null}}function Zp(i,s){switch(Hc(s),s.tag){case 3:Fi(le),dn();break;case 26:case 27:case 5:wo(s);break;case 4:dn();break;case 13:$i(s);break;case 19:W(se);break;case 10:Fi(s.type);break;case 22:case 23:$i(s),Jc(),i!==null&&W(fl);break;case 24:Fi(le)}}function gr(i,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var d=c.next;a=d;do{if((a.tag&i)===i){c=void 0;var g=a.create,b=a.inst;c=g(),b.destroy=c}a=a.next}while(a!==d)}}catch(x){_t(s,s.return,x)}}function Mn(i,s,a){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&i)===i){var b=c.inst,x=b.destroy;if(x!==void 0){b.destroy=void 0,d=s;var A=a,E=x;try{E()}catch(H){_t(d,A,H)}}}c=c.next}while(c!==g)}}catch(H){_t(s,s.return,H)}}function Wp(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{zg(s,a)}catch(c){_t(i,i.return,c)}}}function Pp(i,s,a){a.props=dl(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){_t(i,s,c)}}function pr(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(d){_t(i,s,d)}}function Di(i,s){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(d){_t(i,s,d)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){_t(i,s,d)}else a.current=null}function Jp(i){var s=i.type,a=i.memoizedProps,c=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break t;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(d){_t(i,i.return,d)}}function Cf(i,s,a){try{var c=i.stateNode;Y2(c,i.type,a,s),c[Le]=s}catch(d){_t(i,i.return,d)}}function Fp(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Bn(i.type)||i.tag===4}function Tf(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Fp(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Bn(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function kf(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Aa));else if(c!==4&&(c===27&&Bn(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(kf(i,s,a),i=i.sibling;i!==null;)kf(i,s,a),i=i.sibling}function ha(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(c!==4&&(c===27&&Bn(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(ha(i,s,a),i=i.sibling;i!==null;)ha(i,s,a),i=i.sibling}function Ip(i){var s=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);ge(s,c,a),s[we]=i,s[Le]=a}catch(g){_t(i,i.return,g)}}var nn=!1,It=!1,Df=!1,$p=typeof WeakSet=="function"?WeakSet:Set,ce=null;function x2(i,s){if(i=i.containerInfo,If=Ea,i=cg(i),Cc(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else t:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break t}var b=0,x=-1,A=-1,E=0,H=0,q=i,B=null;e:for(;;){for(var N;q!==a||d!==0&&q.nodeType!==3||(x=b+d),q!==g||c!==0&&q.nodeType!==3||(A=b+c),q.nodeType===3&&(b+=q.nodeValue.length),(N=q.firstChild)!==null;)B=q,q=N;for(;;){if(q===i)break e;if(B===a&&++E===d&&(x=b),B===g&&++H===c&&(A=b),(N=q.nextSibling)!==null)break;q=B,B=q.parentNode}q=N}a=x===-1||A===-1?null:{start:x,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for($f={focusedElem:i,selectionRange:a},Ea=!1,ce=s;ce!==null;)if(s=ce,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,ce=i;else for(;ce!==null;){switch(s=ce,g=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,a=s,d=g.memoizedProps,g=g.memoizedState,c=a.stateNode;try{var ct=dl(a.type,d,a.elementType===a.type);i=c.getSnapshotBeforeUpdate(ct,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(rt){_t(a,a.return,rt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)ih(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ih(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,ce=i;break}ce=s.return}}function t0(i,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Cn(i,a),c&4&&gr(5,a);break;case 1:if(Cn(i,a),c&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(b){_t(a,a.return,b)}else{var d=dl(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(d,s,i.__reactInternalSnapshotBeforeUpdate)}catch(b){_t(a,a.return,b)}}c&64&&Wp(a),c&512&&pr(a,a.return);break;case 3:if(Cn(i,a),c&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{zg(i,s)}catch(b){_t(a,a.return,b)}}break;case 27:s===null&&c&4&&Ip(a);case 26:case 5:Cn(i,a),s===null&&c&4&&Jp(a),c&512&&pr(a,a.return);break;case 12:Cn(i,a);break;case 13:Cn(i,a),c&4&&n0(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=E2.bind(null,a),W2(i,a))));break;case 22:if(c=a.memoizedState!==null||nn,!c){s=s!==null&&s.memoizedState!==null||It,d=nn;var g=It;nn=c,(It=s)&&!g?Tn(i,a,(a.subtreeFlags&8772)!==0):Cn(i,a),nn=d,It=g}break;case 30:break;default:Cn(i,a)}}function e0(i){var s=i.alternate;s!==null&&(i.alternate=null,e0(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&rc(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Qt=null,_e=!1;function ln(i,s,a){for(a=a.child;a!==null;)i0(i,s,a),a=a.sibling}function i0(i,s,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(_s,a)}catch{}switch(a.tag){case 26:It||Di(a,s),ln(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||Di(a,s);var c=Qt,d=_e;Bn(a.type)&&(Qt=a.stateNode,_e=!1),ln(i,s,a),Cr(a.stateNode),Qt=c,_e=d;break;case 5:It||Di(a,s);case 6:if(c=Qt,d=_e,Qt=null,ln(i,s,a),Qt=c,_e=d,Qt!==null)if(_e)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(a.stateNode)}catch(g){_t(a,s,g)}else try{Qt.removeChild(a.stateNode)}catch(g){_t(a,s,g)}break;case 18:Qt!==null&&(_e?(i=Qt,X0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Nr(i)):X0(Qt,a.stateNode));break;case 4:c=Qt,d=_e,Qt=a.stateNode.containerInfo,_e=!0,ln(i,s,a),Qt=c,_e=d;break;case 0:case 11:case 14:case 15:It||Mn(2,a,s),It||Mn(4,a,s),ln(i,s,a);break;case 1:It||(Di(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Pp(a,s,c)),ln(i,s,a);break;case 21:ln(i,s,a);break;case 22:It=(c=It)||a.memoizedState!==null,ln(i,s,a),It=c;break;default:ln(i,s,a)}}function n0(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Nr(i)}catch(a){_t(s,s.return,a)}}function w2(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new $p),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new $p),s;default:throw Error(n(435,i.tag))}}function Of(i,s){var a=w2(i);s.forEach(function(c){var d=R2.bind(null,i,c);a.has(c)||(a.add(c),c.then(d,d))})}function We(i,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c],g=i,b=s,x=b;t:for(;x!==null;){switch(x.tag){case 27:if(Bn(x.type)){Qt=x.stateNode,_e=!1;break t}break;case 5:Qt=x.stateNode,_e=!1;break t;case 3:case 4:Qt=x.stateNode.containerInfo,_e=!0;break t}x=x.return}if(Qt===null)throw Error(n(160));i0(g,b,d),Qt=null,_e=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)l0(s,i),s=s.sibling}var Si=null;function l0(i,s){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:We(s,i),Pe(i),c&4&&(Mn(3,i,i.return),gr(3,i),Mn(5,i,i.return));break;case 1:We(s,i),Pe(i),c&512&&(It||a===null||Di(a,a.return)),c&64&&nn&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var d=Si;if(We(s,i),Pe(i),c&512&&(It||a===null||Di(a,a.return)),c&4){var g=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){t:{c=i.type,a=i.memoizedProps,d=d.ownerDocument||d;e:switch(c){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Vs]||g[we]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(c),d.head.insertBefore(g,d.querySelector("head > title"))),ge(g,c,a),g[we]=i,ae(g),c=g;break t;case"link":var b=I0("link","href",d).get(c+(a.href||""));if(b){for(var x=0;x<b.length;x++)if(g=b[x],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(x,1);break e}}g=d.createElement(c),ge(g,c,a),d.head.appendChild(g);break;case"meta":if(b=I0("meta","content",d).get(c+(a.content||""))){for(x=0;x<b.length;x++)if(g=b[x],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(x,1);break e}}g=d.createElement(c),ge(g,c,a),d.head.appendChild(g);break;default:throw Error(n(468,c))}g[we]=i,ae(g),c=g}i.stateNode=c}else $0(d,i.type,i.stateNode);else i.stateNode=F0(d,c,i.memoizedProps);else g!==c?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,c===null?$0(d,i.type,i.stateNode):F0(d,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Cf(i,i.memoizedProps,a.memoizedProps)}break;case 27:We(s,i),Pe(i),c&512&&(It||a===null||Di(a,a.return)),a!==null&&c&4&&Cf(i,i.memoizedProps,a.memoizedProps);break;case 5:if(We(s,i),Pe(i),c&512&&(It||a===null||Di(a,a.return)),i.flags&32){d=i.stateNode;try{_l(d,"")}catch(N){_t(i,i.return,N)}}c&4&&i.stateNode!=null&&(d=i.memoizedProps,Cf(i,d,a!==null?a.memoizedProps:d)),c&1024&&(Df=!0);break;case 6:if(We(s,i),Pe(i),c&4){if(i.stateNode===null)throw Error(n(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(N){_t(i,i.return,N)}}break;case 3:if(ka=null,d=Si,Si=Ca(s.containerInfo),We(s,i),Si=d,Pe(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Nr(s.containerInfo)}catch(N){_t(i,i.return,N)}Df&&(Df=!1,s0(i));break;case 4:c=Si,Si=Ca(i.stateNode.containerInfo),We(s,i),Pe(i),Si=c;break;case 12:We(s,i),Pe(i);break;case 13:We(s,i),Pe(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zf=Ci()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Of(i,c)));break;case 22:d=i.memoizedState!==null;var A=a!==null&&a.memoizedState!==null,E=nn,H=It;if(nn=E||d,It=H||A,We(s,i),It=H,nn=E,Pe(i),c&8192)t:for(s=i.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||A||nn||It||ml(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){A=a=s;try{if(g=A.stateNode,d)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{x=A.stateNode;var q=A.memoizedProps.style,B=q!=null&&q.hasOwnProperty("display")?q.display:null;x.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(N){_t(A,A.return,N)}}}else if(s.tag===6){if(a===null){A=s;try{A.stateNode.nodeValue=d?"":A.memoizedProps}catch(N){_t(A,A.return,N)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Of(i,a))));break;case 19:We(s,i),Pe(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Of(i,c)));break;case 30:break;case 21:break;default:We(s,i),Pe(i)}}function Pe(i){var s=i.flags;if(s&2){try{for(var a,c=i.return;c!==null;){if(Fp(c)){a=c;break}c=c.return}if(a==null)throw Error(n(160));switch(a.tag){case 27:var d=a.stateNode,g=Tf(i);ha(i,g,d);break;case 5:var b=a.stateNode;a.flags&32&&(_l(b,""),a.flags&=-33);var x=Tf(i);ha(i,x,b);break;case 3:case 4:var A=a.stateNode.containerInfo,E=Tf(i);kf(i,E,A);break;default:throw Error(n(161))}}catch(H){_t(i,i.return,H)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function s0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;s0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Cn(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)t0(i,s.alternate,s),s=s.sibling}function ml(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Mn(4,s,s.return),ml(s);break;case 1:Di(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Pp(s,s.return,a),ml(s);break;case 27:Cr(s.stateNode);case 26:case 5:Di(s,s.return),ml(s);break;case 22:s.memoizedState===null&&ml(s);break;case 30:ml(s);break;default:ml(s)}i=i.sibling}}function Tn(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=i,g=s,b=g.flags;switch(g.tag){case 0:case 11:case 15:Tn(d,g,a),gr(4,g);break;case 1:if(Tn(d,g,a),c=g,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(E){_t(c,c.return,E)}if(c=g,d=c.updateQueue,d!==null){var x=c.stateNode;try{var A=d.shared.hiddenCallbacks;if(A!==null)for(d.shared.hiddenCallbacks=null,d=0;d<A.length;d++)Lg(A[d],x)}catch(E){_t(c,c.return,E)}}a&&b&64&&Wp(g),pr(g,g.return);break;case 27:Ip(g);case 26:case 5:Tn(d,g,a),a&&c===null&&b&4&&Jp(g),pr(g,g.return);break;case 12:Tn(d,g,a);break;case 13:Tn(d,g,a),a&&b&4&&n0(d,g);break;case 22:g.memoizedState===null&&Tn(d,g,a),pr(g,g.return);break;case 30:break;default:Tn(d,g,a)}s=s.sibling}}function Ef(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&er(a))}function Rf(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&er(i))}function Oi(i,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)r0(i,s,a,c),s=s.sibling}function r0(i,s,a,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Oi(i,s,a,c),d&2048&&gr(9,s);break;case 1:Oi(i,s,a,c);break;case 3:Oi(i,s,a,c),d&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&er(i)));break;case 12:if(d&2048){Oi(i,s,a,c),i=s.stateNode;try{var g=s.memoizedProps,b=g.id,x=g.onPostCommit;typeof x=="function"&&x(b,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(A){_t(s,s.return,A)}}else Oi(i,s,a,c);break;case 13:Oi(i,s,a,c);break;case 23:break;case 22:g=s.stateNode,b=s.alternate,s.memoizedState!==null?g._visibility&2?Oi(i,s,a,c):yr(i,s):g._visibility&2?Oi(i,s,a,c):(g._visibility|=2,is(i,s,a,c,(s.subtreeFlags&10256)!==0)),d&2048&&Ef(b,s);break;case 24:Oi(i,s,a,c),d&2048&&Rf(s.alternate,s);break;default:Oi(i,s,a,c)}}function is(i,s,a,c,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=i,b=s,x=a,A=c,E=b.flags;switch(b.tag){case 0:case 11:case 15:is(g,b,x,A,d),gr(8,b);break;case 23:break;case 22:var H=b.stateNode;b.memoizedState!==null?H._visibility&2?is(g,b,x,A,d):yr(g,b):(H._visibility|=2,is(g,b,x,A,d)),d&&E&2048&&Ef(b.alternate,b);break;case 24:is(g,b,x,A,d),d&&E&2048&&Rf(b.alternate,b);break;default:is(g,b,x,A,d)}s=s.sibling}}function yr(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,c=s,d=c.flags;switch(c.tag){case 22:yr(a,c),d&2048&&Ef(c.alternate,c);break;case 24:yr(a,c),d&2048&&Rf(c.alternate,c);break;default:yr(a,c)}s=s.sibling}}var vr=8192;function ns(i){if(i.subtreeFlags&vr)for(i=i.child;i!==null;)o0(i),i=i.sibling}function o0(i){switch(i.tag){case 26:ns(i),i.flags&vr&&i.memoizedState!==null&&ow(Si,i.memoizedState,i.memoizedProps);break;case 5:ns(i);break;case 3:case 4:var s=Si;Si=Ca(i.stateNode.containerInfo),ns(i),Si=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=vr,vr=16777216,ns(i),vr=s):ns(i));break;default:ns(i)}}function a0(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function br(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];ce=c,c0(c,i)}a0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)u0(i),i=i.sibling}function u0(i){switch(i.tag){case 0:case 11:case 15:br(i),i.flags&2048&&Mn(9,i,i.return);break;case 3:br(i);break;case 12:br(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,da(i)):br(i);break;default:br(i)}}function da(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];ce=c,c0(c,i)}a0(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Mn(8,s,s.return),da(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,da(s));break;default:da(s)}i=i.sibling}}function c0(i,s){for(;ce!==null;){var a=ce;switch(a.tag){case 0:case 11:case 15:Mn(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:er(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,ce=c;else t:for(a=i;ce!==null;){c=ce;var d=c.sibling,g=c.return;if(e0(c),c===a){ce=null;break t}if(d!==null){d.return=g,ce=d;break t}ce=g}}}var A2={getCacheForType:function(i){var s=Ae(le),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a}},M2=typeof WeakMap=="function"?WeakMap:Map,Bt=0,Yt=null,wt=null,Tt=0,Nt=0,Je=null,kn=!1,ls=!1,Bf=!1,sn=0,Jt=0,Dn=0,gl=0,Nf=0,ui=0,ss=0,Sr=null,Ue=null,Lf=!1,zf=0,ma=1/0,ga=null,On=null,me=0,En=null,rs=null,os=0,Hf=0,_f=null,f0=null,xr=0,Uf=null;function Fe(){if((Bt&2)!==0&&Tt!==0)return Tt&-Tt;if(L.T!==null){var i=Wl;return i!==0?i:Kf()}return km()}function h0(){ui===0&&(ui=(Tt&536870912)===0||Rt?Am():536870912);var i=ai.current;return i!==null&&(i.flags|=32),ui}function Ie(i,s,a){(i===Yt&&(Nt===2||Nt===9)||i.cancelPendingCommit!==null)&&(as(i,0),Rn(i,Tt,ui,!1)),qs(i,a),((Bt&2)===0||i!==Yt)&&(i===Yt&&((Bt&2)===0&&(gl|=a),Jt===4&&Rn(i,Tt,ui,!1)),Ei(i))}function d0(i,s,a){if((Bt&6)!==0)throw Error(n(327));var c=!a&&(s&124)===0&&(s&i.expiredLanes)===0||Us(i,s),d=c?k2(i,s):Yf(i,s,!0),g=c;do{if(d===0){ls&&!c&&Rn(i,s,0,!1);break}else{if(a=i.current.alternate,g&&!C2(a)){d=Yf(i,s,!1),g=!1;continue}if(d===2){if(g=s,i.errorRecoveryDisabledLanes&g)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;t:{var x=i;d=Sr;var A=x.current.memoizedState.isDehydrated;if(A&&(as(x,b).flags|=256),b=Yf(x,b,!1),b!==2){if(Bf&&!A){x.errorRecoveryDisabledLanes|=g,gl|=g,d=4;break t}g=Ue,Ue=d,g!==null&&(Ue===null?Ue=g:Ue.push.apply(Ue,g))}d=b}if(g=!1,d!==2)continue}}if(d===1){as(i,0),Rn(i,s,0,!0);break}t:{switch(c=i,g=d,g){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Rn(c,s,ui,!kn);break t;case 2:Ue=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(d=zf+300-Ci(),10<d)){if(Rn(c,s,ui,!kn),To(c,0,!0)!==0)break t;c.timeoutHandle=j0(m0.bind(null,c,a,Ue,ga,Lf,s,ui,gl,ss,kn,g,2,-0,0),d);break t}m0(c,a,Ue,ga,Lf,s,ui,gl,ss,kn,g,0,-0,0)}}break}while(!0);Ei(i)}function m0(i,s,a,c,d,g,b,x,A,E,H,q,B,N){if(i.timeoutHandle=-1,q=s.subtreeFlags,(q&8192||(q&16785408)===16785408)&&(Dr={stylesheets:null,count:0,unsuspend:rw},o0(s),q=aw(),q!==null)){i.cancelPendingCommit=q(x0.bind(null,i,s,g,a,c,d,b,x,A,H,1,B,N)),Rn(i,g,b,!E);return}x0(i,s,g,a,c,d,b,x,A)}function C2(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!Qe(g(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Rn(i,s,a,c){s&=~Nf,s&=~gl,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var d=s;0<d;){var g=31-Ke(d),b=1<<g;c[g]=-1,d&=~b}a!==0&&Cm(i,a,s)}function pa(){return(Bt&6)===0?(wr(0),!1):!0}function qf(){if(wt!==null){if(Nt===0)var i=wt.return;else i=wt,Ji=ul=null,ef(i),ts=null,hr=0,i=wt;for(;i!==null;)Zp(i.alternate,i),i=i.return;wt=null}}function as(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,G2(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),qf(),Yt=i,wt=a=Zi(i.current,null),Tt=s,Nt=0,Je=null,kn=!1,ls=Us(i,s),Bf=!1,ss=ui=Nf=gl=Dn=Jt=0,Ue=Sr=null,Lf=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var d=31-Ke(c),g=1<<d;s|=i[d],c&=~g}return sn=s,Uo(),a}function g0(i,s){bt=null,L.H=na,s===nr||s===Zo?(s=Bg(),Nt=3):s===Og?(s=Bg(),Nt=4):Nt=s===Np?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Je=s,wt===null&&(Jt=1,aa(i,li(s,i.current)))}function p0(){var i=L.H;return L.H=na,i===null?na:i}function y0(){var i=L.A;return L.A=A2,i}function Vf(){Jt=4,kn||(Tt&4194048)!==Tt&&ai.current!==null||(ls=!0),(Dn&134217727)===0&&(gl&134217727)===0||Yt===null||Rn(Yt,Tt,ui,!1)}function Yf(i,s,a){var c=Bt;Bt|=2;var d=p0(),g=y0();(Yt!==i||Tt!==s)&&(ga=null,as(i,s)),s=!1;var b=Jt;t:do try{if(Nt!==0&&wt!==null){var x=wt,A=Je;switch(Nt){case 8:qf(),b=6;break t;case 3:case 2:case 9:case 6:ai.current===null&&(s=!0);var E=Nt;if(Nt=0,Je=null,us(i,x,A,E),a&&ls){b=0;break t}break;default:E=Nt,Nt=0,Je=null,us(i,x,A,E)}}T2(),b=Jt;break}catch(H){g0(i,H)}while(!0);return s&&i.shellSuspendCounter++,Ji=ul=null,Bt=c,L.H=d,L.A=g,wt===null&&(Yt=null,Tt=0,Uo()),b}function T2(){for(;wt!==null;)v0(wt)}function k2(i,s){var a=Bt;Bt|=2;var c=p0(),d=y0();Yt!==i||Tt!==s?(ga=null,ma=Ci()+500,as(i,s)):ls=Us(i,s);t:do try{if(Nt!==0&&wt!==null){s=wt;var g=Je;e:switch(Nt){case 1:Nt=0,Je=null,us(i,s,g,1);break;case 2:case 9:if(Eg(g)){Nt=0,Je=null,b0(s);break}s=function(){Nt!==2&&Nt!==9||Yt!==i||(Nt=7),Ei(i)},g.then(s,s);break t;case 3:Nt=7;break t;case 4:Nt=5;break t;case 7:Eg(g)?(Nt=0,Je=null,b0(s)):(Nt=0,Je=null,us(i,s,g,7));break;case 5:var b=null;switch(wt.tag){case 26:b=wt.memoizedState;case 5:case 27:var x=wt;if(!b||ty(b)){Nt=0,Je=null;var A=x.sibling;if(A!==null)wt=A;else{var E=x.return;E!==null?(wt=E,ya(E)):wt=null}break e}}Nt=0,Je=null,us(i,s,g,5);break;case 6:Nt=0,Je=null,us(i,s,g,6);break;case 8:qf(),Jt=6;break t;default:throw Error(n(462))}}D2();break}catch(H){g0(i,H)}while(!0);return Ji=ul=null,L.H=c,L.A=d,Bt=a,wt!==null?0:(Yt=null,Tt=0,Uo(),Jt)}function D2(){for(;wt!==null&&!JS();)v0(wt)}function v0(i){var s=Kp(i.alternate,i,sn);i.memoizedProps=i.pendingProps,s===null?ya(i):wt=s}function b0(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=qp(a,s,s.pendingProps,s.type,void 0,Tt);break;case 11:s=qp(a,s,s.pendingProps,s.type.render,s.ref,Tt);break;case 5:ef(s);default:Zp(a,s),s=wt=Sg(s,sn),s=Kp(a,s,sn)}i.memoizedProps=i.pendingProps,s===null?ya(i):wt=s}function us(i,s,a,c){Ji=ul=null,ef(s),ts=null,hr=0;var d=s.return;try{if(y2(i,d,s,a,Tt)){Jt=1,aa(i,li(a,i.current)),wt=null;return}}catch(g){if(d!==null)throw wt=d,g;Jt=1,aa(i,li(a,i.current)),wt=null;return}s.flags&32768?(Rt||c===1?i=!0:ls||(Tt&536870912)!==0?i=!1:(kn=i=!0,(c===2||c===9||c===3||c===6)&&(c=ai.current,c!==null&&c.tag===13&&(c.flags|=16384))),S0(s,i)):ya(s)}function ya(i){var s=i;do{if((s.flags&32768)!==0){S0(s,kn);return}i=s.return;var a=b2(s.alternate,s,sn);if(a!==null){wt=a;return}if(s=s.sibling,s!==null){wt=s;return}wt=s=i}while(s!==null);Jt===0&&(Jt=5)}function S0(i,s){do{var a=S2(i.alternate,i);if(a!==null){a.flags&=32767,wt=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){wt=i;return}wt=i=a}while(i!==null);Jt=6,wt=null}function x0(i,s,a,c,d,g,b,x,A){i.cancelPendingCommit=null;do va();while(me!==0);if((Bt&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(g=s.lanes|s.childLanes,g|=Ec,rx(i,a,g,b,x,A),i===Yt&&(wt=Yt=null,Tt=0),rs=s,En=i,os=a,Hf=g,_f=d,f0=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,B2(Ao,function(){return T0(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=L.T,L.T=null,d=Q.p,Q.p=2,b=Bt,Bt|=4;try{x2(i,s,a)}finally{Bt=b,Q.p=d,L.T=c}}me=1,w0(),A0(),M0()}}function w0(){if(me===1){me=0;var i=En,s=rs,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=L.T,L.T=null;var c=Q.p;Q.p=2;var d=Bt;Bt|=4;try{l0(s,i);var g=$f,b=cg(i.containerInfo),x=g.focusedElem,A=g.selectionRange;if(b!==x&&x&&x.ownerDocument&&ug(x.ownerDocument.documentElement,x)){if(A!==null&&Cc(x)){var E=A.start,H=A.end;if(H===void 0&&(H=E),"selectionStart"in x)x.selectionStart=E,x.selectionEnd=Math.min(H,x.value.length);else{var q=x.ownerDocument||document,B=q&&q.defaultView||window;if(B.getSelection){var N=B.getSelection(),ct=x.textContent.length,rt=Math.min(A.start,ct),Ht=A.end===void 0?rt:Math.min(A.end,ct);!N.extend&&rt>Ht&&(b=Ht,Ht=rt,rt=b);var D=ag(x,rt),T=ag(x,Ht);if(D&&T&&(N.rangeCount!==1||N.anchorNode!==D.node||N.anchorOffset!==D.offset||N.focusNode!==T.node||N.focusOffset!==T.offset)){var O=q.createRange();O.setStart(D.node,D.offset),N.removeAllRanges(),rt>Ht?(N.addRange(O),N.extend(T.node,T.offset)):(O.setEnd(T.node,T.offset),N.addRange(O))}}}}for(q=[],N=x;N=N.parentNode;)N.nodeType===1&&q.push({element:N,left:N.scrollLeft,top:N.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<q.length;x++){var _=q[x];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}Ea=!!If,$f=If=null}finally{Bt=d,Q.p=c,L.T=a}}i.current=s,me=2}}function A0(){if(me===2){me=0;var i=En,s=rs,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=L.T,L.T=null;var c=Q.p;Q.p=2;var d=Bt;Bt|=4;try{t0(i,s.alternate,s)}finally{Bt=d,Q.p=c,L.T=a}}me=3}}function M0(){if(me===4||me===3){me=0,FS();var i=En,s=rs,a=os,c=f0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?me=5:(me=0,rs=En=null,C0(i,i.pendingLanes));var d=i.pendingLanes;if(d===0&&(On=null),lc(a),s=s.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(_s,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=L.T,d=Q.p,Q.p=2,L.T=null;try{for(var g=i.onRecoverableError,b=0;b<c.length;b++){var x=c[b];g(x.value,{componentStack:x.stack})}}finally{L.T=s,Q.p=d}}(os&3)!==0&&va(),Ei(i),d=i.pendingLanes,(a&4194090)!==0&&(d&42)!==0?i===Uf?xr++:(xr=0,Uf=i):xr=0,wr(0)}}function C0(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,er(s)))}function va(i){return w0(),A0(),M0(),T0()}function T0(){if(me!==5)return!1;var i=En,s=Hf;Hf=0;var a=lc(os),c=L.T,d=Q.p;try{Q.p=32>a?32:a,L.T=null,a=_f,_f=null;var g=En,b=os;if(me=0,rs=En=null,os=0,(Bt&6)!==0)throw Error(n(331));var x=Bt;if(Bt|=4,u0(g.current),r0(g,g.current,b,a),Bt=x,wr(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(_s,g)}catch{}return!0}finally{Q.p=d,L.T=c,C0(i,s)}}function k0(i,s,a){s=li(a,s),s=pf(i.stateNode,s,2),i=Sn(i,s,2),i!==null&&(qs(i,2),Ei(i))}function _t(i,s,a){if(i.tag===3)k0(i,i,a);else for(;s!==null;){if(s.tag===3){k0(s,i,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(On===null||!On.has(c))){i=li(a,i),a=Rp(2),c=Sn(s,a,2),c!==null&&(Bp(a,c,s,i),qs(c,2),Ei(c));break}}s=s.return}}function jf(i,s,a){var c=i.pingCache;if(c===null){c=i.pingCache=new M2;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(Bf=!0,d.add(a),i=O2.bind(null,i,s,a),s.then(i,i))}function O2(i,s,a){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,Yt===i&&(Tt&a)===a&&(Jt===4||Jt===3&&(Tt&62914560)===Tt&&300>Ci()-zf?(Bt&2)===0&&as(i,0):Nf|=a,ss===Tt&&(ss=0)),Ei(i)}function D0(i,s){s===0&&(s=Mm()),i=Xl(i,s),i!==null&&(qs(i,s),Ei(i))}function E2(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),D0(i,a)}function R2(i,s){var a=0;switch(i.tag){case 13:var c=i.stateNode,d=i.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(n(314))}c!==null&&c.delete(s),D0(i,a)}function B2(i,s){return tc(i,s)}var ba=null,cs=null,Gf=!1,Sa=!1,Xf=!1,pl=0;function Ei(i){i!==cs&&i.next===null&&(cs===null?ba=cs=i:cs=cs.next=i),Sa=!0,Gf||(Gf=!0,L2())}function wr(i,s){if(!Xf&&Sa){Xf=!0;do for(var a=!1,c=ba;c!==null;){if(i!==0){var d=c.pendingLanes;if(d===0)var g=0;else{var b=c.suspendedLanes,x=c.pingedLanes;g=(1<<31-Ke(42|i)+1)-1,g&=d&~(b&~x),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,B0(c,g))}else g=Tt,g=To(c,c===Yt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Us(c,g)||(a=!0,B0(c,g));c=c.next}while(a);Xf=!1}}function N2(){O0()}function O0(){Sa=Gf=!1;var i=0;pl!==0&&(j2()&&(i=pl),pl=0);for(var s=Ci(),a=null,c=ba;c!==null;){var d=c.next,g=E0(c,s);g===0?(c.next=null,a===null?ba=d:a.next=d,d===null&&(cs=a)):(a=c,(i!==0||(g&3)!==0)&&(Sa=!0)),c=d}wr(i)}function E0(i,s){for(var a=i.suspendedLanes,c=i.pingedLanes,d=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var b=31-Ke(g),x=1<<b,A=d[b];A===-1?((x&a)===0||(x&c)!==0)&&(d[b]=sx(x,s)):A<=s&&(i.expiredLanes|=x),g&=~x}if(s=Yt,a=Tt,a=To(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===s&&(Nt===2||Nt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&ec(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Us(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(c!==null&&ec(c),lc(a)){case 2:case 8:a=xm;break;case 32:a=Ao;break;case 268435456:a=wm;break;default:a=Ao}return c=R0.bind(null,i),a=tc(a,c),i.callbackPriority=s,i.callbackNode=a,s}return c!==null&&c!==null&&ec(c),i.callbackPriority=2,i.callbackNode=null,2}function R0(i,s){if(me!==0&&me!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(va()&&i.callbackNode!==a)return null;var c=Tt;return c=To(i,i===Yt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(d0(i,c,s),E0(i,Ci()),i.callbackNode!=null&&i.callbackNode===a?R0.bind(null,i):null)}function B0(i,s){if(va())return null;d0(i,s,!0)}function L2(){X2(function(){(Bt&6)!==0?tc(Sm,N2):O0()})}function Kf(){return pl===0&&(pl=Am()),pl}function N0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ro(""+i)}function L0(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function z2(i,s,a,c,d){if(s==="submit"&&a&&a.stateNode===d){var g=N0((d[Le]||null).action),b=c.submitter;b&&(s=(s=b[Le]||null)?N0(s.formAction):b.getAttribute("formAction"),s!==null&&(g=s,b=null));var x=new zo("action","action",null,c,d);i.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(pl!==0){var A=b?L0(d,b):new FormData(d);ff(a,{pending:!0,data:A,method:d.method,action:g},null,A)}}else typeof g=="function"&&(x.preventDefault(),A=b?L0(d,b):new FormData(d),ff(a,{pending:!0,data:A,method:d.method,action:g},g,A))},currentTarget:d}]})}}for(var Qf=0;Qf<Oc.length;Qf++){var Zf=Oc[Qf],H2=Zf.toLowerCase(),_2=Zf[0].toUpperCase()+Zf.slice(1);bi(H2,"on"+_2)}bi(dg,"onAnimationEnd"),bi(mg,"onAnimationIteration"),bi(gg,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(t2,"onTransitionRun"),bi(e2,"onTransitionStart"),bi(i2,"onTransitionCancel"),bi(pg,"onTransitionEnd"),Ll("onMouseEnter",["mouseout","mouseover"]),Ll("onMouseLeave",["mouseout","mouseover"]),Ll("onPointerEnter",["pointerout","pointerover"]),Ll("onPointerLeave",["pointerout","pointerover"]),tl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tl("onBeforeInput",["compositionend","keypress","textInput","paste"]),tl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ar));function z0(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],d=c.event;c=c.listeners;t:{var g=void 0;if(s)for(var b=c.length-1;0<=b;b--){var x=c[b],A=x.instance,E=x.currentTarget;if(x=x.listener,A!==g&&d.isPropagationStopped())break t;g=x,d.currentTarget=E;try{g(d)}catch(H){oa(H)}d.currentTarget=null,g=A}else for(b=0;b<c.length;b++){if(x=c[b],A=x.instance,E=x.currentTarget,x=x.listener,A!==g&&d.isPropagationStopped())break t;g=x,d.currentTarget=E;try{g(d)}catch(H){oa(H)}d.currentTarget=null,g=A}}}}function At(i,s){var a=s[sc];a===void 0&&(a=s[sc]=new Set);var c=i+"__bubble";a.has(c)||(H0(s,i,2,!1),a.add(c))}function Wf(i,s,a){var c=0;s&&(c|=4),H0(a,i,c,s)}var xa="_reactListening"+Math.random().toString(36).slice(2);function Pf(i){if(!i[xa]){i[xa]=!0,Om.forEach(function(a){a!=="selectionchange"&&(U2.has(a)||Wf(a,!1,i),Wf(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[xa]||(s[xa]=!0,Wf("selectionchange",!1,s))}}function H0(i,s,a,c){switch(ry(s)){case 2:var d=fw;break;case 8:d=hw;break;default:d=uh}a=d.bind(null,s,a,i),d=void 0,!pc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?i.addEventListener(s,a,{capture:!0,passive:d}):i.addEventListener(s,a,!0):d!==void 0?i.addEventListener(s,a,{passive:d}):i.addEventListener(s,a,!1)}function Jf(i,s,a,c,d){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)t:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var x=c.stateNode.containerInfo;if(x===d)break;if(b===4)for(b=c.return;b!==null;){var A=b.tag;if((A===3||A===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;x!==null;){if(b=Rl(x),b===null)return;if(A=b.tag,A===5||A===6||A===26||A===27){c=g=b;continue t}x=x.parentNode}}c=c.return}Gm(function(){var E=g,H=mc(a),q=[];t:{var B=yg.get(i);if(B!==void 0){var N=zo,ct=i;switch(i){case"keypress":if(No(a)===0)break t;case"keydown":case"keyup":N=Bx;break;case"focusin":ct="focus",N=Sc;break;case"focusout":ct="blur",N=Sc;break;case"beforeblur":case"afterblur":N=Sc;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Qm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=Sx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=zx;break;case dg:case mg:case gg:N=Ax;break;case pg:N=_x;break;case"scroll":case"scrollend":N=vx;break;case"wheel":N=qx;break;case"copy":case"cut":case"paste":N=Cx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Wm;break;case"toggle":case"beforetoggle":N=Yx}var rt=(s&4)!==0,Ht=!rt&&(i==="scroll"||i==="scrollend"),D=rt?B!==null?B+"Capture":null:B;rt=[];for(var T=E,O;T!==null;){var _=T;if(O=_.stateNode,_=_.tag,_!==5&&_!==26&&_!==27||O===null||D===null||(_=js(T,D),_!=null&&rt.push(Mr(T,_,O))),Ht)break;T=T.return}0<rt.length&&(B=new N(B,ct,null,a,H),q.push({event:B,listeners:rt}))}}if((s&7)===0){t:{if(B=i==="mouseover"||i==="pointerover",N=i==="mouseout"||i==="pointerout",B&&a!==dc&&(ct=a.relatedTarget||a.fromElement)&&(Rl(ct)||ct[El]))break t;if((N||B)&&(B=H.window===H?H:(B=H.ownerDocument)?B.defaultView||B.parentWindow:window,N?(ct=a.relatedTarget||a.toElement,N=E,ct=ct?Rl(ct):null,ct!==null&&(Ht=o(ct),rt=ct.tag,ct!==Ht||rt!==5&&rt!==27&&rt!==6)&&(ct=null)):(N=null,ct=E),N!==ct)){if(rt=Qm,_="onMouseLeave",D="onMouseEnter",T="mouse",(i==="pointerout"||i==="pointerover")&&(rt=Wm,_="onPointerLeave",D="onPointerEnter",T="pointer"),Ht=N==null?B:Ys(N),O=ct==null?B:Ys(ct),B=new rt(_,T+"leave",N,a,H),B.target=Ht,B.relatedTarget=O,_=null,Rl(H)===E&&(rt=new rt(D,T+"enter",ct,a,H),rt.target=O,rt.relatedTarget=Ht,_=rt),Ht=_,N&&ct)e:{for(rt=N,D=ct,T=0,O=rt;O;O=fs(O))T++;for(O=0,_=D;_;_=fs(_))O++;for(;0<T-O;)rt=fs(rt),T--;for(;0<O-T;)D=fs(D),O--;for(;T--;){if(rt===D||D!==null&&rt===D.alternate)break e;rt=fs(rt),D=fs(D)}rt=null}else rt=null;N!==null&&_0(q,B,N,rt,!1),ct!==null&&Ht!==null&&_0(q,Ht,ct,rt,!0)}}t:{if(B=E?Ys(E):window,N=B.nodeName&&B.nodeName.toLowerCase(),N==="select"||N==="input"&&B.type==="file")var et=ig;else if(tg(B))if(ng)et=Fx;else{et=Px;var St=Wx}else N=B.nodeName,!N||N.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?E&&hc(E.elementType)&&(et=ig):et=Jx;if(et&&(et=et(i,E))){eg(q,et,a,H);break t}St&&St(i,B,E),i==="focusout"&&E&&B.type==="number"&&E.memoizedProps.value!=null&&fc(B,"number",B.value)}switch(St=E?Ys(E):window,i){case"focusin":(tg(St)||St.contentEditable==="true")&&(Yl=St,Tc=E,Js=null);break;case"focusout":Js=Tc=Yl=null;break;case"mousedown":kc=!0;break;case"contextmenu":case"mouseup":case"dragend":kc=!1,fg(q,a,H);break;case"selectionchange":if($x)break;case"keydown":case"keyup":fg(q,a,H)}var lt;if(wc)t:{switch(i){case"compositionstart":var ot="onCompositionStart";break t;case"compositionend":ot="onCompositionEnd";break t;case"compositionupdate":ot="onCompositionUpdate";break t}ot=void 0}else Vl?Im(i,a)&&(ot="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(ot="onCompositionStart");ot&&(Pm&&a.locale!=="ko"&&(Vl||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Vl&&(lt=Xm()):(pn=H,yc="value"in pn?pn.value:pn.textContent,Vl=!0)),St=wa(E,ot),0<St.length&&(ot=new Zm(ot,i,null,a,H),q.push({event:ot,listeners:St}),lt?ot.data=lt:(lt=$m(a),lt!==null&&(ot.data=lt)))),(lt=Gx?Xx(i,a):Kx(i,a))&&(ot=wa(E,"onBeforeInput"),0<ot.length&&(St=new Zm("onBeforeInput","beforeinput",null,a,H),q.push({event:St,listeners:ot}),St.data=lt)),z2(q,i,E,a,H)}z0(q,s)})}function Mr(i,s,a){return{instance:i,listener:s,currentTarget:a}}function wa(i,s){for(var a=s+"Capture",c=[];i!==null;){var d=i,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=js(i,a),d!=null&&c.unshift(Mr(i,d,g)),d=js(i,s),d!=null&&c.push(Mr(i,d,g))),i.tag===3)return c;i=i.return}return[]}function fs(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function _0(i,s,a,c,d){for(var g=s._reactName,b=[];a!==null&&a!==c;){var x=a,A=x.alternate,E=x.stateNode;if(x=x.tag,A!==null&&A===c)break;x!==5&&x!==26&&x!==27||E===null||(A=E,d?(E=js(a,g),E!=null&&b.unshift(Mr(a,E,A))):d||(E=js(a,g),E!=null&&b.push(Mr(a,E,A)))),a=a.return}b.length!==0&&i.push({event:s,listeners:b})}var q2=/\r\n?/g,V2=/\u0000|\uFFFD/g;function U0(i){return(typeof i=="string"?i:""+i).replace(q2,`
`).replace(V2,"")}function q0(i,s){return s=U0(s),U0(i)===s}function Aa(){}function zt(i,s,a,c,d,g){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||_l(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&_l(i,""+c);break;case"className":Do(i,"class",c);break;case"tabIndex":Do(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Do(i,a,c);break;case"style":Ym(i,c,g);break;case"data":if(s!=="object"){Do(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ro(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(s!=="input"&&zt(i,s,"name",d.name,d,null),zt(i,s,"formEncType",d.formEncType,d,null),zt(i,s,"formMethod",d.formMethod,d,null),zt(i,s,"formTarget",d.formTarget,d,null)):(zt(i,s,"encType",d.encType,d,null),zt(i,s,"method",d.method,d,null),zt(i,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ro(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Aa);break;case"onScroll":c!=null&&At("scroll",i);break;case"onScrollEnd":c!=null&&At("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(n(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Ro(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":At("beforetoggle",i),At("toggle",i),ko(i,"popover",c);break;case"xlinkActuate":Ki(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ki(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ki(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ki(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ki(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ki(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ki(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ki(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ki(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ko(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=px.get(a)||a,ko(i,a,c))}}function Ff(i,s,a,c,d,g){switch(a){case"style":Ym(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(a=c.__html,a!=null){if(d.children!=null)throw Error(n(60));i.innerHTML=a}}break;case"children":typeof c=="string"?_l(i,c):(typeof c=="number"||typeof c=="bigint")&&_l(i,""+c);break;case"onScroll":c!=null&&At("scroll",i);break;case"onScrollEnd":c!=null&&At("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Em.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),g=i[Le]||null,g=g!=null?g[a]:null,typeof g=="function"&&i.removeEventListener(s,g,d),typeof c=="function")){typeof g!="function"&&g!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,c,d);break t}a in i?i[a]=c:c===!0?i.setAttribute(a,""):ko(i,a,c)}}}function ge(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",i),At("load",i);var c=!1,d=!1,g;for(g in a)if(a.hasOwnProperty(g)){var b=a[g];if(b!=null)switch(g){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:zt(i,s,g,b,a,null)}}d&&zt(i,s,"srcSet",a.srcSet,a,null),c&&zt(i,s,"src",a.src,a,null);return;case"input":At("invalid",i);var x=g=b=d=null,A=null,E=null;for(c in a)if(a.hasOwnProperty(c)){var H=a[c];if(H!=null)switch(c){case"name":d=H;break;case"type":b=H;break;case"checked":A=H;break;case"defaultChecked":E=H;break;case"value":g=H;break;case"defaultValue":x=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(137,s));break;default:zt(i,s,c,H,a,null)}}_m(i,g,x,A,E,b,d,!1),Oo(i);return;case"select":At("invalid",i),c=b=g=null;for(d in a)if(a.hasOwnProperty(d)&&(x=a[d],x!=null))switch(d){case"value":g=x;break;case"defaultValue":b=x;break;case"multiple":c=x;default:zt(i,s,d,x,a,null)}s=g,a=b,i.multiple=!!c,s!=null?Hl(i,!!c,s,!1):a!=null&&Hl(i,!!c,a,!0);return;case"textarea":At("invalid",i),g=d=c=null;for(b in a)if(a.hasOwnProperty(b)&&(x=a[b],x!=null))switch(b){case"value":c=x;break;case"defaultValue":d=x;break;case"children":g=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:zt(i,s,b,x,a,null)}qm(i,c,d,g),Oo(i);return;case"option":for(A in a)if(a.hasOwnProperty(A)&&(c=a[A],c!=null))switch(A){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:zt(i,s,A,c,a,null)}return;case"dialog":At("beforetoggle",i),At("toggle",i),At("cancel",i),At("close",i);break;case"iframe":case"object":At("load",i);break;case"video":case"audio":for(c=0;c<Ar.length;c++)At(Ar[c],i);break;case"image":At("error",i),At("load",i);break;case"details":At("toggle",i);break;case"embed":case"source":case"link":At("error",i),At("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(E in a)if(a.hasOwnProperty(E)&&(c=a[E],c!=null))switch(E){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:zt(i,s,E,c,a,null)}return;default:if(hc(s)){for(H in a)a.hasOwnProperty(H)&&(c=a[H],c!==void 0&&Ff(i,s,H,c,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(c=a[x],c!=null&&zt(i,s,x,c,a,null))}function Y2(i,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,b=null,x=null,A=null,E=null,H=null;for(N in a){var q=a[N];if(a.hasOwnProperty(N)&&q!=null)switch(N){case"checked":break;case"value":break;case"defaultValue":A=q;default:c.hasOwnProperty(N)||zt(i,s,N,null,c,q)}}for(var B in c){var N=c[B];if(q=a[B],c.hasOwnProperty(B)&&(N!=null||q!=null))switch(B){case"type":g=N;break;case"name":d=N;break;case"checked":E=N;break;case"defaultChecked":H=N;break;case"value":b=N;break;case"defaultValue":x=N;break;case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(137,s));break;default:N!==q&&zt(i,s,B,N,c,q)}}cc(i,b,x,A,E,H,g,d);return;case"select":N=b=x=B=null;for(g in a)if(A=a[g],a.hasOwnProperty(g)&&A!=null)switch(g){case"value":break;case"multiple":N=A;default:c.hasOwnProperty(g)||zt(i,s,g,null,c,A)}for(d in c)if(g=c[d],A=a[d],c.hasOwnProperty(d)&&(g!=null||A!=null))switch(d){case"value":B=g;break;case"defaultValue":x=g;break;case"multiple":b=g;default:g!==A&&zt(i,s,d,g,c,A)}s=x,a=b,c=N,B!=null?Hl(i,!!a,B,!1):!!c!=!!a&&(s!=null?Hl(i,!!a,s,!0):Hl(i,!!a,a?[]:"",!1));return;case"textarea":N=B=null;for(x in a)if(d=a[x],a.hasOwnProperty(x)&&d!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:zt(i,s,x,null,c,d)}for(b in c)if(d=c[b],g=a[b],c.hasOwnProperty(b)&&(d!=null||g!=null))switch(b){case"value":B=d;break;case"defaultValue":N=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(n(91));break;default:d!==g&&zt(i,s,b,d,c,g)}Um(i,B,N);return;case"option":for(var ct in a)if(B=a[ct],a.hasOwnProperty(ct)&&B!=null&&!c.hasOwnProperty(ct))switch(ct){case"selected":i.selected=!1;break;default:zt(i,s,ct,null,c,B)}for(A in c)if(B=c[A],N=a[A],c.hasOwnProperty(A)&&B!==N&&(B!=null||N!=null))switch(A){case"selected":i.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:zt(i,s,A,B,c,N)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in a)B=a[rt],a.hasOwnProperty(rt)&&B!=null&&!c.hasOwnProperty(rt)&&zt(i,s,rt,null,c,B);for(E in c)if(B=c[E],N=a[E],c.hasOwnProperty(E)&&B!==N&&(B!=null||N!=null))switch(E){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(n(137,s));break;default:zt(i,s,E,B,c,N)}return;default:if(hc(s)){for(var Ht in a)B=a[Ht],a.hasOwnProperty(Ht)&&B!==void 0&&!c.hasOwnProperty(Ht)&&Ff(i,s,Ht,void 0,c,B);for(H in c)B=c[H],N=a[H],!c.hasOwnProperty(H)||B===N||B===void 0&&N===void 0||Ff(i,s,H,B,c,N);return}}for(var D in a)B=a[D],a.hasOwnProperty(D)&&B!=null&&!c.hasOwnProperty(D)&&zt(i,s,D,null,c,B);for(q in c)B=c[q],N=a[q],!c.hasOwnProperty(q)||B===N||B==null&&N==null||zt(i,s,q,B,c,N)}var If=null,$f=null;function Ma(i){return i.nodeType===9?i:i.ownerDocument}function V0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Y0(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function th(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var eh=null;function j2(){var i=window.event;return i&&i.type==="popstate"?i===eh?!1:(eh=i,!0):(eh=null,!1)}var j0=typeof setTimeout=="function"?setTimeout:void 0,G2=typeof clearTimeout=="function"?clearTimeout:void 0,G0=typeof Promise=="function"?Promise:void 0,X2=typeof queueMicrotask=="function"?queueMicrotask:typeof G0<"u"?function(i){return G0.resolve(null).then(i).catch(K2)}:j0;function K2(i){setTimeout(function(){throw i})}function Bn(i){return i==="head"}function X0(i,s){var a=s,c=0,d=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<c&&8>c){a=c;var b=i.ownerDocument;if(a&1&&Cr(b.documentElement),a&2&&Cr(b.body),a&4)for(a=b.head,Cr(a),b=a.firstChild;b;){var x=b.nextSibling,A=b.nodeName;b[Vs]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=x}}if(d===0){i.removeChild(g),Nr(s);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:c=a.charCodeAt(0)-48;else c=0;a=g}while(a);Nr(s)}function ih(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ih(a),rc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function Q2(i,s,a,c){for(;i.nodeType===1;){var d=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Vs])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==d.rel||i.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||i.getAttribute("title")!==(d.title==null?null:d.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(d.src==null?null:d.src)||i.getAttribute("type")!==(d.type==null?null:d.type)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=xi(i.nextSibling),i===null)break}return null}function Z2(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=xi(i.nextSibling),i===null))return null;return i}function nh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function W2(i,s){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function xi(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var lh=null;function K0(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return i;s--}else a==="/$"&&s++}i=i.previousSibling}return null}function Q0(i,s,a){switch(s=Ma(a),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Cr(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);rc(i)}var ci=new Map,Z0=new Set;function Ca(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var rn=Q.d;Q.d={f:P2,r:J2,D:F2,C:I2,L:$2,m:tw,X:iw,S:ew,M:nw};function P2(){var i=rn.f(),s=pa();return i||s}function J2(i){var s=Bl(i);s!==null&&s.tag===5&&s.type==="form"?dp(s):rn.r(i)}var hs=typeof document>"u"?null:document;function W0(i,s,a){var c=hs;if(c&&typeof s=="string"&&s){var d=ni(s);d='link[rel="'+i+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Z0.has(d)||(Z0.add(d),i={rel:i,crossOrigin:a,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),ge(s,"link",i),ae(s),c.head.appendChild(s)))}}function F2(i){rn.D(i),W0("dns-prefetch",i,null)}function I2(i,s){rn.C(i,s),W0("preconnect",i,s)}function $2(i,s,a){rn.L(i,s,a);var c=hs;if(c&&i&&s){var d='link[rel="preload"][as="'+ni(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+ni(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+ni(a.imageSizes)+'"]')):d+='[href="'+ni(i)+'"]';var g=d;switch(s){case"style":g=ds(i);break;case"script":g=ms(i)}ci.has(g)||(i=p({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),ci.set(g,i),c.querySelector(d)!==null||s==="style"&&c.querySelector(Tr(g))||s==="script"&&c.querySelector(kr(g))||(s=c.createElement("link"),ge(s,"link",i),ae(s),c.head.appendChild(s)))}}function tw(i,s){rn.m(i,s);var a=hs;if(a&&i){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+ni(c)+'"][href="'+ni(i)+'"]',g=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=ms(i)}if(!ci.has(g)&&(i=p({rel:"modulepreload",href:i},s),ci.set(g,i),a.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(kr(g)))return}c=a.createElement("link"),ge(c,"link",i),ae(c),a.head.appendChild(c)}}}function ew(i,s,a){rn.S(i,s,a);var c=hs;if(c&&i){var d=Nl(c).hoistableStyles,g=ds(i);s=s||"default";var b=d.get(g);if(!b){var x={loading:0,preload:null};if(b=c.querySelector(Tr(g)))x.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":s},a),(a=ci.get(g))&&sh(i,a);var A=b=c.createElement("link");ae(A),ge(A,"link",i),A._p=new Promise(function(E,H){A.onload=E,A.onerror=H}),A.addEventListener("load",function(){x.loading|=1}),A.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Ta(b,s,c)}b={type:"stylesheet",instance:b,count:1,state:x},d.set(g,b)}}}function iw(i,s){rn.X(i,s);var a=hs;if(a&&i){var c=Nl(a).hoistableScripts,d=ms(i),g=c.get(d);g||(g=a.querySelector(kr(d)),g||(i=p({src:i,async:!0},s),(s=ci.get(d))&&rh(i,s),g=a.createElement("script"),ae(g),ge(g,"link",i),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function nw(i,s){rn.M(i,s);var a=hs;if(a&&i){var c=Nl(a).hoistableScripts,d=ms(i),g=c.get(d);g||(g=a.querySelector(kr(d)),g||(i=p({src:i,async:!0,type:"module"},s),(s=ci.get(d))&&rh(i,s),g=a.createElement("script"),ae(g),ge(g,"link",i),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function P0(i,s,a,c){var d=(d=at.current)?Ca(d):null;if(!d)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=ds(a.href),a=Nl(d).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=ds(a.href);var g=Nl(d).hoistableStyles,b=g.get(i);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,b),(g=d.querySelector(Tr(i)))&&!g._p&&(b.instance=g,b.state.loading=5),ci.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ci.set(i,a),g||lw(d,i,a,b.state))),s&&c===null)throw Error(n(528,""));return b}if(s&&c!==null)throw Error(n(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ms(a),a=Nl(d).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function ds(i){return'href="'+ni(i)+'"'}function Tr(i){return'link[rel="stylesheet"]['+i+"]"}function J0(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function lw(i,s,a,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),ge(s,"link",a),ae(s),i.head.appendChild(s))}function ms(i){return'[src="'+ni(i)+'"]'}function kr(i){return"script[async]"+i}function F0(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+ni(a.href)+'"]');if(c)return s.instance=c,ae(c),c;var d=p({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),ae(c),ge(c,"style",d),Ta(c,a.precedence,i),s.instance=c;case"stylesheet":d=ds(a.href);var g=i.querySelector(Tr(d));if(g)return s.state.loading|=4,s.instance=g,ae(g),g;c=J0(a),(d=ci.get(d))&&sh(c,d),g=(i.ownerDocument||i).createElement("link"),ae(g);var b=g;return b._p=new Promise(function(x,A){b.onload=x,b.onerror=A}),ge(g,"link",c),s.state.loading|=4,Ta(g,a.precedence,i),s.instance=g;case"script":return g=ms(a.src),(d=i.querySelector(kr(g)))?(s.instance=d,ae(d),d):(c=a,(d=ci.get(g))&&(c=p({},a),rh(c,d)),i=i.ownerDocument||i,d=i.createElement("script"),ae(d),ge(d,"link",c),i.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Ta(c,a.precedence,i));return s.instance}function Ta(i,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,g=d,b=0;b<c.length;b++){var x=c[b];if(x.dataset.precedence===s)g=x;else if(g!==d)break}g?g.parentNode.insertBefore(i,g.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function sh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function rh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var ka=null;function I0(i,s,a){if(ka===null){var c=new Map,d=ka=new Map;d.set(a,c)}else d=ka,c=d.get(a),c||(c=new Map,d.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),d=0;d<a.length;d++){var g=a[d];if(!(g[Vs]||g[we]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(s)||"";b=i+b;var x=c.get(b);x?x.push(g):c.set(b,[g])}}return c}function $0(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function sw(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ty(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Dr=null;function rw(){}function ow(i,s,a){if(Dr===null)throw Error(n(475));var c=Dr;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=ds(a.href),g=i.querySelector(Tr(d));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=Da.bind(c),i.then(c,c)),s.state.loading|=4,s.instance=g,ae(g);return}g=i.ownerDocument||i,a=J0(a),(d=ci.get(d))&&sh(a,d),g=g.createElement("link"),ae(g);var b=g;b._p=new Promise(function(x,A){b.onload=x,b.onerror=A}),ge(g,"link",a),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Da.bind(c),i.addEventListener("load",s),i.addEventListener("error",s))}}function aw(){if(Dr===null)throw Error(n(475));var i=Dr;return i.stylesheets&&i.count===0&&oh(i,i.stylesheets),0<i.count?function(s){var a=setTimeout(function(){if(i.stylesheets&&oh(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(a)}}:null}function Da(){if(this.count--,this.count===0){if(this.stylesheets)oh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Oa=null;function oh(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Oa=new Map,s.forEach(uw,i),Oa=null,Da.call(i))}function uw(i,s){if(!(s.state.loading&4)){var a=Oa.get(i);if(a)var c=a.get(null);else{a=new Map,Oa.set(i,a);for(var d=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var b=d[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),c=b)}c&&a.set(null,c)}d=s.instance,b=d.getAttribute("data-precedence"),g=a.get(b)||c,g===c&&a.set(null,d),a.set(b,d),this.count++,c=Da.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),g?g.parentNode.insertBefore(d,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(d,i.firstChild)),s.state.loading|=4}}var Or={$$typeof:j,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function cw(i,s,a,c,d,g,b,x){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ic(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.hiddenUpdates=ic(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function ey(i,s,a,c,d,g,b,x,A,E,H,q){return i=new cw(i,s,a,b,x,A,E,q),s=1,g===!0&&(s|=24),g=Ze(3,null,null,s),i.current=g,g.stateNode=i,s=Yc(),s.refCount++,i.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:a,cache:s},Kc(g),i}function iy(i){return i?(i=Kl,i):Kl}function ny(i,s,a,c,d,g){d=iy(d),c.context===null?c.context=d:c.pendingContext=d,c=bn(s),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=Sn(i,c,s),a!==null&&(Ie(a,i,s),sr(a,i,s))}function ly(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function ah(i,s){ly(i,s),(i=i.alternate)&&ly(i,s)}function sy(i){if(i.tag===13){var s=Xl(i,67108864);s!==null&&Ie(s,i,67108864),ah(i,67108864)}}var Ea=!0;function fw(i,s,a,c){var d=L.T;L.T=null;var g=Q.p;try{Q.p=2,uh(i,s,a,c)}finally{Q.p=g,L.T=d}}function hw(i,s,a,c){var d=L.T;L.T=null;var g=Q.p;try{Q.p=8,uh(i,s,a,c)}finally{Q.p=g,L.T=d}}function uh(i,s,a,c){if(Ea){var d=ch(c);if(d===null)Jf(i,s,c,Ra,a),oy(i,c);else if(mw(d,i,s,a,c))c.stopPropagation();else if(oy(i,c),s&4&&-1<dw.indexOf(i)){for(;d!==null;){var g=Bl(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=$n(g.pendingLanes);if(b!==0){var x=g;for(x.pendingLanes|=2,x.entangledLanes|=2;b;){var A=1<<31-Ke(b);x.entanglements[1]|=A,b&=~A}Ei(g),(Bt&6)===0&&(ma=Ci()+500,wr(0))}}break;case 13:x=Xl(g,2),x!==null&&Ie(x,g,2),pa(),ah(g,2)}if(g=ch(c),g===null&&Jf(i,s,c,Ra,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else Jf(i,s,c,null,a)}}function ch(i){return i=mc(i),fh(i)}var Ra=null;function fh(i){if(Ra=null,i=Rl(i),i!==null){var s=o(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=u(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Ra=i,null}function ry(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(IS()){case Sm:return 2;case xm:return 8;case Ao:case $S:return 32;case wm:return 268435456;default:return 32}default:return 32}}var hh=!1,Nn=null,Ln=null,zn=null,Er=new Map,Rr=new Map,Hn=[],dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oy(i,s){switch(i){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":Er.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rr.delete(s.pointerId)}}function Br(i,s,a,c,d,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},s!==null&&(s=Bl(s),s!==null&&sy(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),i)}function mw(i,s,a,c,d){switch(s){case"focusin":return Nn=Br(Nn,i,s,a,c,d),!0;case"dragenter":return Ln=Br(Ln,i,s,a,c,d),!0;case"mouseover":return zn=Br(zn,i,s,a,c,d),!0;case"pointerover":var g=d.pointerId;return Er.set(g,Br(Er.get(g)||null,i,s,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,Rr.set(g,Br(Rr.get(g)||null,i,s,a,c,d)),!0}return!1}function ay(i){var s=Rl(i.target);if(s!==null){var a=o(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){i.blockedOn=s,ox(i.priority,function(){if(a.tag===13){var c=Fe();c=nc(c);var d=Xl(a,c);d!==null&&Ie(d,a,c),ah(a,c)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ba(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=ch(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);dc=c,a.target.dispatchEvent(c),dc=null}else return s=Bl(a),s!==null&&sy(s),i.blockedOn=a,!1;s.shift()}return!0}function uy(i,s,a){Ba(i)&&a.delete(s)}function gw(){hh=!1,Nn!==null&&Ba(Nn)&&(Nn=null),Ln!==null&&Ba(Ln)&&(Ln=null),zn!==null&&Ba(zn)&&(zn=null),Er.forEach(uy),Rr.forEach(uy)}function Na(i,s){i.blockedOn===s&&(i.blockedOn=null,hh||(hh=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,gw)))}var La=null;function cy(i){La!==i&&(La=i,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){La===i&&(La=null);for(var s=0;s<i.length;s+=3){var a=i[s],c=i[s+1],d=i[s+2];if(typeof c!="function"){if(fh(c||a)===null)continue;break}var g=Bl(a);g!==null&&(i.splice(s,3),s-=3,ff(g,{pending:!0,data:d,method:a.method,action:c},c,d))}}))}function Nr(i){function s(A){return Na(A,i)}Nn!==null&&Na(Nn,i),Ln!==null&&Na(Ln,i),zn!==null&&Na(zn,i),Er.forEach(s),Rr.forEach(s);for(var a=0;a<Hn.length;a++){var c=Hn[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Hn.length&&(a=Hn[0],a.blockedOn===null);)ay(a),a.blockedOn===null&&Hn.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var d=a[c],g=a[c+1],b=d[Le]||null;if(typeof g=="function")b||cy(a);else if(b){var x=null;if(g&&g.hasAttribute("formAction")){if(d=g,b=g[Le]||null)x=b.formAction;else if(fh(d)!==null)continue}else x=b.action;typeof x=="function"?a[c+1]=x:(a.splice(c,3),c-=3),cy(a)}}}function dh(i){this._internalRoot=i}za.prototype.render=dh.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var a=s.current,c=Fe();ny(a,c,i,s,null,null)},za.prototype.unmount=dh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;ny(i.current,2,null,i,null,null),pa(),s[El]=null}};function za(i){this._internalRoot=i}za.prototype.unstable_scheduleHydration=function(i){if(i){var s=km();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Hn.length&&s!==0&&s<Hn[a].priority;a++);Hn.splice(a,0,i),a===0&&ay(i)}};var fy=t.version;if(fy!=="19.1.0")throw Error(n(527,fy,"19.1.0"));Q.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var pw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ha.isDisabled&&Ha.supportsFiber)try{_s=Ha.inject(pw),Xe=Ha}catch{}}return zr.createRoot=function(i,s){if(!r(i))throw Error(n(299));var a=!1,c="",d=kp,g=Dp,b=Op,x=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(x=s.unstable_transitionCallbacks)),s=ey(i,1,!1,null,null,a,c,d,g,b,x,null),i[El]=s.current,Pf(i),new dh(s)},zr.hydrateRoot=function(i,s,a){if(!r(i))throw Error(n(299));var c=!1,d="",g=kp,b=Dp,x=Op,A=null,E=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(A=a.unstable_transitionCallbacks),a.formState!==void 0&&(E=a.formState)),s=ey(i,1,!0,s,a??null,c,d,g,b,x,A,E),s.context=iy(null),a=s.current,c=Fe(),c=nc(c),d=bn(c),d.callback=null,Sn(a,d,c),a=c,s.current.lanes=a,qs(s,a),Ei(s),i[El]=s.current,Pf(i),new za(s)},zr.version="19.1.0",zr}var xy;function Tw(){if(xy)return ph.exports;xy=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),ph.exports=Cw(),ph.exports}var kw=Tw();let Kh=[],ov=[];(()=>{let l="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=0,e=0;t<l.length;t++)(t%2?ov:Kh).push(e=e+l[t])})();function Dw(l){if(l<768)return!1;for(let t=0,e=Kh.length;;){let n=t+e>>1;if(l<Kh[n])e=n;else if(l>=ov[n])t=n+1;else return!0;if(t==e)return!1}}function wy(l){return l>=127462&&l<=127487}const Ay=8205;function Ow(l,t,e=!0,n=!0){return(e?av:Ew)(l,t,n)}function av(l,t,e){if(t==l.length)return t;t&&uv(l.charCodeAt(t))&&cv(l.charCodeAt(t-1))&&t--;let n=Sh(l,t);for(t+=My(n);t<l.length;){let r=Sh(l,t);if(n==Ay||r==Ay||e&&Dw(r))t+=My(r),n=r;else if(wy(r)){let o=0,u=t-2;for(;u>=0&&wy(Sh(l,u));)o++,u-=2;if(o%2==0)break;t+=2}else break}return t}function Ew(l,t,e){for(;t>0;){let n=av(l,t-2,e);if(n<t)return n;t--}return 0}function Sh(l,t){let e=l.charCodeAt(t);if(!cv(e)||t+1==l.length)return e;let n=l.charCodeAt(t+1);return uv(n)?(e-55296<<10)+(n-56320)+65536:e}function uv(l){return l>=56320&&l<57344}function cv(l){return l>=55296&&l<56320}function My(l){return l<65536?1:2}class Ot{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){[t,e]=ks(this,t,e);let r=[];return this.decompose(0,t,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(e,this.length,r,1),zi.from(r,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=ks(this,t,e);let n=[];return this.decompose(t,e,n,0),zi.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),r=new Zr(this),o=new Zr(t);for(let u=e,f=e;;){if(r.next(u),o.next(u),u=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(f+=r.value.length,r.done||f>=n)return!0}}iter(t=1){return new Zr(this,t)}iterRange(t,e=this.length){return new fv(this,t,e)}iterLines(t,e){let n;if(t==null)n=this.iter();else{e==null&&(e=this.lines+1);let r=this.line(t).from;n=this.iterRange(r,Math.max(r,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new hv(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?Ot.empty:t.length<=32?new $t(t):zi.from($t.split(t,[]))}}class $t extends Ot{constructor(t,e=Rw(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,r){for(let o=0;;o++){let u=this.text[o],f=r+u.length;if((e?n:f)>=t)return new Bw(r,f,n,u);r=f+1,n++}}decompose(t,e,n,r){let o=t<=0&&e>=this.length?this:new $t(Cy(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(r&1){let u=n.pop(),f=ru(o.text,u.text.slice(),0,o.length);if(f.length<=32)n.push(new $t(f,u.length+o.length));else{let h=f.length>>1;n.push(new $t(f.slice(0,h)),new $t(f.slice(h)))}}else n.push(o)}replace(t,e,n){if(!(n instanceof $t))return super.replace(t,e,n);[t,e]=ks(this,t,e);let r=ru(this.text,ru(n.text,Cy(this.text,0,t)),e),o=this.length+n.length-(e-t);return r.length<=32?new $t(r,o):zi.from($t.split(r,[]),o)}sliceString(t,e=this.length,n=`
`){[t,e]=ks(this,t,e);let r="";for(let o=0,u=0;o<=e&&u<this.text.length;u++){let f=this.text[u],h=o+f.length;o>t&&u&&(r+=n),t<h&&e>o&&(r+=f.slice(Math.max(0,t-o),e-o)),o=h+1}return r}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],r=-1;for(let o of t)n.push(o),r+=o.length+1,n.length==32&&(e.push(new $t(n,r)),n=[],r=-1);return r>-1&&e.push(new $t(n,r)),e}}class zi extends Ot{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let n of t)this.lines+=n.lines}lineInner(t,e,n,r){for(let o=0;;o++){let u=this.children[o],f=r+u.length,h=n+u.lines-1;if((e?h:f)>=t)return u.lineInner(t,e,n,r);r=f+1,n=h+1}}decompose(t,e,n,r){for(let o=0,u=0;u<=e&&o<this.children.length;o++){let f=this.children[o],h=u+f.length;if(t<=h&&e>=u){let m=r&((u<=t?1:0)|(h>=e?2:0));u>=t&&h<=e&&!m?n.push(f):f.decompose(t-u,e-u,n,m)}u=h+1}}replace(t,e,n){if([t,e]=ks(this,t,e),n.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let u=this.children[r],f=o+u.length;if(t>=o&&e<=f){let h=u.replace(t-o,e-o,n),m=this.lines-u.lines+h.lines;if(h.lines<m>>4&&h.lines>m>>6){let p=this.children.slice();return p[r]=h,new zi(p,this.length-(e-t)+n.length)}return super.replace(o,f,h)}o=f+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n=`
`){[t,e]=ks(this,t,e);let r="";for(let o=0,u=0;o<this.children.length&&u<=e;o++){let f=this.children[o],h=u+f.length;u>t&&o&&(r+=n),t<h&&e>u&&(r+=f.sliceString(t-u,e-u,n)),u=h+1}return r}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof zi))return 0;let n=0,[r,o,u,f]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;r+=e,o+=e){if(r==u||o==f)return n;let h=this.children[r],m=t.children[o];if(h!=m)return n+h.scanIdentical(m,e);n+=h.length+1}}static from(t,e=t.reduce((n,r)=>n+r.length+1,-1)){let n=0;for(let S of t)n+=S.lines;if(n<32){let S=[];for(let w of t)w.flatten(S);return new $t(S,e)}let r=Math.max(32,n>>5),o=r<<1,u=r>>1,f=[],h=0,m=-1,p=[];function y(S){let w;if(S.lines>o&&S instanceof zi)for(let M of S.children)y(M);else S.lines>u&&(h>u||!h)?(v(),f.push(S)):S instanceof $t&&h&&(w=p[p.length-1])instanceof $t&&S.lines+w.lines<=32?(h+=S.lines,m+=S.length+1,p[p.length-1]=new $t(w.text.concat(S.text),w.length+1+S.length)):(h+S.lines>r&&v(),h+=S.lines,m+=S.length+1,p.push(S))}function v(){h!=0&&(f.push(p.length==1?p[0]:zi.from(p,m)),m=-1,h=p.length=0)}for(let S of t)y(S);return v(),f.length==1?f[0]:new zi(f,e)}}Ot.empty=new $t([""],0);function Rw(l){let t=-1;for(let e of l)t+=e.length+1;return t}function ru(l,t,e=0,n=1e9){for(let r=0,o=0,u=!0;o<l.length&&r<=n;o++){let f=l[o],h=r+f.length;h>=e&&(h>n&&(f=f.slice(0,n-r)),r<e&&(f=f.slice(e-r)),u?(t[t.length-1]+=f,u=!1):t.push(f)),r=h+1}return t}function Cy(l,t,e){return ru(l,[""],t,e)}class Zr{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof $t?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],o=this.offsets[n],u=o>>1,f=r instanceof $t?r.text.length:r.children.length;if(u==(e>0?f:0)){if(n==0)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(e>0?0:1)){if(this.offsets[n]+=e,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(r instanceof $t){let h=r.text[u+(e<0?-1:0)];if(this.offsets[n]+=e,h.length>Math.max(0,t))return this.value=t==0?h:e>0?h.slice(t):h.slice(0,h.length-t),this;t-=h.length}else{let h=r.children[u+(e<0?-1:0)];t>h.length?(t-=h.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(h),this.offsets.push(e>0?1:(h instanceof $t?h.text.length:h.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class fv{constructor(t,e,n){this.value="",this.done=!1,this.cursor=new Zr(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:r}=this.cursor.next(t);return this.pos+=(r.length+t)*e,this.value=r.length<=n?r:e<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class hv{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:n,value:r}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ot.prototype[Symbol.iterator]=function(){return this.iter()},Zr.prototype[Symbol.iterator]=fv.prototype[Symbol.iterator]=hv.prototype[Symbol.iterator]=function(){return this});class Bw{constructor(t,e,n,r){this.from=t,this.to=e,this.number=n,this.text=r}get length(){return this.to-this.from}}function ks(l,t,e){return t=Math.max(0,Math.min(l.length,t)),[t,Math.max(t,Math.min(l.length,e))]}function be(l,t,e=!0,n=!0){return Ow(l,t,e,n)}function Nw(l){return l>=56320&&l<57344}function Lw(l){return l>=55296&&l<56320}function qe(l,t){let e=l.charCodeAt(t);if(!Lw(e)||t+1==l.length)return e;let n=l.charCodeAt(t+1);return Nw(n)?(e-55296<<10)+(n-56320)+65536:e}function Vd(l){return l<=65535?String.fromCharCode(l):(l-=65536,String.fromCharCode((l>>10)+55296,(l&1023)+56320))}function Hi(l){return l<65536?1:2}const Qh=/\r\n?|\n/;var Re=function(l){return l[l.Simple=0]="Simple",l[l.TrackDel=1]="TrackDel",l[l.TrackBefore=2]="TrackBefore",l[l.TrackAfter=3]="TrackAfter",l}(Re||(Re={}));class Yi{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,r=0;e<this.sections.length;){let o=this.sections[e++],u=this.sections[e++];u<0?(t(n,r,o),r+=o):r+=u,n+=o}}iterChangedRanges(t,e=!1){Zh(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],r=this.sections[e++];r<0?t.push(n,r):t.push(r,n)}return new Yi(t)}composeDesc(t){return this.empty?t:t.empty?this:dv(this,t)}mapDesc(t,e=!1){return t.empty?this:Wh(this,t,e)}mapPos(t,e=-1,n=Re.Simple){let r=0,o=0;for(let u=0;u<this.sections.length;){let f=this.sections[u++],h=this.sections[u++],m=r+f;if(h<0){if(m>t)return o+(t-r);o+=f}else{if(n!=Re.Simple&&m>=t&&(n==Re.TrackDel&&r<t&&m>t||n==Re.TrackBefore&&r<t||n==Re.TrackAfter&&m>t))return null;if(m>t||m==t&&e<0&&!f)return t==r||e<0?o:o+h;o+=h}r=m}if(t>r)throw new RangeError(`Position ${t} is out of range for changeset of length ${r}`);return o}touchesRange(t,e=t){for(let n=0,r=0;n<this.sections.length&&r<=e;){let o=this.sections[n++],u=this.sections[n++],f=r+o;if(u>=0&&r<=e&&f>=t)return r<t&&f>e?"cover":!0;r=f}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],r=this.sections[e++];t+=(t?" ":"")+n+(r>=0?":"+r:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Yi(t)}static create(t){return new Yi(t)}}class re extends Yi{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Zh(this,(e,n,r,o,u)=>t=t.replace(r,r+(n-e),u),!1),t}mapDesc(t,e=!1){return Wh(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let r=0,o=0;r<e.length;r+=2){let u=e[r],f=e[r+1];if(f>=0){e[r]=f,e[r+1]=u;let h=r>>1;for(;n.length<h;)n.push(Ot.empty);n.push(u?t.slice(o,o+u):Ot.empty)}o+=u}return new re(e,n)}compose(t){return this.empty?t:t.empty?this:dv(this,t,!0)}map(t,e=!1){return t.empty?this:Wh(this,t,e,!0)}iterChanges(t,e=!1){Zh(this,t,e)}get desc(){return Yi.create(this.sections)}filter(t){let e=[],n=[],r=[],o=new $r(this);t:for(let u=0,f=0;;){let h=u==t.length?1e9:t[u++];for(;f<h||f==h&&o.len==0;){if(o.done)break t;let p=Math.min(o.len,h-f);Ce(r,p,-1);let y=o.ins==-1?-1:o.off==0?o.ins:0;Ce(e,p,y),y>0&&Yn(n,e,o.text),o.forward(p),f+=p}let m=t[u++];for(;f<m;){if(o.done)break t;let p=Math.min(o.len,m-f);Ce(e,p,-1),Ce(r,p,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(p),f+=p}}return{changes:new re(e,n),filtered:Yi.create(r)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],r=this.sections[e+1];r<0?t.push(n):r==0?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let r=[],o=[],u=0,f=null;function h(p=!1){if(!p&&!r.length)return;u<e&&Ce(r,e-u,-1);let y=new re(r,o);f=f?f.compose(y.map(f)):y,r=[],o=[],u=0}function m(p){if(Array.isArray(p))for(let y of p)m(y);else if(p instanceof re){if(p.length!=e)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${e})`);h(),f=f?f.compose(p.map(f)):p}else{let{from:y,to:v=y,insert:S}=p;if(y>v||y<0||v>e)throw new RangeError(`Invalid change range ${y} to ${v} (in doc of length ${e})`);let w=S?typeof S=="string"?Ot.of(S.split(n||Qh)):S:Ot.empty,M=w.length;if(y==v&&M==0)return;y<u&&h(),y>u&&Ce(r,y-u,-1),Ce(r,v-y,M),Yn(o,r,w),u=v}}return m(t),h(!f),f}static empty(t){return new re(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let r=0;r<t.length;r++){let o=t[r];if(typeof o=="number")e.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((u,f)=>f&&typeof u!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)e.push(o[0],0);else{for(;n.length<r;)n.push(Ot.empty);n[r]=Ot.of(o.slice(1)),e.push(o[0],n[r].length)}}}return new re(e,n)}static createSet(t,e){return new re(t,e)}}function Ce(l,t,e,n=!1){if(t==0&&e<=0)return;let r=l.length-2;r>=0&&e<=0&&e==l[r+1]?l[r]+=t:r>=0&&t==0&&l[r]==0?l[r+1]+=e:n?(l[r]+=t,l[r+1]+=e):l.push(t,e)}function Yn(l,t,e){if(e.length==0)return;let n=t.length-2>>1;if(n<l.length)l[l.length-1]=l[l.length-1].append(e);else{for(;l.length<n;)l.push(Ot.empty);l.push(e)}}function Zh(l,t,e){let n=l.inserted;for(let r=0,o=0,u=0;u<l.sections.length;){let f=l.sections[u++],h=l.sections[u++];if(h<0)r+=f,o+=f;else{let m=r,p=o,y=Ot.empty;for(;m+=f,p+=h,h&&n&&(y=y.append(n[u-2>>1])),!(e||u==l.sections.length||l.sections[u+1]<0);)f=l.sections[u++],h=l.sections[u++];t(r,m,o,p,y),r=m,o=p}}}function Wh(l,t,e,n=!1){let r=[],o=n?[]:null,u=new $r(l),f=new $r(t);for(let h=-1;;){if(u.done&&f.len||f.done&&u.len)throw new Error("Mismatched change set lengths");if(u.ins==-1&&f.ins==-1){let m=Math.min(u.len,f.len);Ce(r,m,-1),u.forward(m),f.forward(m)}else if(f.ins>=0&&(u.ins<0||h==u.i||u.off==0&&(f.len<u.len||f.len==u.len&&!e))){let m=f.len;for(Ce(r,f.ins,-1);m;){let p=Math.min(u.len,m);u.ins>=0&&h<u.i&&u.len<=p&&(Ce(r,0,u.ins),o&&Yn(o,r,u.text),h=u.i),u.forward(p),m-=p}f.next()}else if(u.ins>=0){let m=0,p=u.len;for(;p;)if(f.ins==-1){let y=Math.min(p,f.len);m+=y,p-=y,f.forward(y)}else if(f.ins==0&&f.len<p)p-=f.len,f.next();else break;Ce(r,m,h<u.i?u.ins:0),o&&h<u.i&&Yn(o,r,u.text),h=u.i,u.forward(u.len-p)}else{if(u.done&&f.done)return o?re.createSet(r,o):Yi.create(r);throw new Error("Mismatched change set lengths")}}}function dv(l,t,e=!1){let n=[],r=e?[]:null,o=new $r(l),u=new $r(t);for(let f=!1;;){if(o.done&&u.done)return r?re.createSet(n,r):Yi.create(n);if(o.ins==0)Ce(n,o.len,0,f),o.next();else if(u.len==0&&!u.done)Ce(n,0,u.ins,f),r&&Yn(r,n,u.text),u.next();else{if(o.done||u.done)throw new Error("Mismatched change set lengths");{let h=Math.min(o.len2,u.len),m=n.length;if(o.ins==-1){let p=u.ins==-1?-1:u.off?0:u.ins;Ce(n,h,p,f),r&&p&&Yn(r,n,u.text)}else u.ins==-1?(Ce(n,o.off?0:o.len,h,f),r&&Yn(r,n,o.textBit(h))):(Ce(n,o.off?0:o.len,u.off?0:u.ins,f),r&&!u.off&&Yn(r,n,u.text));f=(o.ins>h||u.ins>=0&&u.len>h)&&(f||n.length>m),o.forward2(h),u.forward(h)}}}}class $r{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?Ot.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?Ot.empty:e[n].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class Sl{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,e=-1){let n,r;return this.empty?n=r=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new Sl(n,r,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return V.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return V.range(this.anchor,n)}eq(t,e=!1){return this.anchor==t.anchor&&this.head==t.head&&(!e||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return V.range(t.anchor,t.head)}static create(t,e,n){return new Sl(t,e,n)}}class V{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:V.create(this.ranges.map(n=>n.map(t,e)),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(t.ranges[n],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new V([this.main],0)}addRange(t,e=!0){return V.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,V.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new V(t.ranges.map(e=>Sl.fromJSON(e)),t.main)}static single(t,e=t){return new V([V.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<t.length;r++){let o=t[r];if(o.empty?o.from<=n:o.from<n)return V.normalized(t.slice(),e);n=o.to}return new V(t,e)}static cursor(t,e=0,n,r){return Sl.create(t,t,(e==0?0:e<0?8:16)|(n==null?7:Math.min(6,n))|(r??16777215)<<6)}static range(t,e,n,r){let o=(n??16777215)<<6|(r==null?7:Math.min(6,r));return e<t?Sl.create(e,t,48|o):Sl.create(t,e,(e>t?8:0)|o)}static normalized(t,e=0){let n=t[e];t.sort((r,o)=>r.from-o.from),e=t.indexOf(n);for(let r=1;r<t.length;r++){let o=t[r],u=t[r-1];if(o.empty?o.from<=u.to:o.from<u.to){let f=u.from,h=Math.max(o.to,u.to);r<=e&&e--,t.splice(--r,2,o.anchor>o.head?V.range(h,f):V.range(f,h))}}return new V(t,e)}}function mv(l,t){for(let e of l.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}let Yd=0;class ${constructor(t,e,n,r,o){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=r,this.id=Yd++,this.default=t([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(t={}){return new $(t.combine||(e=>e),t.compareInput||((e,n)=>e===n),t.compare||(t.combine?(e,n)=>e===n:jd),!!t.static,t.enables)}of(t){return new ou([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new ou(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new ou(t,this,2,e)}from(t,e){return e||(e=n=>n),this.compute([t],n=>e(n.field(t)))}}function jd(l,t){return l==t||l.length==t.length&&l.every((e,n)=>e===t[n])}class ou{constructor(t,e,n,r){this.dependencies=t,this.facet=e,this.type=n,this.value=r,this.id=Yd++}dynamicSlot(t){var e;let n=this.value,r=this.facet.compareInput,o=this.id,u=t[o]>>1,f=this.type==2,h=!1,m=!1,p=[];for(let y of this.dependencies)y=="doc"?h=!0:y=="selection"?m=!0:(((e=t[y.id])!==null&&e!==void 0?e:1)&1)==0&&p.push(t[y.id]);return{create(y){return y.values[u]=n(y),1},update(y,v){if(h&&v.docChanged||m&&(v.docChanged||v.selection)||Ph(y,p)){let S=n(y);if(f?!Ty(S,y.values[u],r):!r(S,y.values[u]))return y.values[u]=S,1}return 0},reconfigure:(y,v)=>{let S,w=v.config.address[o];if(w!=null){let M=yu(v,w);if(this.dependencies.every(k=>k instanceof $?v.facet(k)===y.facet(k):k instanceof Se?v.field(k,!1)==y.field(k,!1):!0)||(f?Ty(S=n(y),M,r):r(S=n(y),M)))return y.values[u]=M,0}else S=n(y);return y.values[u]=S,1}}}}function Ty(l,t,e){if(l.length!=t.length)return!1;for(let n=0;n<l.length;n++)if(!e(l[n],t[n]))return!1;return!0}function Ph(l,t){let e=!1;for(let n of t)Wr(l,n)&1&&(e=!0);return e}function zw(l,t,e){let n=e.map(h=>l[h.id]),r=e.map(h=>h.type),o=n.filter(h=>!(h&1)),u=l[t.id]>>1;function f(h){let m=[];for(let p=0;p<n.length;p++){let y=yu(h,n[p]);if(r[p]==2)for(let v of y)m.push(v);else m.push(y)}return t.combine(m)}return{create(h){for(let m of n)Wr(h,m);return h.values[u]=f(h),1},update(h,m){if(!Ph(h,o))return 0;let p=f(h);return t.compare(p,h.values[u])?0:(h.values[u]=p,1)},reconfigure(h,m){let p=Ph(h,n),y=m.config.facets[t.id],v=m.facet(t);if(y&&!p&&jd(e,y))return h.values[u]=v,0;let S=f(h);return t.compare(S,v)?(h.values[u]=v,0):(h.values[u]=S,1)}}}const _a=$.define({static:!0});class Se{constructor(t,e,n,r,o){this.id=t,this.createF=e,this.updateF=n,this.compareF=r,this.spec=o,this.provides=void 0}static define(t){let e=new Se(Yd++,t.create,t.update,t.compare||((n,r)=>n===r),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(_a).find(n=>n.field==this);return(e?.create||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:n=>(n.values[e]=this.create(n),1),update:(n,r)=>{let o=n.values[e],u=this.updateF(o,r);return this.compareF(o,u)?0:(n.values[e]=u,1)},reconfigure:(n,r)=>{let o=n.facet(_a),u=r.facet(_a),f;return(f=o.find(h=>h.field==this))&&f!=u.find(h=>h.field==this)?(n.values[e]=f.create(n),1):r.config.address[this.id]!=null?(n.values[e]=r.field(this),0):(n.values[e]=this.create(n),1)}}}init(t){return[this,_a.of({field:this,create:t})]}get extension(){return this}}const vl={lowest:4,low:3,default:2,high:1,highest:0};function Hr(l){return t=>new gv(t,l)}const Ol={highest:Hr(vl.highest),high:Hr(vl.high),default:Hr(vl.default),low:Hr(vl.low),lowest:Hr(vl.lowest)};class gv{constructor(t,e){this.inner=t,this.prec=e}}class qu{of(t){return new Jh(this,t)}reconfigure(t){return qu.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class Jh{constructor(t,e){this.compartment=t,this.inner=e}}class pu{constructor(t,e,n,r,o,u){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=r,this.staticValues=o,this.facets=u,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let r=[],o=Object.create(null),u=new Map;for(let v of Hw(t,e,u))v instanceof Se?r.push(v):(o[v.facet.id]||(o[v.facet.id]=[])).push(v);let f=Object.create(null),h=[],m=[];for(let v of r)f[v.id]=m.length<<1,m.push(S=>v.slot(S));let p=n?.config.facets;for(let v in o){let S=o[v],w=S[0].facet,M=p&&p[v]||[];if(S.every(k=>k.type==0))if(f[w.id]=h.length<<1|1,jd(M,S))h.push(n.facet(w));else{let k=w.combine(S.map(R=>R.value));h.push(n&&w.compare(k,n.facet(w))?n.facet(w):k)}else{for(let k of S)k.type==0?(f[k.id]=h.length<<1|1,h.push(k.value)):(f[k.id]=m.length<<1,m.push(R=>k.dynamicSlot(R)));f[w.id]=m.length<<1,m.push(k=>zw(k,w,S))}}let y=m.map(v=>v(f));return new pu(t,u,y,f,h,o)}}function Hw(l,t,e){let n=[[],[],[],[],[]],r=new Map;function o(u,f){let h=r.get(u);if(h!=null){if(h<=f)return;let m=n[h].indexOf(u);m>-1&&n[h].splice(m,1),u instanceof Jh&&e.delete(u.compartment)}if(r.set(u,f),Array.isArray(u))for(let m of u)o(m,f);else if(u instanceof Jh){if(e.has(u.compartment))throw new RangeError("Duplicate use of compartment in extensions");let m=t.get(u.compartment)||u.inner;e.set(u.compartment,m),o(m,f)}else if(u instanceof gv)o(u.inner,u.prec);else if(u instanceof Se)n[f].push(u),u.provides&&o(u.provides,f);else if(u instanceof ou)n[f].push(u),u.facet.extensions&&o(u.facet.extensions,vl.default);else{let m=u.extension;if(!m)throw new Error(`Unrecognized extension value in extension set (${u}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(m,f)}}return o(l,vl.default),n.reduce((u,f)=>u.concat(f))}function Wr(l,t){if(t&1)return 2;let e=t>>1,n=l.status[e];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;l.status[e]=4;let r=l.computeSlot(l,l.config.dynamicSlots[e]);return l.status[e]=2|r}function yu(l,t){return t&1?l.config.staticValues[t>>1]:l.values[t>>1]}const pv=$.define(),Fh=$.define({combine:l=>l.some(t=>t),static:!0}),yv=$.define({combine:l=>l.length?l[0]:void 0,static:!0}),vv=$.define(),bv=$.define(),Sv=$.define(),xv=$.define({combine:l=>l.length?l[0]:!1});class hn{constructor(t,e){this.type=t,this.value=e}static define(){return new _w}}class _w{of(t){return new hn(this,t)}}class Uw{constructor(t){this.map=t}of(t){return new pt(this,t)}}class pt{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return e===void 0?void 0:e==this.value?this:new pt(this.type,e)}is(t){return this.type==t}static define(t={}){return new Uw(t.map||(e=>e))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let r of t){let o=r.map(e);o&&n.push(o)}return n}}pt.reconfigure=pt.define();pt.appendConfig=pt.define();class oe{constructor(t,e,n,r,o,u){this.startState=t,this.changes=e,this.selection=n,this.effects=r,this.annotations=o,this.scrollIntoView=u,this._doc=null,this._state=null,n&&mv(n,e.newLength),o.some(f=>f.type==oe.time)||(this.annotations=o.concat(oe.time.of(Date.now())))}static create(t,e,n,r,o,u){return new oe(t,e,n,r,o,u)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(oe.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&e[t.length]=="."))}}oe.time=hn.define();oe.userEvent=hn.define();oe.addToHistory=hn.define();oe.remote=hn.define();function qw(l,t){let e=[];for(let n=0,r=0;;){let o,u;if(n<l.length&&(r==t.length||t[r]>=l[n]))o=l[n++],u=l[n++];else if(r<t.length)o=t[r++],u=t[r++];else return e;!e.length||e[e.length-1]<o?e.push(o,u):e[e.length-1]<u&&(e[e.length-1]=u)}}function wv(l,t,e){var n;let r,o,u;return e?(r=t.changes,o=re.empty(t.changes.length),u=l.changes.compose(t.changes)):(r=t.changes.map(l.changes),o=l.changes.mapDesc(t.changes,!0),u=l.changes.compose(r)),{changes:u,selection:t.selection?t.selection.map(o):(n=l.selection)===null||n===void 0?void 0:n.map(r),effects:pt.mapEffects(l.effects,r).concat(pt.mapEffects(t.effects,o)),annotations:l.annotations.length?l.annotations.concat(t.annotations):t.annotations,scrollIntoView:l.scrollIntoView||t.scrollIntoView}}function Ih(l,t,e){let n=t.selection,r=ws(t.annotations);return t.userEvent&&(r=r.concat(oe.userEvent.of(t.userEvent))),{changes:t.changes instanceof re?t.changes:re.of(t.changes||[],e,l.facet(yv)),selection:n&&(n instanceof V?n:V.single(n.anchor,n.head)),effects:ws(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function Av(l,t,e){let n=Ih(l,t.length?t[0]:{},l.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let o=1;o<t.length;o++){t[o].filter===!1&&(e=!1);let u=!!t[o].sequential;n=wv(n,Ih(l,t[o],u?n.changes.newLength:l.doc.length),u)}let r=oe.create(l,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return Yw(e?Vw(r):r)}function Vw(l){let t=l.startState,e=!0;for(let r of t.facet(vv)){let o=r(l);if(o===!1){e=!1;break}Array.isArray(o)&&(e=e===!0?o:qw(e,o))}if(e!==!0){let r,o;if(e===!1)o=l.changes.invertedDesc,r=re.empty(t.doc.length);else{let u=l.changes.filter(e);r=u.changes,o=u.filtered.mapDesc(u.changes).invertedDesc}l=oe.create(t,r,l.selection&&l.selection.map(o),pt.mapEffects(l.effects,o),l.annotations,l.scrollIntoView)}let n=t.facet(bv);for(let r=n.length-1;r>=0;r--){let o=n[r](l);o instanceof oe?l=o:Array.isArray(o)&&o.length==1&&o[0]instanceof oe?l=o[0]:l=Av(t,ws(o),!1)}return l}function Yw(l){let t=l.startState,e=t.facet(Sv),n=l;for(let r=e.length-1;r>=0;r--){let o=e[r](l);o&&Object.keys(o).length&&(n=wv(n,Ih(t,o,l.changes.newLength),!0))}return n==l?l:oe.create(t,l.changes,l.selection,n.effects,n.annotations,n.scrollIntoView)}const jw=[];function ws(l){return l==null?jw:Array.isArray(l)?l:[l]}var Zt=function(l){return l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other",l}(Zt||(Zt={}));const Gw=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let $h;try{$h=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Xw(l){if($h)return $h.test(l);for(let t=0;t<l.length;t++){let e=l[t];if(/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Gw.test(e)))return!0}return!1}function Kw(l){return t=>{if(!/\S/.test(t))return Zt.Space;if(Xw(t))return Zt.Word;for(let e=0;e<l.length;e++)if(t.indexOf(l[e])>-1)return Zt.Word;return Zt.Other}}class kt{constructor(t,e,n,r,o,u){this.config=t,this.doc=e,this.selection=n,this.values=r,this.status=t.statusTemplate.slice(),this.computeSlot=o,u&&(u._state=this);for(let f=0;f<this.config.dynamicSlots.length;f++)Wr(this,f<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(n==null){if(e)throw new RangeError("Field is not present in this state");return}return Wr(this,n),yu(this,n)}update(...t){return Av(this,t,!0)}applyTransaction(t){let e=this.config,{base:n,compartments:r}=e;for(let f of t.effects)f.is(qu.reconfigure)?(e&&(r=new Map,e.compartments.forEach((h,m)=>r.set(m,h)),e=null),r.set(f.value.compartment,f.value.extension)):f.is(pt.reconfigure)?(e=null,n=f.value):f.is(pt.appendConfig)&&(e=null,n=ws(n).concat(f.value));let o;e?o=t.startState.values.slice():(e=pu.resolve(n,r,this),o=new kt(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(h,m)=>m.reconfigure(h,this),null).values);let u=t.startState.facet(Fh)?t.newSelection:t.newSelection.asSingle();new kt(e,t.newDoc,u,o,(f,h)=>h.update(f,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:V.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),r=this.changes(n.changes),o=[n.range],u=ws(n.effects);for(let f=1;f<e.ranges.length;f++){let h=t(e.ranges[f]),m=this.changes(h.changes),p=m.map(r);for(let v=0;v<f;v++)o[v]=o[v].map(p);let y=r.mapDesc(m,!0);o.push(h.range.map(y)),r=r.compose(p),u=pt.mapEffects(u,p).concat(pt.mapEffects(ws(h.effects),y))}return{changes:r,selection:V.create(o,e.mainIndex),effects:u}}changes(t=[]){return t instanceof re?t:re.of(t,this.doc.length,this.facet(kt.lineSeparator))}toText(t){return Ot.of(t.split(this.facet(kt.lineSeparator)||Qh))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return e==null?t.default:(Wr(this,e),yu(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let r=t[n];r instanceof Se&&this.config.address[r.id]!=null&&(e[n]=r.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n){for(let o in n)if(Object.prototype.hasOwnProperty.call(t,o)){let u=n[o],f=t[o];r.push(u.init(h=>u.spec.fromJSON(f,h)))}}return kt.create({doc:t.doc,selection:V.fromJSON(t.selection),extensions:e.extensions?r.concat([e.extensions]):r})}static create(t={}){let e=pu.resolve(t.extensions||[],new Map),n=t.doc instanceof Ot?t.doc:Ot.of((t.doc||"").split(e.staticFacet(kt.lineSeparator)||Qh)),r=t.selection?t.selection instanceof V?t.selection:V.single(t.selection.anchor,t.selection.head):V.single(0);return mv(r,n.length),e.staticFacet(Fh)||(r=r.asSingle()),new kt(e,n,r,e.dynamicSlots.map(()=>null),(o,u)=>u.create(o),null)}get tabSize(){return this.facet(kt.tabSize)}get lineBreak(){return this.facet(kt.lineSeparator)||`
`}get readOnly(){return this.facet(xv)}phrase(t,...e){for(let n of this.facet(kt.phrases))if(Object.prototype.hasOwnProperty.call(n,t)){t=n[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(n,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>e.length?n:e[o-1]})),t}languageDataAt(t,e,n=-1){let r=[];for(let o of this.facet(pv))for(let u of o(this,e,n))Object.prototype.hasOwnProperty.call(u,t)&&r.push(u[t]);return r}charCategorizer(t){return Kw(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:n,length:r}=this.doc.lineAt(t),o=this.charCategorizer(t),u=t-n,f=t-n;for(;u>0;){let h=be(e,u,!1);if(o(e.slice(h,u))!=Zt.Word)break;u=h}for(;f<r;){let h=be(e,f);if(o(e.slice(f,h))!=Zt.Word)break;f=h}return u==f?null:V.range(u+n,f+n)}}kt.allowMultipleSelections=Fh;kt.tabSize=$.define({combine:l=>l.length?l[0]:4});kt.lineSeparator=yv;kt.readOnly=xv;kt.phrases=$.define({compare(l,t){let e=Object.keys(l),n=Object.keys(t);return e.length==n.length&&e.every(r=>l[r]==t[r])}});kt.languageData=pv;kt.changeFilter=vv;kt.transactionFilter=bv;kt.transactionExtender=Sv;qu.reconfigure=pt.define();function Gi(l,t,e={}){let n={};for(let r of l)for(let o of Object.keys(r)){let u=r[o],f=n[o];if(f===void 0)n[o]=u;else if(!(f===u||u===void 0))if(Object.hasOwnProperty.call(e,o))n[o]=e[o](f,u);else throw new Error("Config merge conflict for field "+o)}for(let r in t)n[r]===void 0&&(n[r]=t[r]);return n}class Ml{eq(t){return this==t}range(t,e=t){return td.create(t,e,this)}}Ml.prototype.startSide=Ml.prototype.endSide=0;Ml.prototype.point=!1;Ml.prototype.mapMode=Re.TrackDel;let td=class Mv{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new Mv(t,e,n)}};function ed(l,t){return l.from-t.from||l.value.startSide-t.value.startSide}class Gd{constructor(t,e,n,r){this.from=t,this.to=e,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,r=0){let o=n?this.to:this.from;for(let u=r,f=o.length;;){if(u==f)return u;let h=u+f>>1,m=o[h]-t||(n?this.value[h].endSide:this.value[h].startSide)-e;if(h==u)return m>=0?u:f;m>=0?f=h:u=h+1}}between(t,e,n,r){for(let o=this.findIndex(e,-1e9,!0),u=this.findIndex(n,1e9,!1,o);o<u;o++)if(r(this.from[o]+t,this.to[o]+t,this.value[o])===!1)return!1}map(t,e){let n=[],r=[],o=[],u=-1,f=-1;for(let h=0;h<this.value.length;h++){let m=this.value[h],p=this.from[h]+t,y=this.to[h]+t,v,S;if(p==y){let w=e.mapPos(p,m.startSide,m.mapMode);if(w==null||(v=S=w,m.startSide!=m.endSide&&(S=e.mapPos(p,m.endSide),S<v)))continue}else if(v=e.mapPos(p,m.startSide),S=e.mapPos(y,m.endSide),v>S||v==S&&m.startSide>0&&m.endSide<=0)continue;(S-v||m.endSide-m.startSide)<0||(u<0&&(u=v),m.point&&(f=Math.max(f,S-v)),n.push(m),r.push(v-u),o.push(S-u))}return{mapped:n.length?new Gd(r,o,n,f):null,pos:u}}}class Dt{constructor(t,e,n,r){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=r}static create(t,e,n,r){return new Dt(t,e,n,r)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:r=0,filterTo:o=this.length}=t,u=t.filter;if(e.length==0&&!u)return this;if(n&&(e=e.slice().sort(ed)),this.isEmpty)return e.length?Dt.of(e):this;let f=new Cv(this,null,-1).goto(0),h=0,m=[],p=new un;for(;f.value||h<e.length;)if(h<e.length&&(f.from-e[h].from||f.startSide-e[h].value.startSide)>=0){let y=e[h++];p.addInner(y.from,y.to,y.value)||m.push(y)}else f.rangeIndex==1&&f.chunkIndex<this.chunk.length&&(h==e.length||this.chunkEnd(f.chunkIndex)<e[h].from)&&(!u||r>this.chunkEnd(f.chunkIndex)||o<this.chunkPos[f.chunkIndex])&&p.addChunk(this.chunkPos[f.chunkIndex],this.chunk[f.chunkIndex])?f.nextChunk():((!u||r>f.to||o<f.from||u(f.from,f.to,f.value))&&(p.addInner(f.from,f.to,f.value)||m.push(td.create(f.from,f.to,f.value))),f.next());return p.finishInner(this.nextLayer.isEmpty&&!m.length?Dt.empty:this.nextLayer.update({add:m,filter:u,filterFrom:r,filterTo:o}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],r=-1;for(let u=0;u<this.chunk.length;u++){let f=this.chunkPos[u],h=this.chunk[u],m=t.touchesRange(f,f+h.length);if(m===!1)r=Math.max(r,h.maxPoint),e.push(h),n.push(t.mapPos(f));else if(m===!0){let{mapped:p,pos:y}=h.map(f,t);p&&(r=Math.max(r,p.maxPoint),e.push(p),n.push(y))}}let o=this.nextLayer.map(t);return e.length==0?o:new Dt(n,e,o||Dt.empty,r)}between(t,e,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],u=this.chunk[r];if(e>=o&&t<=o+u.length&&u.between(o,t-o,e-o,n)===!1)return}this.nextLayer.between(t,e,n)}}iter(t=0){return to.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return to.from(t).goto(e)}static compare(t,e,n,r,o=-1){let u=t.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=o),f=e.filter(y=>y.maxPoint>0||!y.isEmpty&&y.maxPoint>=o),h=ky(u,f,n),m=new _r(u,h,o),p=new _r(f,h,o);n.iterGaps((y,v,S)=>Dy(m,y,p,v,S,r)),n.empty&&n.length==0&&Dy(m,0,p,0,0,r)}static eq(t,e,n=0,r){r==null&&(r=999999999);let o=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0),u=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0);if(o.length!=u.length)return!1;if(!o.length)return!0;let f=ky(o,u),h=new _r(o,f,0).goto(n),m=new _r(u,f,0).goto(n);for(;;){if(h.to!=m.to||!id(h.active,m.active)||h.point&&(!m.point||!h.point.eq(m.point)))return!1;if(h.to>r)return!0;h.next(),m.next()}}static spans(t,e,n,r,o=-1){let u=new _r(t,null,o).goto(e),f=e,h=u.openStart;for(;;){let m=Math.min(u.to,n);if(u.point){let p=u.activeForPoint(u.to),y=u.pointFrom<e?p.length+1:u.point.startSide<0?p.length:Math.min(p.length,h);r.point(f,m,u.point,p,y,u.pointRank),h=Math.min(u.openEnd(m),p.length)}else m>f&&(r.span(f,m,u.active,h),h=u.openEnd(m));if(u.to>n)return h+(u.point&&u.to>n?1:0);f=u.to,u.next()}}static of(t,e=!1){let n=new un;for(let r of t instanceof td?[t]:e?Qw(t):t)n.add(r.from,r.to,r.value);return n.finish()}static join(t){if(!t.length)return Dt.empty;let e=t[t.length-1];for(let n=t.length-2;n>=0;n--)for(let r=t[n];r!=Dt.empty;r=r.nextLayer)e=new Dt(r.chunkPos,r.chunk,e,Math.max(r.maxPoint,e.maxPoint));return e}}Dt.empty=new Dt([],[],null,-1);function Qw(l){if(l.length>1)for(let t=l[0],e=1;e<l.length;e++){let n=l[e];if(ed(t,n)>0)return l.slice().sort(ed);t=n}return l}Dt.empty.nextLayer=Dt.empty;class un{finishChunk(t){this.chunks.push(new Gd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new un)).add(t,e,n)}addInner(t,e,n){let r=t-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(Dt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=Dt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function ky(l,t,e){let n=new Map;for(let o of l)for(let u=0;u<o.chunk.length;u++)o.chunk[u].maxPoint<=0&&n.set(o.chunk[u],o.chunkPos[u]);let r=new Set;for(let o of t)for(let u=0;u<o.chunk.length;u++){let f=n.get(o.chunk[u]);f!=null&&(e?e.mapPos(f):f)==o.chunkPos[u]&&!e?.touchesRange(f,f+o.chunk[u].length)&&r.add(o.chunk[u])}return r}class Cv{constructor(t,e,n,r=0){this.layer=t,this.skip=e,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<t||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class to{constructor(t){this.heap=t}static from(t,e=null,n=-1){let r=[];for(let o=0;o<t.length;o++)for(let u=t[o];!u.isEmpty;u=u.nextLayer)u.maxPoint>=n&&r.push(new Cv(u,e,n,o));return r.length==1?r[0]:new to(r)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let n=this.heap.length>>1;n>=0;n--)xh(this.heap,n);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let n=this.heap.length>>1;n>=0;n--)xh(this.heap,n);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),xh(this.heap,0)}}}function xh(l,t){for(let e=l[t];;){let n=(t<<1)+1;if(n>=l.length)break;let r=l[n];if(n+1<l.length&&r.compare(l[n+1])>=0&&(r=l[n+1],n++),e.compare(r)<0)break;l[n]=e,l[t]=r,t=n}}class _r{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=to.from(t,e,n)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Ua(this.active,t),Ua(this.activeTo,t),Ua(this.activeRank,t),this.minActive=Oy(this.active,this.activeTo)}addActive(t){let e=0,{value:n,to:r,rank:o}=this.cursor;for(;e<this.activeRank.length&&(o-this.activeRank[e]||r-this.activeTo[e])>0;)e++;qa(this.active,e,n),qa(this.activeTo,e,r),qa(this.activeRank,e,o),t&&qa(t,e,this.cursor.from),this.minActive=Oy(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>t){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&Ua(n,r)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(n),this.cursor.next();else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let r=n.length-1;r>=0&&n[r]<t;r--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()}openEnd(t){let e=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}}function Dy(l,t,e,n,r,o){l.goto(t),e.goto(n);let u=n+r,f=n,h=n-t;for(;;){let m=l.to+h-e.to,p=m||l.endSide-e.endSide,y=p<0?l.to+h:e.to,v=Math.min(y,u);if(l.point||e.point?l.point&&e.point&&(l.point==e.point||l.point.eq(e.point))&&id(l.activeForPoint(l.to),e.activeForPoint(e.to))||o.comparePoint(f,v,l.point,e.point):v>f&&!id(l.active,e.active)&&o.compareRange(f,v,l.active,e.active),y>u)break;(m||l.openEnd!=e.openEnd)&&o.boundChange&&o.boundChange(y),f=y,p<=0&&l.next(),p>=0&&e.next()}}function id(l,t){if(l.length!=t.length)return!1;for(let e=0;e<l.length;e++)if(l[e]!=t[e]&&!l[e].eq(t[e]))return!1;return!0}function Ua(l,t){for(let e=t,n=l.length-1;e<n;e++)l[e]=l[e+1];l.pop()}function qa(l,t,e){for(let n=l.length-1;n>=t;n--)l[n+1]=l[n];l[t]=e}function Oy(l,t){let e=-1,n=1e9;for(let r=0;r<t.length;r++)(t[r]-n||l[r].endSide-l[e].endSide)<0&&(e=r,n=t[r]);return e}function Ls(l,t,e=l.length){let n=0;for(let r=0;r<e&&r<l.length;)l.charCodeAt(r)==9?(n+=t-n%t,r++):(n++,r=be(l,r));return n}function nd(l,t,e,n){for(let r=0,o=0;;){if(o>=t)return r;if(r==l.length)break;o+=l.charCodeAt(r)==9?e-o%e:1,r=be(l,r)}return n===!0?-1:l.length}const ld="",Ey=typeof Symbol>"u"?"__"+ld:Symbol.for(ld),sd=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Qn{constructor(t,e){this.rules=[];let{finish:n}=e||{};function r(u){return/^@/.test(u)?[u]:u.split(/,\s*/)}function o(u,f,h,m){let p=[],y=/^@(\w+)\b/.exec(u[0]),v=y&&y[1]=="keyframes";if(y&&f==null)return h.push(u[0]+";");for(let S in f){let w=f[S];if(/&/.test(S))o(S.split(/,\s*/).map(M=>u.map(k=>M.replace(/&/,k))).reduce((M,k)=>M.concat(k)),w,h);else if(w&&typeof w=="object"){if(!y)throw new RangeError("The value of a property ("+S+") should be a primitive value.");o(r(S),w,p,v)}else w!=null&&p.push(S.replace(/_.*/,"").replace(/[A-Z]/g,M=>"-"+M.toLowerCase())+": "+w+";")}(p.length||v)&&h.push((n&&!y&&!m?u.map(n):u).join(", ")+" {"+p.join(" ")+"}")}for(let u in t)o(r(u),t[u],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=Ry[Ey]||1;return Ry[Ey]=t+1,ld+t.toString(36)}static mount(t,e,n){let r=t[sd],o=n&&n.nonce;r?o&&r.setNonce(o):r=new Zw(t,o),r.mount(Array.isArray(e)?e:[e],t)}}let By=new Map;class Zw{constructor(t,e){let n=t.ownerDocument||t,r=n.defaultView;if(!t.head&&t.adoptedStyleSheets&&r.CSSStyleSheet){let o=By.get(n);if(o)return t[sd]=o;this.sheet=new r.CSSStyleSheet,By.set(n,this)}else this.styleTag=n.createElement("style"),e&&this.styleTag.setAttribute("nonce",e);this.modules=[],t[sd]=this}mount(t,e){let n=this.sheet,r=0,o=0;for(let u=0;u<t.length;u++){let f=t[u],h=this.modules.indexOf(f);if(h<o&&h>-1&&(this.modules.splice(h,1),o--,h=-1),h==-1){if(this.modules.splice(o++,0,f),n)for(let m=0;m<f.rules.length;m++)n.insertRule(f.rules[m],r++)}else{for(;o<h;)r+=this.modules[o++].rules.length;r+=f.rules.length,o++}}if(n)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets]);else{let u="";for(let h=0;h<this.modules.length;h++)u+=this.modules[h].getRules()+`
`;this.styleTag.textContent=u;let f=e.head||e;this.styleTag.parentNode!=f&&f.insertBefore(this.styleTag,f.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}var Zn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},eo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ww=typeof navigator<"u"&&/Mac/.test(navigator.platform),Pw=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ye=0;ye<10;ye++)Zn[48+ye]=Zn[96+ye]=String(ye);for(var ye=1;ye<=24;ye++)Zn[ye+111]="F"+ye;for(var ye=65;ye<=90;ye++)Zn[ye]=String.fromCharCode(ye+32),eo[ye]=String.fromCharCode(ye);for(var wh in Zn)eo.hasOwnProperty(wh)||(eo[wh]=Zn[wh]);function Jw(l){var t=Ww&&l.metaKey&&l.shiftKey&&!l.ctrlKey&&!l.altKey||Pw&&l.shiftKey&&l.key&&l.key.length==1||l.key=="Unidentified",e=!t&&l.key||(l.shiftKey?eo:Zn)[l.keyCode]||l.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}function Ut(){var l=arguments[0];typeof l=="string"&&(l=document.createElement(l));var t=1,e=arguments[1];if(e&&typeof e=="object"&&e.nodeType==null&&!Array.isArray(e)){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];typeof r=="string"?l.setAttribute(n,r):r!=null&&(l[n]=r)}t++}for(;t<arguments.length;t++)Tv(l,arguments[t]);return l}function Tv(l,t){if(typeof t=="string")l.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)l.appendChild(t);else if(Array.isArray(t))for(var e=0;e<t.length;e++)Tv(l,t[e]);else throw new RangeError("Unsupported child node: "+t)}function io(l){let t;return l.nodeType==11?t=l.getSelection?l:l.ownerDocument:t=l,t.getSelection()}function rd(l,t){return t?l==t||l.contains(t.nodeType!=1?t.parentNode:t):!1}function au(l,t){if(!t.anchorNode)return!1;try{return rd(l,t.anchorNode)}catch{return!1}}function no(l){return l.nodeType==3?Tl(l,0,l.nodeValue.length).getClientRects():l.nodeType==1?l.getClientRects():[]}function Pr(l,t,e,n){return e?Ny(l,t,e,n,-1)||Ny(l,t,e,n,1):!1}function Cl(l){for(var t=0;;t++)if(l=l.previousSibling,!l)return t}function vu(l){return l.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(l.nodeName)}function Ny(l,t,e,n,r){for(;;){if(l==e&&t==n)return!0;if(t==(r<0?0:ji(l))){if(l.nodeName=="DIV")return!1;let o=l.parentNode;if(!o||o.nodeType!=1)return!1;t=Cl(l)+(r<0?0:1),l=o}else if(l.nodeType==1){if(l=l.childNodes[t+(r<0?-1:0)],l.nodeType==1&&l.contentEditable=="false")return!1;t=r<0?ji(l):0}else return!1}}function ji(l){return l.nodeType==3?l.nodeValue.length:l.childNodes.length}function Vu(l,t){let e=t?l.left:l.right;return{left:e,right:e,top:l.top,bottom:l.bottom}}function Fw(l){let t=l.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:l.innerWidth,top:0,bottom:l.innerHeight}}function kv(l,t){let e=t.width/l.offsetWidth,n=t.height/l.offsetHeight;return(e>.995&&e<1.005||!isFinite(e)||Math.abs(t.width-l.offsetWidth)<1)&&(e=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.height-l.offsetHeight)<1)&&(n=1),{scaleX:e,scaleY:n}}function Iw(l,t,e,n,r,o,u,f){let h=l.ownerDocument,m=h.defaultView||window;for(let p=l,y=!1;p&&!y;)if(p.nodeType==1){let v,S=p==h.body,w=1,M=1;if(S)v=Fw(m);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(y=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let Y=p.getBoundingClientRect();({scaleX:w,scaleY:M}=kv(p,Y)),v={left:Y.left,right:Y.left+p.clientWidth*w,top:Y.top,bottom:Y.top+p.clientHeight*M}}let k=0,R=0;if(r=="nearest")t.top<v.top?(R=t.top-(v.top+u),e>0&&t.bottom>v.bottom+R&&(R=t.bottom-v.bottom+u)):t.bottom>v.bottom&&(R=t.bottom-v.bottom+u,e<0&&t.top-R<v.top&&(R=t.top-(v.top+u)));else{let Y=t.bottom-t.top,j=v.bottom-v.top;R=(r=="center"&&Y<=j?t.top+Y/2-j/2:r=="start"||r=="center"&&e<0?t.top-u:t.bottom-j+u)-v.top}if(n=="nearest"?t.left<v.left?(k=t.left-(v.left+o),e>0&&t.right>v.right+k&&(k=t.right-v.right+o)):t.right>v.right&&(k=t.right-v.right+o,e<0&&t.left<v.left+k&&(k=t.left-(v.left+o))):k=(n=="center"?t.left+(t.right-t.left)/2-(v.right-v.left)/2:n=="start"==f?t.left-o:t.right-(v.right-v.left)+o)-v.left,k||R)if(S)m.scrollBy(k,R);else{let Y=0,j=0;if(R){let K=p.scrollTop;p.scrollTop+=R/M,j=(p.scrollTop-K)*M}if(k){let K=p.scrollLeft;p.scrollLeft+=k/w,Y=(p.scrollLeft-K)*w}t={left:t.left-Y,top:t.top-j,right:t.right-Y,bottom:t.bottom-j},Y&&Math.abs(Y-k)<1&&(n="nearest"),j&&Math.abs(j-R)<1&&(r="nearest")}if(S)break;(t.top<v.top||t.bottom>v.bottom||t.left<v.left||t.right>v.right)&&(t={left:Math.max(t.left,v.left),right:Math.min(t.right,v.right),top:Math.max(t.top,v.top),bottom:Math.min(t.bottom,v.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function $w(l){let t=l.ownerDocument,e,n;for(let r=l.parentNode;r&&!(r==t.body||e&&n);)if(r.nodeType==1)!n&&r.scrollHeight>r.clientHeight&&(n=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:e,y:n}}class tA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?ji(e):0),n,Math.min(t.focusOffset,n?ji(n):0))}set(t,e,n,r){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=r}}let gs=null;function Dv(l){if(l.setActive)return l.setActive();if(gs)return l.focus(gs);let t=[];for(let e=l;e&&(t.push(e,e.scrollTop,e.scrollLeft),e!=e.ownerDocument);e=e.parentNode);if(l.focus(gs==null?{get preventScroll(){return gs={preventScroll:!0},!0}}:void 0),!gs){gs=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],o=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=o&&(n.scrollLeft=o)}}}let Ly;function Tl(l,t,e=t){let n=Ly||(Ly=document.createRange());return n.setEnd(l,e),n.setStart(l,t),n}function As(l,t,e,n){let r={key:t,code:t,keyCode:e,which:e,cancelable:!0};n&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=n);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,l.dispatchEvent(o);let u=new KeyboardEvent("keyup",r);return u.synthetic=!0,l.dispatchEvent(u),o.defaultPrevented||u.defaultPrevented}function eA(l){for(;l;){if(l&&(l.nodeType==9||l.nodeType==11&&l.host))return l;l=l.assignedSlot||l.parentNode}return null}function Ov(l){for(;l.attributes.length;)l.removeAttributeNode(l.attributes[0])}function iA(l,t){let e=t.focusNode,n=t.focusOffset;if(!e||t.anchorNode!=e||t.anchorOffset!=n)return!1;for(n=Math.min(n,ji(e));;)if(n){if(e.nodeType!=1)return!1;let r=e.childNodes[n-1];r.contentEditable=="false"?n--:(e=r,n=ji(e))}else{if(e==l)return!0;n=Cl(e),e=e.parentNode}}function Ev(l){return l.scrollTop>Math.max(1,l.scrollHeight-l.clientHeight-4)}function Rv(l,t){for(let e=l,n=t;;){if(e.nodeType==3&&n>0)return{node:e,offset:n};if(e.nodeType==1&&n>0){if(e.contentEditable=="false")return null;e=e.childNodes[n-1],n=ji(e)}else if(e.parentNode&&!vu(e))n=Cl(e),e=e.parentNode;else return null}}function Bv(l,t){for(let e=l,n=t;;){if(e.nodeType==3&&n<e.nodeValue.length)return{node:e,offset:n};if(e.nodeType==1&&n<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[n],n=0}else if(e.parentNode&&!vu(e))n=Cl(e)+1,e=e.parentNode;else return null}}class Te{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new Te(t.parentNode,Cl(t),e)}static after(t,e){return new Te(t.parentNode,Cl(t)+1,e)}}const Xd=[];class Vt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(this.flags&2){let n=this.dom,r=null,o;for(let u of this.children){if(u.flags&7){if(!u.dom&&(o=r?r.nextSibling:n.firstChild)){let f=Vt.get(o);(!f||!f.parent&&f.canReuseDOM(u))&&u.reuseDOM(o)}u.sync(t,e),u.flags&=-8}if(o=r?r.nextSibling:n.firstChild,e&&!e.written&&e.node==n&&o!=u.dom&&(e.written=!0),u.dom.parentNode==n)for(;o&&o!=u.dom;)o=zy(o);else n.insertBefore(u.dom,o);r=u.dom}for(o=r?r.nextSibling:n.firstChild,o&&e&&e.node==n&&(e.written=!0);o;)o=zy(o)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(t,e),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let r=ji(t)==0?0:e==0?-1:1;for(;;){let o=t.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(t==o.firstChild?r=-1:r=1),t=o}r<0?n=t:n=t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Vt.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,o=0;;r++){let u=this.children[r];if(u.dom==n)return o;o+=u.length+u.breakAfter}}domBoundsAround(t,e,n=0){let r=-1,o=-1,u=-1,f=-1;for(let h=0,m=n,p=n;h<this.children.length;h++){let y=this.children[h],v=m+y.length;if(m<t&&v>e)return y.domBoundsAround(t,e,m);if(v>=t&&r==-1&&(r=h,o=m),m>e&&y.dom.parentNode==this.dom){u=h,f=p;break}p=v,m=v+y.breakAfter}return{from:o,to:f<0?n+this.length:f,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:u<this.children.length&&u>=0?this.children[u].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),e.flags&1)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.flags&7&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=Xd){this.markDirty();for(let r=t;r<e;r++){let o=this.children[r];o.parent==this&&n.indexOf(o)<0&&o.destroy()}n.length<250?this.children.splice(t,e-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(e));for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new Nv(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,r,o,u){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!((this.flags|t.flags)&8)}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}Vt.prototype.breakAfter=0;function zy(l){let t=l.nextSibling;return l.parentNode.removeChild(l),t}class Nv{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Lv(l,t,e,n,r,o,u,f,h){let{children:m}=l,p=m.length?m[t]:null,y=o.length?o[o.length-1]:null,v=y?y.breakAfter:u;if(!(t==n&&p&&!u&&!v&&o.length<2&&p.merge(e,r,o.length?y:null,e==0,f,h))){if(n<m.length){let S=m[n];S&&(r<S.length||S.breakAfter&&y?.breakAfter)?(t==n&&(S=S.split(r),r=0),!v&&y&&S.merge(0,r,y,!0,0,h)?o[o.length-1]=S:((r||S.children.length&&!S.children[0].length)&&S.merge(0,r,null,!1,0,h),o.push(S))):S?.breakAfter&&(y?y.breakAfter=1:u=1),n++}for(p&&(p.breakAfter=u,e>0&&(!u&&o.length&&p.merge(e,p.length,o[0],!1,f,0)?p.breakAfter=o.shift().breakAfter:(e<p.length||p.children.length&&p.children[p.children.length-1].length==0)&&p.merge(e,p.length,null,!1,f,0),t++));t<n&&o.length;)if(m[n-1].become(o[o.length-1]))n--,o.pop(),h=o.length?0:f;else if(m[t].become(o[0]))t++,o.shift(),f=o.length?0:h;else break;!o.length&&t&&n<m.length&&!m[t-1].breakAfter&&m[n].merge(0,0,m[t-1],!1,f,h)&&t--,(t<n||o.length)&&l.replaceChildren(t,n,o)}}function zv(l,t,e,n,r,o){let u=l.childCursor(),{i:f,off:h}=u.findPos(e,1),{i:m,off:p}=u.findPos(t,-1),y=t-e;for(let v of n)y+=v.length;l.length+=y,Lv(l,m,p,f,h,n,0,r,o)}let Ve=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},od=typeof document<"u"?document:{documentElement:{style:{}}};const ad=/Edge\/(\d+)/.exec(Ve.userAgent),Hv=/MSIE \d/.test(Ve.userAgent),ud=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ve.userAgent),Yu=!!(Hv||ud||ad),Hy=!Yu&&/gecko\/(\d+)/i.test(Ve.userAgent),Ah=!Yu&&/Chrome\/(\d+)/.exec(Ve.userAgent),nA="webkitFontSmoothing"in od.documentElement.style,_v=!Yu&&/Apple Computer/.test(Ve.vendor),_y=_v&&(/Mobile\/\w+/.test(Ve.userAgent)||Ve.maxTouchPoints>2);var F={mac:_y||/Mac/.test(Ve.platform),windows:/Win/.test(Ve.platform),linux:/Linux|X11/.test(Ve.platform),ie:Yu,ie_version:Hv?od.documentMode||6:ud?+ud[1]:ad?+ad[1]:0,gecko:Hy,gecko_version:Hy?+(/Firefox\/(\d+)/.exec(Ve.userAgent)||[0,0])[1]:0,chrome:!!Ah,chrome_version:Ah?+Ah[1]:0,ios:_y,android:/Android\b/.test(Ve.userAgent),safari:_v,webkit_version:nA?+(/\bAppleWebKit\/(\d+)/.exec(Ve.userAgent)||[0,0])[1]:0,tabSize:od.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const lA=256;class wi extends Vt{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,e,n){return this.flags&8||n&&(!(n instanceof wi)||this.length-(e-t)+n.length>lA||n.flags&8)?!1:(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new wi(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=this.flags&8,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new Te(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return sA(this.dom,t,e)}}class cn extends Vt{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let r of e)r.setParent(this)}setAttrs(t){if(Ov(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!((this.flags|t.flags)&8)}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,r,o,u){return n&&(!(n instanceof cn&&n.mark.eq(this.mark))||t&&o<=0||e<this.length&&u<=0)?!1:(zv(this,t,e,n?n.children.slice():[],o-1,u-1),this.markDirty(),!0)}split(t){let e=[],n=0,r=-1,o=0;for(let f of this.children){let h=n+f.length;h>t&&e.push(n<t?f.split(t-n):f),r<0&&n>=t&&(r=o),n=h,o++}let u=this.length-t;return this.length=t,r>-1&&(this.children.length=r,this.markDirty()),new cn(this.mark,e,u)}domAtPos(t){return Uv(this,t)}coordsAt(t,e){return Vv(this,t,e)}}function sA(l,t,e){let n=l.nodeValue.length;t>n&&(t=n);let r=t,o=t,u=0;t==0&&e<0||t==n&&e>=0?F.chrome||F.gecko||(t?(r--,u=1):o<n&&(o++,u=-1)):e<0?r--:o<n&&o++;let f=Tl(l,r,o).getClientRects();if(!f.length)return null;let h=f[(u?u<0:e>=0)?0:f.length-1];return F.safari&&!u&&h.width==0&&(h=Array.prototype.find.call(f,m=>m.width)||h),u?Vu(h,u<0):h||null}class jn extends Vt{static create(t,e,n){return new jn(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=jn.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,r,o,u){return n&&(!(n instanceof jn)||!this.widget.compare(n.widget)||t>0&&o<=0||e<this.length&&u<=0)?!1:(this.length=t+(n?n.length:0)+(this.length-e),!0)}become(t){return t instanceof jn&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return Ot.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Ot.empty}domAtPos(t){return(this.length?t==0:this.side>0)?Te.before(this.dom):Te.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let u=this.side?this.side<0:t>0;for(let f=u?r.length-1:0;o=r[f],!(t>0?f==0:f==r.length-1||o.top<o.bottom);f+=u?-1:1);return Vu(o,!u)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ds extends Vt{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof Ds&&t.side==this.side}split(){return new Ds(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?Te.before(this.dom):Te.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ot.empty}get isHidden(){return!0}}wi.prototype.children=jn.prototype.children=Ds.prototype.children=Xd;function Uv(l,t){let e=l.dom,{children:n}=l,r=0;for(let o=0;r<n.length;r++){let u=n[r],f=o+u.length;if(!(f==o&&u.getSide()<=0)){if(t>o&&t<f&&u.dom.parentNode==e)return u.domAtPos(t-o);if(t<=o)break;o=f}}for(let o=r;o>0;o--){let u=n[o-1];if(u.dom.parentNode==e)return u.domAtPos(u.length)}for(let o=r;o<n.length;o++){let u=n[o];if(u.dom.parentNode==e)return u.domAtPos(0)}return new Te(e,0)}function qv(l,t,e){let n,{children:r}=l;e>0&&t instanceof cn&&r.length&&(n=r[r.length-1])instanceof cn&&n.mark.eq(t.mark)?qv(n,t.children[0],e-1):(r.push(t),t.setParent(l)),l.length+=t.length}function Vv(l,t,e){let n=null,r=-1,o=null,u=-1;function f(m,p){for(let y=0,v=0;y<m.children.length&&v<=p;y++){let S=m.children[y],w=v+S.length;w>=p&&(S.children.length?f(S,p-v):(!o||o.isHidden&&(e>0||oA(o,S)))&&(w>p||v==w&&S.getSide()>0)?(o=S,u=p-v):(v<p||v==w&&S.getSide()<0&&!S.isHidden)&&(n=S,r=p-v)),v=w}}f(l,t);let h=(e<0?n:o)||n||o;return h?h.coordsAt(Math.max(0,h==n?r:u),e):rA(l)}function rA(l){let t=l.dom.lastChild;if(!t)return l.dom.getBoundingClientRect();let e=no(t);return e[e.length-1]||null}function oA(l,t){let e=l.coordsAt(0,1),n=t.coordsAt(0,1);return e&&n&&n.top<e.bottom}function cd(l,t){for(let e in l)e=="class"&&t.class?t.class+=" "+l.class:e=="style"&&t.style?t.style+=";"+l.style:t[e]=l[e];return t}const Uy=Object.create(null);function bu(l,t,e){if(l==t)return!0;l||(l=Uy),t||(t=Uy);let n=Object.keys(l),r=Object.keys(t);if(n.length-(e&&n.indexOf(e)>-1?1:0)!=r.length-(e&&r.indexOf(e)>-1?1:0))return!1;for(let o of n)if(o!=e&&(r.indexOf(o)==-1||l[o]!==t[o]))return!1;return!0}function fd(l,t,e){let n=!1;if(t)for(let r in t)e&&r in e||(n=!0,r=="style"?l.style.cssText="":l.removeAttribute(r));if(e)for(let r in e)t&&t[r]==e[r]||(n=!0,r=="style"?l.style.cssText=e[r]:l.setAttribute(r,e[r]));return n}function aA(l){let t=Object.create(null);for(let e=0;e<l.attributes.length;e++){let n=l.attributes[e];t[n.name]=n.value}return t}class Fn{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var Be=function(l){return l[l.Text=0]="Text",l[l.WidgetBefore=1]="WidgetBefore",l[l.WidgetAfter=2]="WidgetAfter",l[l.WidgetRange=3]="WidgetRange",l}(Be||(Be={}));class ut extends Ml{constructor(t,e,n,r){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(t){return new po(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new Wn(t,e,e,n,t.widget||null,!1)}static replace(t){let e=!!t.block,n,r;if(t.isBlockGap)n=-5e8,r=4e8;else{let{start:o,end:u}=Yv(t,e);n=(o?e?-3e8:-1:5e8)-1,r=(u?e?2e8:1:-6e8)+1}return new Wn(t,n,r,e,t.widget||null,!0)}static line(t){return new yo(t)}static set(t,e=!1){return Dt.of(t,e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ut.none=Dt.empty;class po extends ut{constructor(t){let{start:e,end:n}=Yv(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof po&&this.tagName==t.tagName&&(this.class||((e=this.attrs)===null||e===void 0?void 0:e.class))==(t.class||((n=t.attrs)===null||n===void 0?void 0:n.class))&&bu(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}po.prototype.point=!1;class yo extends ut{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof yo&&this.spec.class==t.spec.class&&bu(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}yo.prototype.mapMode=Re.TrackBefore;yo.prototype.point=!0;class Wn extends ut{constructor(t,e,n,r,o,u){super(e,n,o,t),this.block=r,this.isReplace=u,this.mapMode=r?e<=0?Re.TrackBefore:Re.TrackAfter:Re.TrackDel}get type(){return this.startSide!=this.endSide?Be.WidgetRange:this.startSide<=0?Be.WidgetBefore:Be.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof Wn&&uA(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}Wn.prototype.point=!0;function Yv(l,t=!1){let{inclusiveStart:e,inclusiveEnd:n}=l;return e==null&&(e=l.inclusive),n==null&&(n=l.inclusive),{start:e??t,end:n??t}}function uA(l,t){return l==t||!!(l&&t&&l.compare(t))}function uu(l,t,e,n=0){let r=e.length-1;r>=0&&e[r]+n>=l?e[r]=Math.max(e[r],t):e.push(l,t)}class ie extends Vt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,r,o,u){if(n){if(!(n instanceof ie))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),zv(this,t,e,n?n.children.slice():[],o,u),!0}split(t){let e=new ie;if(e.breakAfter=this.breakAfter,this.length==0)return e;let{i:n,off:r}=this.childPos(t);r&&(e.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let o=n;o<this.children.length;o++)e.append(this.children[o],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){bu(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){qv(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=cd(e,this.attrs||{})),n&&(this.attrs=cd({class:n},this.attrs||{}))}domAtPos(t){return Uv(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.flags|=6)}sync(t,e){var n;this.dom?this.flags&4&&(Ov(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(fd(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let r=this.dom.lastChild;for(;r&&Vt.get(r)instanceof cn;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((n=Vt.get(r))===null||n===void 0?void 0:n.isEditable)==!1&&(!F.ios||!this.children.some(o=>o instanceof wi))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0,e;for(let n of this.children){if(!(n instanceof wi)||/[^ -~]/.test(n.text))return null;let r=no(n.dom);if(r.length!=1)return null;t+=r[0].width,e=r[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(t,e){let n=Vv(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:r}=this.parent.view.viewState,o=n.bottom-n.top;if(Math.abs(o-r.lineHeight)<2&&r.textHeight<o){let u=(o-r.textHeight)/2;return{top:n.top+u,bottom:n.bottom-u,left:n.left,right:n.left}}}return n}become(t){return t instanceof ie&&this.children.length==0&&t.children.length==0&&bu(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let n=0,r=0;n<t.children.length;n++){let o=t.children[n],u=r+o.length;if(u>=e){if(o instanceof ie)return o;if(u>e)break}r=u+o.breakAfter}return null}}class an extends Vt{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,r,o,u){return n&&(!(n instanceof an)||!this.widget.compare(n.widget)||t>0&&o<=0||e<this.length&&u<=0)?!1:(this.length=t+(n?n.length:0)+(this.length-e),!0)}domAtPos(t){return t==0?Te.before(this.dom):Te.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new an(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Xd}sync(t){(!this.dom||!this.widget.updateDOM(this.dom,t))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ot.empty}domBoundsAround(){return null}become(t){return t instanceof an&&t.widget.constructor==this.widget.constructor?(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);return n||(this.widget instanceof hd?null:Vu(this.dom.getBoundingClientRect(),this.length?t==0:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e==n?!1:t<0?e<0:n>0}}class hd extends Fn{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Jr{constructor(t,e,n,r){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof an&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ie),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Va(new Ds(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(t&&this.content.length&&this.content[this.content.length-1]instanceof an)&&this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:u,done:f}=this.cursor.next(this.skip);if(this.skip=0,f)throw new Error("Ran out of text content when drawing inline views");if(u){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}else this.text=o,this.textOff=0}let r=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(Va(new wi(this.text.slice(this.textOff,this.textOff+r)),e),n),this.atCursorPos=!0,this.textOff+=r,t-=r,n=0}}span(t,e,n,r){this.buildText(e-t,n,r),this.pos=e,this.openStart<0&&(this.openStart=r)}point(t,e,n,r,o,u){if(this.disallowBlockEffectsFor[u]&&n instanceof Wn){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let f=e-t;if(n instanceof Wn)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new an(n.widget||Os.block,f,n));else{let h=jn.create(n.widget||Os.inline,f,f?0:n.startSide),m=this.atCursorPos&&!h.isEditable&&o<=r.length&&(t<e||n.startSide>0),p=!h.isEditable&&(t<e||o>r.length||n.startSide<=0),y=this.getLine();this.pendingBuffer==2&&!m&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),m&&(y.append(Va(new Ds(1),r),o),o=r.length+Math.max(0,o-r.length)),y.append(Va(h,r),o),this.atCursorPos=p,this.pendingBuffer=p?t<e||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);f&&(this.textOff+f<=this.text.length?this.textOff+=f:(this.skip+=f-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=o)}static build(t,e,n,r,o){let u=new Jr(t,e,n,o);return u.openEnd=Dt.spans(r,e,n,u),u.openStart<0&&(u.openStart=u.openEnd),u.finish(u.openEnd),u}}function Va(l,t){for(let e of t)l=new cn(e,[l],l.length);return l}class Os extends Fn{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Os.inline=new Os("span");Os.block=new Os("div");var Xt=function(l){return l[l.LTR=0]="LTR",l[l.RTL=1]="RTL",l}(Xt||(Xt={}));const kl=Xt.LTR,Kd=Xt.RTL;function jv(l){let t=[];for(let e=0;e<l.length;e++)t.push(1<<+l[e]);return t}const cA=jv("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),fA=jv("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),dd=Object.create(null),Ri=[];for(let l of["()","[]","{}"]){let t=l.charCodeAt(0),e=l.charCodeAt(1);dd[t]=e,dd[e]=-t}function Gv(l){return l<=247?cA[l]:1424<=l&&l<=1524?2:1536<=l&&l<=1785?fA[l-1536]:1774<=l&&l<=2220?4:8192<=l&&l<=8204?256:64336<=l&&l<=65023?4:1}const hA=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Gn{get dir(){return this.level%2?Kd:kl}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,r){let o=-1;for(let u=0;u<t.length;u++){let f=t[u];if(f.from<=e&&f.to>=e){if(f.level==n)return u;(o<0||(r!=0?r<0?f.from<e:f.to>e:t[o].level>f.level))&&(o=u)}}if(o<0)throw new RangeError("Index out of range");return o}}function Xv(l,t){if(l.length!=t.length)return!1;for(let e=0;e<l.length;e++){let n=l[e],r=t[e];if(n.from!=r.from||n.to!=r.to||n.direction!=r.direction||!Xv(n.inner,r.inner))return!1}return!0}const qt=[];function dA(l,t,e,n,r){for(let o=0;o<=n.length;o++){let u=o?n[o-1].to:t,f=o<n.length?n[o].from:e,h=o?256:r;for(let m=u,p=h,y=h;m<f;m++){let v=Gv(l.charCodeAt(m));v==512?v=p:v==8&&y==4&&(v=16),qt[m]=v==4?2:v,v&7&&(y=v),p=v}for(let m=u,p=h,y=h;m<f;m++){let v=qt[m];if(v==128)m<f-1&&p==qt[m+1]&&p&24?v=qt[m]=p:qt[m]=256;else if(v==64){let S=m+1;for(;S<f&&qt[S]==64;)S++;let w=m&&p==8||S<e&&qt[S]==8?y==1?1:8:256;for(let M=m;M<S;M++)qt[M]=w;m=S-1}else v==8&&y==1&&(qt[m]=1);p=v,v&7&&(y=v)}}}function mA(l,t,e,n,r){let o=r==1?2:1;for(let u=0,f=0,h=0;u<=n.length;u++){let m=u?n[u-1].to:t,p=u<n.length?n[u].from:e;for(let y=m,v,S,w;y<p;y++)if(S=dd[v=l.charCodeAt(y)])if(S<0){for(let M=f-3;M>=0;M-=3)if(Ri[M+1]==-S){let k=Ri[M+2],R=k&2?r:k&4?k&1?o:r:0;R&&(qt[y]=qt[Ri[M]]=R),f=M;break}}else{if(Ri.length==189)break;Ri[f++]=y,Ri[f++]=v,Ri[f++]=h}else if((w=qt[y])==2||w==1){let M=w==r;h=M?0:1;for(let k=f-3;k>=0;k-=3){let R=Ri[k+2];if(R&2)break;if(M)Ri[k+2]|=2;else{if(R&4)break;Ri[k+2]|=4}}}}}function gA(l,t,e,n){for(let r=0,o=n;r<=e.length;r++){let u=r?e[r-1].to:l,f=r<e.length?e[r].from:t;for(let h=u;h<f;){let m=qt[h];if(m==256){let p=h+1;for(;;)if(p==f){if(r==e.length)break;p=e[r++].to,f=r<e.length?e[r].from:t}else if(qt[p]==256)p++;else break;let y=o==1,v=(p<t?qt[p]:n)==1,S=y==v?y?1:2:n;for(let w=p,M=r,k=M?e[M-1].to:l;w>h;)w==k&&(w=e[--M].from,k=M?e[M-1].to:l),qt[--w]=S;h=p}else o=m,h++}}}function md(l,t,e,n,r,o,u){let f=n%2?2:1;if(n%2==r%2)for(let h=t,m=0;h<e;){let p=!0,y=!1;if(m==o.length||h<o[m].from){let M=qt[h];M!=f&&(p=!1,y=M==16)}let v=!p&&f==1?[]:null,S=p?n:n+1,w=h;t:for(;;)if(m<o.length&&w==o[m].from){if(y)break t;let M=o[m];if(!p)for(let k=M.to,R=m+1;;){if(k==e)break t;if(R<o.length&&o[R].from==k)k=o[R++].to;else{if(qt[k]==f)break t;break}}if(m++,v)v.push(M);else{M.from>h&&u.push(new Gn(h,M.from,S));let k=M.direction==kl!=!(S%2);gd(l,k?n+1:n,r,M.inner,M.from,M.to,u),h=M.to}w=M.to}else{if(w==e||(p?qt[w]!=f:qt[w]==f))break;w++}v?md(l,h,w,n+1,r,v,u):h<w&&u.push(new Gn(h,w,S)),h=w}else for(let h=e,m=o.length;h>t;){let p=!0,y=!1;if(!m||h>o[m-1].to){let M=qt[h-1];M!=f&&(p=!1,y=M==16)}let v=!p&&f==1?[]:null,S=p?n:n+1,w=h;t:for(;;)if(m&&w==o[m-1].to){if(y)break t;let M=o[--m];if(!p)for(let k=M.from,R=m;;){if(k==t)break t;if(R&&o[R-1].to==k)k=o[--R].from;else{if(qt[k-1]==f)break t;break}}if(v)v.push(M);else{M.to<h&&u.push(new Gn(M.to,h,S));let k=M.direction==kl!=!(S%2);gd(l,k?n+1:n,r,M.inner,M.from,M.to,u),h=M.from}w=M.from}else{if(w==t||(p?qt[w-1]!=f:qt[w-1]==f))break;w--}v?md(l,w,h,n+1,r,v,u):w<h&&u.push(new Gn(w,h,S)),h=w}}function gd(l,t,e,n,r,o,u){let f=t%2?2:1;dA(l,r,o,n,f),mA(l,r,o,n,f),gA(r,o,n,f),md(l,r,o,t,e,n,u)}function pA(l,t,e){if(!l)return[new Gn(0,0,t==Kd?1:0)];if(t==kl&&!e.length&&!hA.test(l))return Kv(l.length);if(e.length)for(;l.length>qt.length;)qt[qt.length]=256;let n=[],r=t==kl?0:1;return gd(l,r,r,e,0,l.length,n),n}function Kv(l){return[new Gn(0,l,0)]}let Qv="";function yA(l,t,e,n,r){var o;let u=n.head-l.from,f=Gn.find(t,u,(o=n.bidiLevel)!==null&&o!==void 0?o:-1,n.assoc),h=t[f],m=h.side(r,e);if(u==m){let v=f+=r?1:-1;if(v<0||v>=t.length)return null;h=t[f=v],u=h.side(!r,e),m=h.side(r,e)}let p=be(l.text,u,h.forward(r,e));(p<h.from||p>h.to)&&(p=m),Qv=l.text.slice(Math.min(u,p),Math.max(u,p));let y=f==(r?t.length-1:0)?null:t[f+(r?1:-1)];return y&&p==m&&y.level+(r?0:1)<h.level?V.cursor(y.side(!r,e)+l.from,y.forward(r,e)?1:-1,y.level):V.cursor(p+l.from,h.forward(r,e)?-1:1,h.level)}function vA(l,t,e){for(let n=t;n<e;n++){let r=Gv(l.charCodeAt(n));if(r==1)return kl;if(r==2||r==4)return Kd}return kl}const Zv=$.define(),Wv=$.define(),Pv=$.define(),Jv=$.define(),pd=$.define(),Fv=$.define(),Iv=$.define(),Qd=$.define(),Zd=$.define(),$v=$.define({combine:l=>l.some(t=>t)}),tb=$.define({combine:l=>l.some(t=>t)}),eb=$.define();class Ms{constructor(t,e="nearest",n="nearest",r=5,o=5,u=!1){this.range=t,this.y=e,this.x=n,this.yMargin=r,this.xMargin=o,this.isSnapshot=u}map(t){return t.empty?this:new Ms(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new Ms(V.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ya=pt.define({map:(l,t)=>l.map(t)}),ib=pt.define();function je(l,t,e){let n=l.facet(Jv);n.length?n[0](t):window.onerror&&window.onerror(String(t),e,void 0,void 0,t)||(e?console.error(e+":",t):console.error(t))}const on=$.define({combine:l=>l.length?l[0]:!0});let bA=0;const bs=$.define({combine(l){return l.filter((t,e)=>{for(let n=0;n<e;n++)if(l[n].plugin==t.plugin)return!1;return!0})}});class ne{constructor(t,e,n,r,o){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(bs.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(bs.of({plugin:this,arg:t}))}static define(t,e){const{eventHandlers:n,eventObservers:r,provide:o,decorations:u}=e||{};return new ne(bA++,t,n,r,f=>{let h=[];return u&&h.push(lo.of(m=>{let p=m.plugin(f);return p?u(p):ut.none})),o&&h.push(o(f)),h})}static fromClass(t,e){return ne.define((n,r)=>new t(n,r),e)}}class Mh{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(t){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(n){if(je(e.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(t,this.spec.arg)}catch(e){je(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(!((e=this.value)===null||e===void 0)&&e.destroy)try{this.value.destroy()}catch(n){je(t.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const nb=$.define(),Wd=$.define(),lo=$.define(),lb=$.define(),Pd=$.define(),sb=$.define();function qy(l,t){let e=l.state.facet(sb);if(!e.length)return e;let n=e.map(o=>o instanceof Function?o(l):o),r=[];return Dt.spans(n,t.from,t.to,{point(){},span(o,u,f,h){let m=o-t.from,p=u-t.from,y=r;for(let v=f.length-1;v>=0;v--,h--){let S=f[v].spec.bidiIsolate,w;if(S==null&&(S=vA(t.text,m,p)),h>0&&y.length&&(w=y[y.length-1]).to==m&&w.direction==S)w.to=p,y=w.inner;else{let M={from:m,to:p,direction:S,inner:[]};y.push(M),y=M.inner}}}}),r}const rb=$.define();function Jd(l){let t=0,e=0,n=0,r=0;for(let o of l.state.facet(rb)){let u=o(l);u&&(u.left!=null&&(t=Math.max(t,u.left)),u.right!=null&&(e=Math.max(e,u.right)),u.top!=null&&(n=Math.max(n,u.top)),u.bottom!=null&&(r=Math.max(r,u.bottom)))}return{left:t,right:e,top:n,bottom:r}}const jr=$.define();class mi{constructor(t,e,n,r){this.fromA=t,this.toA=e,this.fromB=n,this.toB=r}join(t){return new mi(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let r=t[e-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(e.length==0)return t;let n=[];for(let r=0,o=0,u=0,f=0;;r++){let h=r==t.length?null:t[r],m=u-f,p=h?h.fromB:1e9;for(;o<e.length&&e[o]<p;){let y=e[o],v=e[o+1],S=Math.max(f,y),w=Math.min(p,v);if(S<=w&&new mi(S+m,w+m,S,w).addToSet(n),v>p)break;o+=2}if(!h)return n;new mi(h.fromA,h.toA,h.fromB,h.toB).addToSet(n),u=h.toA,f=h.toB}}}class Su{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=re.empty(this.startState.doc.length);for(let o of n)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,u,f,h)=>r.push(new mi(o,u,f,h))),this.changedRanges=r}static create(t,e,n){return new Su(t,e,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Vy extends Vt{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ut.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new ie],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new mi(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:m,toA:p})=>p<this.minWidthFrom||m>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((e=this.domChanged)===null||e===void 0)&&e.newSel?r=this.domChanged.newSel.head:!TA(t.changes,this.hasComposition)&&!t.selectionSet&&(r=t.state.selection.main.head));let o=r>-1?xA(this.view,t.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:m,to:p}=this.hasComposition;n=new mi(m,p,t.changes.mapPos(m,-1),t.changes.mapPos(p,1)).addToSet(n.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(F.ie||F.chrome)&&!o&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let u=this.decorations,f=this.updateDeco(),h=MA(u,f,t.changes);return n=mi.extendWithRanges(n,h),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,t.startState.doc.length,o),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let u=F.chrome||F.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,u),this.flags&=-8,u&&(u.written||r.selectionRange.focusNode!=u.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(u=>u.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let u of this.children)u instanceof an&&u.widget instanceof hd&&o.push(u.dom);r.updateGaps(o)}updateChildren(t,e,n){let r=n?n.range.addToSet(t.slice()):t,o=this.childCursor(e);for(let u=r.length-1;;u--){let f=u>=0?r[u]:null;if(!f)break;let{fromA:h,toA:m,fromB:p,toB:y}=f,v,S,w,M;if(n&&n.range.fromB<y&&n.range.toB>p){let K=Jr.build(this.view.state.doc,p,n.range.fromB,this.decorations,this.dynamicDecorationMap),z=Jr.build(this.view.state.doc,n.range.toB,y,this.decorations,this.dynamicDecorationMap);S=K.breakAtStart,w=K.openStart,M=z.openEnd;let G=this.compositionView(n);z.breakAtStart?G.breakAfter=1:z.content.length&&G.merge(G.length,G.length,z.content[0],!1,z.openStart,0)&&(G.breakAfter=z.content[0].breakAfter,z.content.shift()),K.content.length&&G.merge(0,0,K.content[K.content.length-1],!0,0,K.openEnd)&&K.content.pop(),v=K.content.concat(G).concat(z.content)}else({content:v,breakAtStart:S,openStart:w,openEnd:M}=Jr.build(this.view.state.doc,p,y,this.decorations,this.dynamicDecorationMap));let{i:k,off:R}=o.findPos(m,1),{i:Y,off:j}=o.findPos(h,-1);Lv(this,Y,j,k,R,v,S,w,M)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let n of e.effects)n.is(ib)&&(this.editContextFormatting=n.value)}compositionView(t){let e=new wi(t.text.nodeValue);e.flags|=8;for(let{deco:r}of t.marks)e=new cn(r,[e],e.length);let n=new ie;return n.append(e,0),n}fixCompositionDOM(t){let e=(o,u)=>{u.flags|=8|(u.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(u);let f=Vt.get(o);f&&f!=u&&(f.dom=null),u.setDOM(o)},n=this.childPos(t.range.fromB,1),r=this.children[n.i];e(t.line,r);for(let o=t.marks.length-1;o>=-1;o--)n=r.childPos(n.off,1),r=r.children[n.i],e(o>=0?t.marks[o].node:t.text,r)}updateSelection(t=!1,e=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,r=n==this.dom,o=!r&&!(this.view.state.facet(on)||this.dom.tabIndex>-1)&&au(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(r||e||o))return;let u=this.forceSelection;this.forceSelection=!1;let f=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(f.anchor)),m=f.empty?h:this.moveToLine(this.domAtPos(f.head));if(F.gecko&&f.empty&&!this.hasComposition&&SA(h)){let y=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(y,h.node.childNodes[h.offset]||null)),h=m=new Te(y,0),u=!0}let p=this.view.observer.selectionRange;(u||!p.focusNode||(!Pr(h.node,h.offset,p.anchorNode,p.anchorOffset)||!Pr(m.node,m.offset,p.focusNode,p.focusOffset))&&!this.suppressWidgetCursorChange(p,f))&&(this.view.observer.ignore(()=>{F.android&&F.chrome&&this.dom.contains(p.focusNode)&&CA(p.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let y=io(this.view.root);if(y)if(f.empty){if(F.gecko){let v=wA(h.node,h.offset);if(v&&v!=3){let S=(v==1?Rv:Bv)(h.node,h.offset);S&&(h=new Te(S.node,S.offset))}}y.collapse(h.node,h.offset),f.bidiLevel!=null&&y.caretBidiLevel!==void 0&&(y.caretBidiLevel=f.bidiLevel)}else if(y.extend){y.collapse(h.node,h.offset);try{y.extend(m.node,m.offset)}catch{}}else{let v=document.createRange();f.anchor>f.head&&([h,m]=[m,h]),v.setEnd(m.node,m.offset),v.setStart(h.node,h.offset),y.removeAllRanges(),y.addRange(v)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(h,m)),this.impreciseAnchor=h.precise?null:new Te(p.anchorNode,p.anchorOffset),this.impreciseHead=m.precise?null:new Te(p.focusNode,p.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&Pr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=io(t.root),{anchorNode:r,anchorOffset:o}=t.observer.selectionRange;if(!n||!e.empty||!e.assoc||!n.modify)return;let u=ie.find(this,e.head);if(!u)return;let f=u.posAtStart;if(e.head==f||e.head==f+u.length)return;let h=this.coordsAt(e.head,-1),m=this.coordsAt(e.head,1);if(!h||!m||h.bottom>m.top)return;let p=this.domAtPos(e.head+e.assoc);n.collapse(p.node,p.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let y=t.observer.selectionRange;t.docView.posFromDOM(y.anchorNode,y.anchorOffset)!=e.from&&n.collapse(r,o)}moveToLine(t){let e=this.dom,n;if(t.node!=e)return t;for(let r=t.offset;!n&&r<e.childNodes.length;r++){let o=Vt.get(e.childNodes[r]);o instanceof ie&&(n=o.domAtPos(0))}for(let r=t.offset-1;!n&&r>=0;r--){let o=Vt.get(e.childNodes[r]);o instanceof ie&&(n=o.domAtPos(o.length))}return n?new Te(n.node,n.offset,!0):t}nearest(t){for(let e=t;e;){let n=Vt.get(e);if(n&&n.rootView==this)return n;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let r=this.children[e];if(n<r.length||r instanceof ie)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,r=0;for(let o=this.length,u=this.children.length-1;u>=0;u--){let f=this.children[u],h=o-f.breakAfter,m=h-f.length;if(h<t)break;if(m<=t&&(m<t||f.covers(-1))&&(h>t||f.covers(1))&&(!n||f instanceof ie&&!(n instanceof ie&&e>=0)))n=f,r=m;else if(n&&m==t&&h==t&&f instanceof an&&Math.abs(e)<2){if(f.deco.startSide<0)break;u&&(n=null)}o=m}return n?n.coordsAt(t-r,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),r=this.children[e];if(!(r instanceof ie))return null;for(;r.children.length;){let{i:f,off:h}=r.childPos(n,1);for(;;f++){if(f==r.children.length)return null;if((r=r.children[f]).length)break}n=h}if(!(r instanceof wi))return null;let o=be(r.text,n);if(o==n)return null;let u=Tl(r.dom,n,o).getClientRects();for(let f=0;f<u.length;f++){let h=u[f];if(f==u.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:r}=t,o=this.view.contentDOM.clientWidth,u=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,f=-1,h=this.view.textDirection==Xt.LTR;for(let m=0,p=0;p<this.children.length;p++){let y=this.children[p],v=m+y.length;if(v>r)break;if(m>=n){let S=y.dom.getBoundingClientRect();if(e.push(S.height),u){let w=y.dom.lastChild,M=w?no(w):[];if(M.length){let k=M[M.length-1],R=h?k.right-S.left:S.right-k.left;R>f&&(f=R,this.minWidth=o,this.minWidthFrom=m,this.minWidthTo=v)}}}m=v+y.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return getComputedStyle(this.children[e].dom).direction=="rtl"?Xt.RTL:Xt.LTR}measureTextSize(){for(let o of this.children)if(o instanceof ie){let u=o.measureTextSize();if(u)return u}let t=document.createElement("div"),e,n,r;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let o=no(t.firstChild)[0];e=t.getBoundingClientRect().height,n=o?o.width/27:7,r=o?o.height:e,t.remove()}),{lineHeight:e,charWidth:n,textHeight:r}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new Nv(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,r=0;;r++){let o=r==e.viewports.length?null:e.viewports[r],u=o?o.from-1:this.length;if(u>n){let f=(e.lineBlockAt(u).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(ut.replace({widget:new hd(f),block:!0,inclusive:!0,isBlockGap:!0}).range(n,u))}if(!o)break;n=o.to+1}return ut.set(t)}updateDeco(){let t=1,e=this.view.state.facet(lo).map(o=>(this.dynamicDecorationMap[t++]=typeof o=="function")?o(this.view):o),n=!1,r=this.view.state.facet(lb).map((o,u)=>{let f=typeof o=="function";return f&&(n=!0),f?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[t++]=n,e.push(Dt.join(r))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let m=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=m.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let m of this.view.state.facet(eb))try{if(m(this.view,t.range,t))return!0}catch(p){je(this.view.state,p,"scroll handler")}let{range:e}=t,n=this.coordsAt(e.head,e.empty?e.assoc:e.head>e.anchor?-1:1),r;if(!n)return;!e.empty&&(r=this.coordsAt(e.anchor,e.anchor>e.head?-1:1))&&(n={left:Math.min(n.left,r.left),top:Math.min(n.top,r.top),right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)});let o=Jd(this.view),u={left:n.left-o.left,top:n.top-o.top,right:n.right+o.right,bottom:n.bottom+o.bottom},{offsetWidth:f,offsetHeight:h}=this.view.scrollDOM;Iw(this.view.scrollDOM,u,e.head<e.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,f),-f),Math.max(Math.min(t.yMargin,h),-h),this.view.textDirection==Xt.LTR)}}function SA(l){return l.node.nodeType==1&&l.node.firstChild&&(l.offset==0||l.node.childNodes[l.offset-1].contentEditable=="false")&&(l.offset==l.node.childNodes.length||l.node.childNodes[l.offset].contentEditable=="false")}function ob(l,t){let e=l.observer.selectionRange;if(!e.focusNode)return null;let n=Rv(e.focusNode,e.focusOffset),r=Bv(e.focusNode,e.focusOffset),o=n||r;if(r&&n&&r.node!=n.node){let f=Vt.get(r.node);if(!f||f instanceof wi&&f.text!=r.node.nodeValue)o=r;else if(l.docView.lastCompositionAfterCursor){let h=Vt.get(n.node);!h||h instanceof wi&&h.text!=n.node.nodeValue||(o=r)}}if(l.docView.lastCompositionAfterCursor=o!=n,!o)return null;let u=t-o.offset;return{from:u,to:u+o.node.nodeValue.length,node:o.node}}function xA(l,t,e){let n=ob(l,e);if(!n)return null;let{node:r,from:o,to:u}=n,f=r.nodeValue;if(/[\n\r]/.test(f)||l.state.doc.sliceString(n.from,n.to)!=f)return null;let h=t.invertedDesc,m=new mi(h.mapPos(o),h.mapPos(u),o,u),p=[];for(let y=r.parentNode;;y=y.parentNode){let v=Vt.get(y);if(v instanceof cn)p.push({node:y,deco:v.mark});else{if(v instanceof ie||y.nodeName=="DIV"&&y.parentNode==l.contentDOM)return{range:m,text:r,marks:p,line:y};if(y!=l.contentDOM)p.push({node:y,deco:new po({inclusive:!0,attributes:aA(y),tagName:y.tagName.toLowerCase()})});else return null}}}function wA(l,t){return l.nodeType!=1?0:(t&&l.childNodes[t-1].contentEditable=="false"?1:0)|(t<l.childNodes.length&&l.childNodes[t].contentEditable=="false"?2:0)}let AA=class{constructor(){this.changes=[]}compareRange(t,e){uu(t,e,this.changes)}comparePoint(t,e){uu(t,e,this.changes)}boundChange(t){uu(t,t,this.changes)}};function MA(l,t,e){let n=new AA;return Dt.compare(l,t,e,n),n.changes}function CA(l,t){for(let e=l;e&&e!=t;e=e.assignedSlot||e.parentNode)if(e.nodeType==1&&e.contentEditable=="false")return!0;return!1}function TA(l,t){let e=!1;return t&&l.iterChangedRanges((n,r)=>{n<t.to&&r>t.from&&(e=!0)}),e}function kA(l,t,e=1){let n=l.charCategorizer(t),r=l.doc.lineAt(t),o=t-r.from;if(r.length==0)return V.cursor(t);o==0?e=1:o==r.length&&(e=-1);let u=o,f=o;e<0?u=be(r.text,o,!1):f=be(r.text,o);let h=n(r.text.slice(u,f));for(;u>0;){let m=be(r.text,u,!1);if(n(r.text.slice(m,u))!=h)break;u=m}for(;f<r.length;){let m=be(r.text,f);if(n(r.text.slice(f,m))!=h)break;f=m}return V.range(u+r.from,f+r.from)}function DA(l,t){return t.left>l?t.left-l:Math.max(0,l-t.right)}function OA(l,t){return t.top>l?t.top-l:Math.max(0,l-t.bottom)}function Ch(l,t){return l.top<t.bottom-1&&l.bottom>t.top+1}function Yy(l,t){return t<l.top?{top:t,left:l.left,right:l.right,bottom:l.bottom}:l}function jy(l,t){return t>l.bottom?{top:l.top,left:l.left,right:l.right,bottom:t}:l}function yd(l,t,e){let n,r,o,u,f=!1,h,m,p,y;for(let w=l.firstChild;w;w=w.nextSibling){let M=no(w);for(let k=0;k<M.length;k++){let R=M[k];r&&Ch(r,R)&&(R=Yy(jy(R,r.bottom),r.top));let Y=DA(t,R),j=OA(e,R);if(Y==0&&j==0)return w.nodeType==3?Gy(w,t,e):yd(w,t,e);(!n||u>j||u==j&&o>Y)&&(n=w,r=R,o=Y,u=j,f=Y?t<R.left?k>0:k<M.length-1:!0),Y==0?e>R.bottom&&(!p||p.bottom<R.bottom)?(h=w,p=R):e<R.top&&(!y||y.top>R.top)&&(m=w,y=R):p&&Ch(p,R)?p=jy(p,R.bottom):y&&Ch(y,R)&&(y=Yy(y,R.top))}}if(p&&p.bottom>=e?(n=h,r=p):y&&y.top<=e&&(n=m,r=y),!n)return{node:l,offset:0};let v=Math.max(r.left,Math.min(r.right,t));if(n.nodeType==3)return Gy(n,v,e);if(f&&n.contentEditable!="false")return yd(n,v,e);let S=Array.prototype.indexOf.call(l.childNodes,n)+(t>=(r.left+r.right)/2?1:0);return{node:l,offset:S}}function Gy(l,t,e){let n=l.nodeValue.length,r=-1,o=1e9,u=0;for(let f=0;f<n;f++){let h=Tl(l,f,f+1).getClientRects();for(let m=0;m<h.length;m++){let p=h[m];if(p.top==p.bottom)continue;u||(u=t-p.left);let y=(p.top>e?p.top-e:e-p.bottom)-1;if(p.left-1<=t&&p.right+1>=t&&y<o){let v=t>=(p.left+p.right)/2,S=v;if((F.chrome||F.gecko)&&Tl(l,f).getBoundingClientRect().left==p.right&&(S=!v),y<=0)return{node:l,offset:f+(S?1:0)};r=f+(S?1:0),o=y}}}return{node:l,offset:r>-1?r:u>0?l.nodeValue.length:0}}function ab(l,t,e,n=-1){var r,o;let u=l.contentDOM.getBoundingClientRect(),f=u.top+l.viewState.paddingTop,h,{docHeight:m}=l.viewState,{x:p,y}=t,v=y-f;if(v<0)return 0;if(v>m)return l.state.doc.length;for(let K=l.viewState.heightOracle.textHeight/2,z=!1;h=l.elementAtHeight(v),h.type!=Be.Text;)for(;v=n>0?h.bottom+K:h.top-K,!(v>=0&&v<=m);){if(z)return e?null:0;z=!0,n=-n}y=f+v;let S=h.from;if(S<l.viewport.from)return l.viewport.from==0?0:e?null:Xy(l,u,h,p,y);if(S>l.viewport.to)return l.viewport.to==l.state.doc.length?l.state.doc.length:e?null:Xy(l,u,h,p,y);let w=l.dom.ownerDocument,M=l.root.elementFromPoint?l.root:w,k=M.elementFromPoint(p,y);k&&!l.contentDOM.contains(k)&&(k=null),k||(p=Math.max(u.left+1,Math.min(u.right-1,p)),k=M.elementFromPoint(p,y),k&&!l.contentDOM.contains(k)&&(k=null));let R,Y=-1;if(k&&((r=l.docView.nearest(k))===null||r===void 0?void 0:r.isEditable)!=!1){if(w.caretPositionFromPoint){let K=w.caretPositionFromPoint(p,y);K&&({offsetNode:R,offset:Y}=K)}else if(w.caretRangeFromPoint){let K=w.caretRangeFromPoint(p,y);K&&({startContainer:R,startOffset:Y}=K,(!l.contentDOM.contains(R)||F.safari&&EA(R,Y,p)||F.chrome&&RA(R,Y,p))&&(R=void 0))}R&&(Y=Math.min(ji(R),Y))}if(!R||!l.docView.dom.contains(R)){let K=ie.find(l.docView,S);if(!K)return v>h.top+h.height/2?h.to:h.from;({node:R,offset:Y}=yd(K.dom,p,y))}let j=l.docView.nearest(R);if(!j)return null;if(j.isWidget&&((o=j.dom)===null||o===void 0?void 0:o.nodeType)==1){let K=j.dom.getBoundingClientRect();return t.y<K.top||t.y<=K.bottom&&t.x<=(K.left+K.right)/2?j.posAtStart:j.posAtEnd}else return j.localPosFromDOM(R,Y)+j.posAtStart}function Xy(l,t,e,n,r){let o=Math.round((n-t.left)*l.defaultCharacterWidth);if(l.lineWrapping&&e.height>l.defaultLineHeight*1.5){let f=l.viewState.heightOracle.textHeight,h=Math.floor((r-e.top-(l.defaultLineHeight-f)*.5)/f);o+=h*l.viewState.heightOracle.lineLength}let u=l.state.sliceDoc(e.from,e.to);return e.from+nd(u,o,l.state.tabSize)}function EA(l,t,e){let n,r=l;if(l.nodeType!=3||t!=(n=l.nodeValue.length))return!1;for(;;){let o=r.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let u=r.parentNode;if(!u||u.nodeName=="DIV")break;r=u}}return Tl(l,n-1,n).getBoundingClientRect().right>e}function RA(l,t,e){if(t!=0)return!1;for(let r=l;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let n=l.nodeType==1?l.getBoundingClientRect():Tl(l,0,Math.max(l.nodeValue.length,1)).getBoundingClientRect();return e-n.left>5}function vd(l,t,e){let n=l.lineBlockAt(t);if(Array.isArray(n.type)){let r;for(let o of n.type){if(o.from>t)break;if(!(o.to<t)){if(o.from<t&&o.to>t)return o;(!r||o.type==Be.Text&&(r.type!=o.type||(e<0?o.from<t:o.to>t)))&&(r=o)}}return r||n}return n}function BA(l,t,e,n){let r=vd(l,t.head,t.assoc||-1),o=!n||r.type!=Be.Text||!(l.lineWrapping||r.widgetLineBreaks)?null:l.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head);if(o){let u=l.dom.getBoundingClientRect(),f=l.textDirectionAt(r.from),h=l.posAtCoords({x:e==(f==Xt.LTR)?u.right-1:u.left+1,y:(o.top+o.bottom)/2});if(h!=null)return V.cursor(h,e?-1:1)}return V.cursor(e?r.to:r.from,e?-1:1)}function Ky(l,t,e,n){let r=l.state.doc.lineAt(t.head),o=l.bidiSpans(r),u=l.textDirectionAt(r.from);for(let f=t,h=null;;){let m=yA(r,o,u,f,e),p=Qv;if(!m){if(r.number==(e?l.state.doc.lines:1))return f;p=`
`,r=l.state.doc.line(r.number+(e?1:-1)),o=l.bidiSpans(r),m=l.visualLineSide(r,!e)}if(h){if(!h(p))return f}else{if(!n)return m;h=n(p)}f=m}}function NA(l,t,e){let n=l.state.charCategorizer(t),r=n(e);return o=>{let u=n(o);return r==Zt.Space&&(r=u),r==u}}function LA(l,t,e,n){let r=t.head,o=e?1:-1;if(r==(e?l.state.doc.length:0))return V.cursor(r,t.assoc);let u=t.goalColumn,f,h=l.contentDOM.getBoundingClientRect(),m=l.coordsAtPos(r,t.assoc||-1),p=l.documentTop;if(m)u==null&&(u=m.left-h.left),f=o<0?m.top:m.bottom;else{let S=l.viewState.lineBlockAt(r);u==null&&(u=Math.min(h.right-h.left,l.defaultCharacterWidth*(r-S.from))),f=(o<0?S.top:S.bottom)+p}let y=h.left+u,v=n??l.viewState.heightOracle.textHeight>>1;for(let S=0;;S+=10){let w=f+(v+S)*o,M=ab(l,{x:y,y:w},!1,o);if(w<h.top||w>h.bottom||(o<0?M<r:M>r)){let k=l.docView.coordsForChar(M),R=!k||w<k.top?-1:1;return V.cursor(M,R,void 0,u)}}}function cu(l,t,e){for(;;){let n=0;for(let r of l)r.between(t-1,t+1,(o,u,f)=>{if(t>o&&t<u){let h=n||e||(t-o<u-t?-1:1);t=h<0?o:u,n=h}});if(!n)return t}}function Th(l,t,e){let n=cu(l.state.facet(Pd).map(r=>r(l)),e.from,t.head>e.from?-1:1);return n==e.from?e:V.cursor(n,n<e.from?1:-1)}const Gr="";class zA{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(kt.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=Gr}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let r=t;;){this.findPointBefore(n,r);let o=this.text.length;this.readNode(r);let u=r.nextSibling;if(u==e)break;let f=Vt.get(r),h=Vt.get(u);(f&&h?f.breakAfter:(f?f.breakAfter:vu(r))||vu(u)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>o)&&this.lineBreak(),r=u}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,u=1,f;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),u=this.lineSeparator.length):(f=r.exec(e))&&(o=f.index,u=f[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),u>1)for(let h of this.points)h.node==t&&h.pos>this.text.length&&(h.pos-=u-1);n=o+u}}readNode(t){if(t.cmIgnore)return;let e=Vt.get(t),n=e&&e.overrideDOMText;if(n!=null){this.findPointInside(t,n.length);for(let r=n.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(t.nodeType==3?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(HA(t,n.node,n.offset)?e:0))}}function HA(l,t,e){for(;;){if(!t||e<ji(t))return!1;if(t==l)return!0;e=Cl(t)+1,t=t.parentNode}}class Qy{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class _A{constructor(t,e,n,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:o,impreciseAnchor:u}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let f=o||u?[]:VA(t),h=new zA(f,t.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=YA(f,this.bounds.from)}else{let f=t.observer.selectionRange,h=o&&o.node==f.focusNode&&o.offset==f.focusOffset||!rd(t.contentDOM,f.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(f.focusNode,f.focusOffset),m=u&&u.node==f.anchorNode&&u.offset==f.anchorOffset||!rd(t.contentDOM,f.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(f.anchorNode,f.anchorOffset),p=t.viewport;if((F.ios||F.chrome)&&t.state.selection.main.empty&&h!=m&&(p.from>0||p.to<t.state.doc.length)){let y=Math.min(h,m),v=Math.max(h,m),S=p.from-y,w=p.to-v;(S==0||S==1||y==0)&&(w==0||w==-1||v==t.state.doc.length)&&(h=0,m=t.state.doc.length)}this.newSel=V.single(m,h)}}}function ub(l,t){let e,{newSel:n}=t,r=l.state.selection.main,o=l.inputState.lastKeyTime>Date.now()-100?l.inputState.lastKeyCode:-1;if(t.bounds){let{from:u,to:f}=t.bounds,h=r.from,m=null;(o===8||F.android&&t.text.length<f-u)&&(h=r.to,m="end");let p=qA(l.state.doc.sliceString(u,f,Gr),t.text,h-u,m);p&&(F.chrome&&o==13&&p.toB==p.from+2&&t.text.slice(p.from,p.toB)==Gr+Gr&&p.toB--,e={from:u+p.from,to:u+p.toA,insert:Ot.of(t.text.slice(p.from,p.toB).split(Gr))})}else n&&(!l.hasFocus&&l.state.facet(on)||n.main.eq(r))&&(n=null);if(!e&&!n)return!1;if(!e&&t.typeOver&&!r.empty&&n&&n.main.empty?e={from:r.from,to:r.to,insert:l.state.doc.slice(r.from,r.to)}:(F.mac||F.android)&&e&&e.from==e.to&&e.from==r.head-1&&/^\. ?$/.test(e.insert.toString())&&l.contentDOM.getAttribute("autocorrect")=="off"?(n&&e.insert.length==2&&(n=V.single(n.main.anchor-1,n.main.head-1)),e={from:e.from,to:e.to,insert:Ot.of([e.insert.toString().replace("."," ")])}):e&&e.from>=r.from&&e.to<=r.to&&(e.from!=r.from||e.to!=r.to)&&r.to-r.from-(e.to-e.from)<=4?e={from:r.from,to:r.to,insert:l.state.doc.slice(r.from,e.from).append(e.insert).append(l.state.doc.slice(e.to,r.to))}:F.chrome&&e&&e.from==e.to&&e.from==r.head&&e.insert.toString()==`
 `&&l.lineWrapping&&(n&&(n=V.single(n.main.anchor-1,n.main.head-1)),e={from:r.from,to:r.to,insert:Ot.of([" "])}),e)return Fd(l,e,n,o);if(n&&!n.main.eq(r)){let u=!1,f="select";return l.inputState.lastSelectionTime>Date.now()-50&&(l.inputState.lastSelectionOrigin=="select"&&(u=!0),f=l.inputState.lastSelectionOrigin),l.dispatch({selection:n,scrollIntoView:u,userEvent:f}),!0}else return!1}function Fd(l,t,e,n=-1){if(F.ios&&l.inputState.flushIOSKey(t))return!0;let r=l.state.selection.main;if(F.android&&(t.to==r.to&&(t.from==r.from||t.from==r.from-1&&l.state.sliceDoc(t.from,r.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&As(l.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&t.insert.length==0||n==8&&t.insert.length<t.to-t.from&&t.to>r.head)&&As(l.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&As(l.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();l.inputState.composing>=0&&l.inputState.composing++;let u,f=()=>u||(u=UA(l,t,e));return l.state.facet(Fv).some(h=>h(l,t.from,t.to,o,f))||l.dispatch(f()),!0}function UA(l,t,e){let n,r=l.state,o=r.selection.main;if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!e||e.main.empty&&e.main.from==t.from+t.insert.length)&&l.inputState.composing<0){let f=o.from<t.from?r.sliceDoc(o.from,t.from):"",h=o.to>t.to?r.sliceDoc(t.to,o.to):"";n=r.replaceSelection(l.state.toText(f+t.insert.sliceString(0,void 0,l.state.lineBreak)+h))}else{let f=r.changes(t),h=e&&e.main.to<=f.newLength?e.main:void 0;if(r.selection.ranges.length>1&&l.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let m=l.state.sliceDoc(t.from,t.to),p,y=e&&ob(l,e.main.head);if(y){let w=t.insert.length-(t.to-t.from);p={from:y.from,to:y.to-w}}else p=l.state.doc.lineAt(o.head);let v=o.to-t.to,S=o.to-o.from;n=r.changeByRange(w=>{if(w.from==o.from&&w.to==o.to)return{changes:f,range:h||w.map(f)};let M=w.to-v,k=M-m.length;if(w.to-w.from!=S||l.state.sliceDoc(k,M)!=m||w.to>=p.from&&w.from<=p.to)return{range:w};let R=r.changes({from:k,to:M,insert:t.insert}),Y=w.to-o.to;return{changes:R,range:h?V.range(Math.max(0,h.anchor+Y),Math.max(0,h.head+Y)):w.map(R)}})}else n={changes:f,selection:h&&r.selection.replaceRange(h)}}let u="input.type";return(l.composing||l.inputState.compositionPendingChange&&l.inputState.compositionEndedAt>Date.now()-50)&&(l.inputState.compositionPendingChange=!1,u+=".compose",l.inputState.compositionFirstChange&&(u+=".start",l.inputState.compositionFirstChange=!1)),r.update(n,{userEvent:u,scrollIntoView:!0})}function qA(l,t,e,n){let r=Math.min(l.length,t.length),o=0;for(;o<r&&l.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==r&&l.length==t.length)return null;let u=l.length,f=t.length;for(;u>0&&f>0&&l.charCodeAt(u-1)==t.charCodeAt(f-1);)u--,f--;if(n=="end"){let h=Math.max(0,o-Math.min(u,f));e-=u+h-o}if(u<o&&l.length<t.length){let h=e<=o&&e>=u?o-e:0;o-=h,f=o+(f-u),u=o}else if(f<o){let h=e<=o&&e>=f?o-e:0;o-=h,u=o+(u-f),f=o}return{from:o,toA:u,toB:f}}function VA(l){let t=[];if(l.root.activeElement!=l.contentDOM)return t;let{anchorNode:e,anchorOffset:n,focusNode:r,focusOffset:o}=l.observer.selectionRange;return e&&(t.push(new Qy(e,n)),(r!=e||o!=n)&&t.push(new Qy(r,o))),t}function YA(l,t){if(l.length==0)return null;let e=l[0].pos,n=l.length==2?l[1].pos:e;return e>-1&&n>-1?V.single(e+t,n+t):null}class jA{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,F.safari&&t.contentDOM.addEventListener("input",()=>null),F.gecko&&lM(t.contentDOM.ownerDocument)}handleEvent(t){!JA(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(t.type,t)):this.runHandlers(t.type,t))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let r of n.observers)r(this.view,e);for(let r of n.handlers){if(e.defaultPrevented)break;if(r(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=GA(t),n=this.handlers,r=this.view.contentDOM;for(let o in e)if(o!="scroll"){let u=!e[o].handlers.length,f=n[o];f&&u!=!f.handlers.length&&(r.removeEventListener(o,this.handleEvent),f=null),f||r.addEventListener(o,this.handleEvent,{passive:u})}for(let o in n)o!="scroll"&&!e[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&fb.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),F.android&&F.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return F.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((e=cb.find(n=>n.keyCode==t.keyCode))&&!t.ctrlKey||XA.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=e||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let e=this.pendingIOSKey;return!e||e.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,As(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:F.safari&&!F.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Zy(l,t){return(e,n)=>{try{return t.call(l,n,e)}catch(r){je(e.state,r)}}}function GA(l){let t=Object.create(null);function e(n){return t[n]||(t[n]={observers:[],handlers:[]})}for(let n of l){let r=n.spec,o=r&&r.plugin.domEventHandlers,u=r&&r.plugin.domEventObservers;if(o)for(let f in o){let h=o[f];h&&e(f).handlers.push(Zy(n.value,h))}if(u)for(let f in u){let h=u[f];h&&e(f).observers.push(Zy(n.value,h))}}for(let n in Ai)e(n).handlers.push(Ai[n]);for(let n in pi)e(n).observers.push(pi[n]);return t}const cb=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],XA="dthko",fb=[16,17,18,20,91,92,224,225],ja=6;function Ga(l){return Math.max(0,l)*.7+8}function KA(l,t){return Math.max(Math.abs(l.clientX-t.clientX),Math.abs(l.clientY-t.clientY))}class QA{constructor(t,e,n,r){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=$w(t.contentDOM),this.atoms=t.state.facet(Pd).map(u=>u(t));let o=t.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(kt.allowMultipleSelections)&&ZA(t,e),this.dragging=PA(t,e)&&mb(e)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&KA(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let e=0,n=0,r=0,o=0,u=this.view.win.innerWidth,f=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:u}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:f}=this.scrollParents.y.getBoundingClientRect());let h=Jd(this.view);t.clientX-h.left<=r+ja?e=-Ga(r-t.clientX):t.clientX+h.right>=u-ja&&(e=Ga(t.clientX-u)),t.clientY-h.top<=o+ja?n=-Ga(o-t.clientY):t.clientY+h.bottom>=f-ja&&(n=Ga(t.clientY-f)),this.setScrollSpeed(e,n)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let r=t.ranges[n],o=null;if(r.empty){let u=cu(this.atoms,r.from,0);u!=r.from&&(o=V.cursor(u,-1))}else{let u=cu(this.atoms,r.from,-1),f=cu(this.atoms,r.to,1);(u!=r.from||f!=r.to)&&(o=V.range(r.from==r.anchor?u:f,r.from==r.head?u:f))}o&&(e||(e=t.ranges.slice()),e[n]=o)}return e?V.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));(this.mustSelect||!n.eq(e.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function ZA(l,t){let e=l.state.facet(Zv);return e.length?e[0](t):F.mac?t.metaKey:t.ctrlKey}function WA(l,t){let e=l.state.facet(Wv);return e.length?e[0](t):F.mac?!t.altKey:!t.ctrlKey}function PA(l,t){let{main:e}=l.state.selection;if(e.empty)return!1;let n=io(l.root);if(!n||n.rangeCount==0)return!0;let r=n.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let u=r[o];if(u.left<=t.clientX&&u.right>=t.clientX&&u.top<=t.clientY&&u.bottom>=t.clientY)return!0}return!1}function JA(l,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target,n;e!=l.contentDOM;e=e.parentNode)if(!e||e.nodeType==11||(n=Vt.get(e))&&n.ignoreEvent(t))return!1;return!0}const Ai=Object.create(null),pi=Object.create(null),hb=F.ie&&F.ie_version<15||F.ios&&F.webkit_version<604;function FA(l){let t=l.dom.parentNode;if(!t)return;let e=t.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus(),setTimeout(()=>{l.focus(),e.remove(),db(l,e.value)},50)}function ju(l,t,e){for(let n of l.facet(t))e=n(e,l);return e}function db(l,t){t=ju(l.state,Qd,t);let{state:e}=l,n,r=1,o=e.toText(t),u=o.lines==e.selection.ranges.length;if(bd!=null&&e.selection.ranges.every(h=>h.empty)&&bd==o.toString()){let h=-1;n=e.changeByRange(m=>{let p=e.doc.lineAt(m.from);if(p.from==h)return{range:m};h=p.from;let y=e.toText((u?o.line(r++).text:t)+e.lineBreak);return{changes:{from:p.from,insert:y},range:V.cursor(m.from+y.length)}})}else u?n=e.changeByRange(h=>{let m=o.line(r++);return{changes:{from:h.from,to:h.to,insert:m.text},range:V.cursor(h.from+m.length)}}):n=e.replaceSelection(o);l.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}pi.scroll=l=>{l.inputState.lastScrollTop=l.scrollDOM.scrollTop,l.inputState.lastScrollLeft=l.scrollDOM.scrollLeft};Ai.keydown=(l,t)=>(l.inputState.setSelectionOrigin("select"),t.keyCode==27&&l.inputState.tabFocusMode!=0&&(l.inputState.tabFocusMode=Date.now()+2e3),!1);pi.touchstart=(l,t)=>{l.inputState.lastTouchTime=Date.now(),l.inputState.setSelectionOrigin("select.pointer")};pi.touchmove=l=>{l.inputState.setSelectionOrigin("select.pointer")};Ai.mousedown=(l,t)=>{if(l.observer.flush(),l.inputState.lastTouchTime>Date.now()-2e3)return!1;let e=null;for(let n of l.state.facet(Pv))if(e=n(l,t),e)break;if(!e&&t.button==0&&(e=tM(l,t)),e){let n=!l.hasFocus;l.inputState.startMouseSelection(new QA(l,t,e,n)),n&&l.observer.ignore(()=>{Dv(l.contentDOM);let o=l.root.activeElement;o&&!o.contains(l.contentDOM)&&o.blur()});let r=l.inputState.mouseSelection;if(r)return r.start(t),r.dragging===!1}return!1};function Wy(l,t,e,n){if(n==1)return V.cursor(t,e);if(n==2)return kA(l.state,t,e);{let r=ie.find(l.docView,t),o=l.state.doc.lineAt(r?r.posAtEnd:t),u=r?r.posAtStart:o.from,f=r?r.posAtEnd:o.to;return f<l.state.doc.length&&f==o.to&&f++,V.range(u,f)}}let Py=(l,t,e)=>t>=e.top&&t<=e.bottom&&l>=e.left&&l<=e.right;function IA(l,t,e,n){let r=ie.find(l.docView,t);if(!r)return 1;let o=t-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let u=r.coordsAt(o,-1);if(u&&Py(e,n,u))return-1;let f=r.coordsAt(o,1);return f&&Py(e,n,f)?1:u&&u.bottom>=n?-1:1}function Jy(l,t){let e=l.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:e,bias:IA(l,e,t.clientX,t.clientY)}}const $A=F.ie&&F.ie_version<=11;let Fy=null,Iy=0,$y=0;function mb(l){if(!$A)return l.detail;let t=Fy,e=$y;return Fy=l,$y=Date.now(),Iy=!t||e>Date.now()-400&&Math.abs(t.clientX-l.clientX)<2&&Math.abs(t.clientY-l.clientY)<2?(Iy+1)%3:1}function tM(l,t){let e=Jy(l,t),n=mb(t),r=l.state.selection;return{update(o){o.docChanged&&(e.pos=o.changes.mapPos(e.pos),r=r.map(o.changes))},get(o,u,f){let h=Jy(l,o),m,p=Wy(l,h.pos,h.bias,n);if(e.pos!=h.pos&&!u){let y=Wy(l,e.pos,e.bias,n),v=Math.min(y.from,p.from),S=Math.max(y.to,p.to);p=v<p.from?V.range(v,S):V.range(S,v)}return u?r.replaceRange(r.main.extend(p.from,p.to)):f&&n==1&&r.ranges.length>1&&(m=eM(r,h.pos))?m:f?r.addRange(p):V.create([p])}}}function eM(l,t){for(let e=0;e<l.ranges.length;e++){let{from:n,to:r}=l.ranges[e];if(n<=t&&r>=t)return V.create(l.ranges.slice(0,e).concat(l.ranges.slice(e+1)),l.mainIndex==e?0:l.mainIndex-(l.mainIndex>e?1:0))}return null}Ai.dragstart=(l,t)=>{let{selection:{main:e}}=l.state;if(t.target.draggable){let r=l.docView.nearest(t.target);if(r&&r.isWidget){let o=r.posAtStart,u=o+r.length;(o>=e.to||u<=e.from)&&(e=V.range(o,u))}}let{inputState:n}=l;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=e,t.dataTransfer&&(t.dataTransfer.setData("Text",ju(l.state,Zd,l.state.sliceDoc(e.from,e.to))),t.dataTransfer.effectAllowed="copyMove"),!1};Ai.dragend=l=>(l.inputState.draggedContent=null,!1);function t1(l,t,e,n){if(e=ju(l.state,Qd,e),!e)return;let r=l.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:o}=l.inputState,u=n&&o&&WA(l,t)?{from:o.from,to:o.to}:null,f={from:r,insert:e},h=l.state.changes(u?[u,f]:f);l.focus(),l.dispatch({changes:h,selection:{anchor:h.mapPos(r,-1),head:h.mapPos(r,1)},userEvent:u?"move.drop":"input.drop"}),l.inputState.draggedContent=null}Ai.drop=(l,t)=>{if(!t.dataTransfer)return!1;if(l.state.readOnly)return!0;let e=t.dataTransfer.files;if(e&&e.length){let n=Array(e.length),r=0,o=()=>{++r==e.length&&t1(l,t,n.filter(u=>u!=null).join(l.state.lineBreak),!1)};for(let u=0;u<e.length;u++){let f=new FileReader;f.onerror=o,f.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(f.result)||(n[u]=f.result),o()},f.readAsText(e[u])}return!0}else{let n=t.dataTransfer.getData("Text");if(n)return t1(l,t,n,!0),!0}return!1};Ai.paste=(l,t)=>{if(l.state.readOnly)return!0;l.observer.flush();let e=hb?null:t.clipboardData;return e?(db(l,e.getData("text/plain")||e.getData("text/uri-list")),!0):(FA(l),!1)};function iM(l,t){let e=l.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=t,n.focus(),n.selectionEnd=t.length,n.selectionStart=0,setTimeout(()=>{n.remove(),l.focus()},50)}function nM(l){let t=[],e=[],n=!1;for(let r of l.selection.ranges)r.empty||(t.push(l.sliceDoc(r.from,r.to)),e.push(r));if(!t.length){let r=-1;for(let{from:o}of l.selection.ranges){let u=l.doc.lineAt(o);u.number>r&&(t.push(u.text),e.push({from:u.from,to:Math.min(l.doc.length,u.to+1)})),r=u.number}n=!0}return{text:ju(l,Zd,t.join(l.lineBreak)),ranges:e,linewise:n}}let bd=null;Ai.copy=Ai.cut=(l,t)=>{let{text:e,ranges:n,linewise:r}=nM(l.state);if(!e&&!r)return!1;bd=r?e:null,t.type=="cut"&&!l.state.readOnly&&l.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let o=hb?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",e),!0):(iM(l,e),!1)};const gb=hn.define();function pb(l,t){let e=[];for(let n of l.facet(Iv)){let r=n(l,t);r&&e.push(r)}return e.length?l.update({effects:e,annotations:gb.of(!0)}):null}function yb(l){setTimeout(()=>{let t=l.hasFocus;if(t!=l.inputState.notifiedFocused){let e=pb(l.state,t);e?l.dispatch(e):l.update([])}},10)}pi.focus=l=>{l.inputState.lastFocusTime=Date.now(),!l.scrollDOM.scrollTop&&(l.inputState.lastScrollTop||l.inputState.lastScrollLeft)&&(l.scrollDOM.scrollTop=l.inputState.lastScrollTop,l.scrollDOM.scrollLeft=l.inputState.lastScrollLeft),yb(l)};pi.blur=l=>{l.observer.clearSelectionRange(),yb(l)};pi.compositionstart=pi.compositionupdate=l=>{l.observer.editContext||(l.inputState.compositionFirstChange==null&&(l.inputState.compositionFirstChange=!0),l.inputState.composing<0&&(l.inputState.composing=0))};pi.compositionend=l=>{l.observer.editContext||(l.inputState.composing=-1,l.inputState.compositionEndedAt=Date.now(),l.inputState.compositionPendingKey=!0,l.inputState.compositionPendingChange=l.observer.pendingRecords().length>0,l.inputState.compositionFirstChange=null,F.chrome&&F.android?l.observer.flushSoon():l.inputState.compositionPendingChange?Promise.resolve().then(()=>l.observer.flush()):setTimeout(()=>{l.inputState.composing<0&&l.docView.hasComposition&&l.update([])},50))};pi.contextmenu=l=>{l.inputState.lastContextMenu=Date.now()};Ai.beforeinput=(l,t)=>{var e,n;if(t.inputType=="insertReplacementText"&&l.observer.editContext){let o=(e=t.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain"),u=t.getTargetRanges();if(o&&u.length){let f=u[0],h=l.posAtDOM(f.startContainer,f.startOffset),m=l.posAtDOM(f.endContainer,f.endOffset);return Fd(l,{from:h,to:m,insert:l.state.toText(o)},null),!0}}let r;if(F.chrome&&F.android&&(r=cb.find(o=>o.inputType==t.inputType))&&(l.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var u;(((u=window.visualViewport)===null||u===void 0?void 0:u.height)||0)>o+10&&l.hasFocus&&(l.contentDOM.blur(),l.focus())},100)}return F.ios&&t.inputType=="deleteContentForward"&&l.observer.flushSoon(),F.safari&&t.inputType=="insertText"&&l.inputState.composing>=0&&setTimeout(()=>pi.compositionend(l,t),20),!1};const e1=new Set;function lM(l){e1.has(l)||(e1.add(l),l.addEventListener("copy",()=>{}),l.addEventListener("cut",()=>{}))}const i1=["pre-wrap","normal","pre-line","break-spaces"];let Es=!1;function n1(){Es=!1}class sM{constructor(t){this.lineWrapping=t,this.doc=Ot.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return i1.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let r=t[n];r<0?n++:this.heightSamples[Math.floor(r*10)]||(e=!0,this.heightSamples[Math.floor(r*10)]=!0)}return e}refresh(t,e,n,r,o,u){let f=i1.indexOf(t)>-1,h=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=f;if(this.lineWrapping=f,this.lineHeight=e,this.charWidth=n,this.textHeight=r,this.lineLength=o,h){this.heightSamples={};for(let m=0;m<u.length;m++){let p=u[m];p<0?m++:this.heightSamples[Math.floor(p*10)]=!0}}return h}}class rM{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class _i{constructor(t,e,n,r,o){this.from=t,this.length=e,this.top=n,this.height=r,this._content=o}get type(){return typeof this._content=="number"?Be.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Wn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new _i(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var jt=function(l){return l[l.ByPos=0]="ByPos",l[l.ByHeight=1]="ByHeight",l[l.ByPosNoHeight=2]="ByPosNoHeight",l}(jt||(jt={}));const fu=.001;class Ne{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>fu&&(Es=!0),this.height=t)}replace(t,e,n){return Ne.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,r){let o=this,u=n.doc;for(let f=r.length-1;f>=0;f--){let{fromA:h,toA:m,fromB:p,toB:y}=r[f],v=o.lineAt(h,jt.ByPosNoHeight,n.setDoc(e),0,0),S=v.to>=m?v:o.lineAt(m,jt.ByPosNoHeight,n,0,0);for(y+=S.to-m,m=S.to;f>0&&v.from<=r[f-1].toA;)h=r[f-1].fromA,p=r[f-1].fromB,f--,h<v.from&&(v=o.lineAt(h,jt.ByPosNoHeight,n,0,0));p+=v.from-h,h=v.from;let w=Id.build(n.setDoc(u),t,p,y);o=xu(o,o.replace(h,m,w))}return o.updateHeight(n,0)}static empty(){return new ti(0,0)}static of(t){if(t.length==1)return t[0];let e=0,n=t.length,r=0,o=0;for(;;)if(e==n)if(r>o*2){let f=t[e-1];f.break?t.splice(--e,1,f.left,null,f.right):t.splice(--e,1,f.left,f.right),n+=1+f.break,r-=f.size}else if(o>r*2){let f=t[n];f.break?t.splice(n,1,f.left,null,f.right):t.splice(n,1,f.left,f.right),n+=2+f.break,o-=f.size}else break;else if(r<o){let f=t[e++];f&&(r+=f.size)}else{let f=t[--n];f&&(o+=f.size)}let u=0;return t[e-1]==null?(u=1,e--):t[e]==null&&(u=1,n++),new oM(Ne.of(t.slice(0,e)),u,Ne.of(t.slice(n)))}}function xu(l,t){return l==t?l:(l.constructor!=t.constructor&&(Es=!0),t)}Ne.prototype.size=1;class vb extends Ne{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,r){return new _i(r,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,r,o){return this.blockAt(0,n,r,o)}forEachLine(t,e,n,r,o,u){t<=o+this.length&&e>=o&&u(this.blockAt(0,n,r,o))}updateHeight(t,e=0,n=!1,r){return r&&r.from<=e&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ti extends vb{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,r){return new _i(r,this.length,n,this.height,this.breaks)}replace(t,e,n){let r=n[0];return n.length==1&&(r instanceof ti||r instanceof pe&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof pe?r=new ti(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ne.of(n)}updateHeight(t,e=0,n=!1,r){return r&&r.from<=e&&r.more?this.setHeight(r.heights[r.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class pe extends Ne{constructor(t){super(t,0)}heightMetrics(t,e){let n=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,o=r-n+1,u,f=0;if(t.lineWrapping){let h=Math.min(this.height,t.lineHeight*o);u=h/o,this.length>o+1&&(f=(this.height-h)/(this.length-o-1))}else u=this.height/o;return{firstLine:n,lastLine:r,perLine:u,perChar:f}}blockAt(t,e,n,r){let{firstLine:o,lastLine:u,perLine:f,perChar:h}=this.heightMetrics(e,r);if(e.lineWrapping){let m=r+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),p=e.doc.lineAt(m),y=f+p.length*h,v=Math.max(n,t-y/2);return new _i(p.from,p.length,v,y,0)}else{let m=Math.max(0,Math.min(u-o,Math.floor((t-n)/f))),{from:p,length:y}=e.doc.line(o+m);return new _i(p,y,n+f*m,f,0)}}lineAt(t,e,n,r,o){if(e==jt.ByHeight)return this.blockAt(t,n,r,o);if(e==jt.ByPosNoHeight){let{from:S,to:w}=n.doc.lineAt(t);return new _i(S,w-S,0,0,0)}let{firstLine:u,perLine:f,perChar:h}=this.heightMetrics(n,o),m=n.doc.lineAt(t),p=f+m.length*h,y=m.number-u,v=r+f*y+h*(m.from-o-y);return new _i(m.from,m.length,Math.max(r,Math.min(v,r+this.height-p)),p,0)}forEachLine(t,e,n,r,o,u){t=Math.max(t,o),e=Math.min(e,o+this.length);let{firstLine:f,perLine:h,perChar:m}=this.heightMetrics(n,o);for(let p=t,y=r;p<=e;){let v=n.doc.lineAt(p);if(p==t){let w=v.number-f;y+=h*w+m*(t-o-w)}let S=h+m*v.length;u(new _i(v.from,v.length,y,S,0)),y+=S,p=v.to+1}}replace(t,e,n){let r=this.length-e;if(r>0){let o=n[n.length-1];o instanceof pe?n[n.length-1]=new pe(o.length+r):n.push(null,new pe(r-1))}if(t>0){let o=n[0];o instanceof pe?n[0]=new pe(t+o.length):n.unshift(new pe(t-1),null)}return Ne.of(n)}decomposeLeft(t,e){e.push(new pe(t-1),null)}decomposeRight(t,e){e.push(null,new pe(this.length-t-1))}updateHeight(t,e=0,n=!1,r){let o=e+this.length;if(r&&r.from<=e+this.length&&r.more){let u=[],f=Math.max(e,r.from),h=-1;for(r.from>e&&u.push(new pe(r.from-e-1).updateHeight(t,e));f<=o&&r.more;){let p=t.doc.lineAt(f).length;u.length&&u.push(null);let y=r.heights[r.index++];h==-1?h=y:Math.abs(y-h)>=fu&&(h=-2);let v=new ti(p,y);v.outdated=!1,u.push(v),f+=p+1}f<=o&&u.push(null,new pe(o-f).updateHeight(t,f));let m=Ne.of(u);return(h<0||Math.abs(m.height-this.height)>=fu||Math.abs(h-this.heightMetrics(t,e).perLine)>=fu)&&(Es=!0),xu(this,m)}else(n||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class oM extends Ne{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return this.flags&1}blockAt(t,e,n,r){let o=n+this.left.height;return t<o?this.left.blockAt(t,e,n,r):this.right.blockAt(t,e,o,r+this.left.length+this.break)}lineAt(t,e,n,r,o){let u=r+this.left.height,f=o+this.left.length+this.break,h=e==jt.ByHeight?t<u:t<f,m=h?this.left.lineAt(t,e,n,r,o):this.right.lineAt(t,e,n,u,f);if(this.break||(h?m.to<f:m.from>f))return m;let p=e==jt.ByPosNoHeight?jt.ByPosNoHeight:jt.ByPos;return h?m.join(this.right.lineAt(f,p,n,u,f)):this.left.lineAt(f,p,n,r,o).join(m)}forEachLine(t,e,n,r,o,u){let f=r+this.left.height,h=o+this.left.length+this.break;if(this.break)t<h&&this.left.forEachLine(t,e,n,r,o,u),e>=h&&this.right.forEachLine(t,e,n,f,h,u);else{let m=this.lineAt(h,jt.ByPos,n,r,o);t<m.from&&this.left.forEachLine(t,m.from-1,n,r,o,u),m.to>=t&&m.from<=e&&u(m),e>m.to&&this.right.forEachLine(m.to+1,e,n,f,h,u)}}replace(t,e,n){let r=this.left.length+this.break;if(e<r)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,e-r,n));let o=[];t>0&&this.decomposeLeft(t,o);let u=o.length;for(let f of n)o.push(f);if(t>0&&l1(o,u-1),e<this.length){let f=o.length;this.decomposeRight(e,o),l1(o,f)}return Ne.of(o)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,r=n+this.break;if(t>=r)return this.right.decomposeRight(t-r,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<r&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?Ne.of(this.break?[t,null,e]:[t,e]):(this.left=xu(this.left,t),this.right=xu(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,r){let{left:o,right:u}=this,f=e+o.length+this.break,h=null;return r&&r.from<=e+o.length&&r.more?h=o=o.updateHeight(t,e,n,r):o.updateHeight(t,e,n),r&&r.from<=f+u.length&&r.more?h=u=u.updateHeight(t,f,n,r):u.updateHeight(t,f,n),h?this.balanced(o,u):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function l1(l,t){let e,n;l[t]==null&&(e=l[t-1])instanceof pe&&(n=l[t+1])instanceof pe&&l.splice(t-1,3,new pe(e.length+1+n.length))}const aM=5;class Id{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let n=Math.min(e,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof ti?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new ti(n-this.pos,-1)),this.writtenTo=n,e>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,o=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let u=e-t;n.block?this.addBlock(new vb(u,r,n)):(u||o||r>=aM)&&this.addLineDeco(r,o,u)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new ti(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new pe(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof ti)return t;let e=new ti(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,t),r.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(e instanceof ti)&&!this.isCovered?this.nodes.push(new ti(0,-1)):(this.writtenTo<this.pos||e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=t;for(let r of this.nodes)r instanceof ti&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(t,e,n,r){let o=new Id(n,t);return Dt.spans(e,n,r,o,0),o.finish(n)}}function uM(l,t,e){let n=new cM;return Dt.compare(l,t,e,n,0),n.changes}class cM{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,r){(t<e||n&&n.heightRelevant||r&&r.heightRelevant)&&uu(t,e,this.changes,5)}}function fM(l,t){let e=l.getBoundingClientRect(),n=l.ownerDocument,r=n.defaultView||window,o=Math.max(0,e.left),u=Math.min(r.innerWidth,e.right),f=Math.max(0,e.top),h=Math.min(r.innerHeight,e.bottom);for(let m=l.parentNode;m&&m!=n.body;)if(m.nodeType==1){let p=m,y=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&y.overflow!="visible"){let v=p.getBoundingClientRect();o=Math.max(o,v.left),u=Math.min(u,v.right),f=Math.max(f,v.top),h=Math.min(m==l.parentNode?r.innerHeight:h,v.bottom)}m=y.position=="absolute"||y.position=="fixed"?p.offsetParent:p.parentNode}else if(m.nodeType==11)m=m.host;else break;return{left:o-e.left,right:Math.max(o,u)-e.left,top:f-(e.top+t),bottom:Math.max(f,h)-(e.top+t)}}function hM(l){let t=l.getBoundingClientRect(),e=l.ownerDocument.defaultView||window;return t.left<e.innerWidth&&t.right>0&&t.top<e.innerHeight&&t.bottom>0}function dM(l,t){let e=l.getBoundingClientRect();return{left:0,right:e.right-e.left,top:t,bottom:e.bottom-(e.top+t)}}class kh{constructor(t,e,n,r){this.from=t,this.to=e,this.size=n,this.displaySize=r}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],o=e[n];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(t,e){return ut.replace({widget:new mM(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class mM extends Fn{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class s1{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=r1,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Xt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(Wd).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new sM(e),this.stateDeco=t.facet(lo).filter(n=>typeof n!="function"),this.heightMap=Ne.empty().applyChanges(this.stateDeco,Ot.empty,this.heightOracle.setDoc(t.doc),[new mi(0,0,0,t.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ut.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let r=n?e.head:e.anchor;if(!t.some(({from:o,to:u})=>r>=o&&r<=u)){let{from:o,to:u}=this.lineBlockAt(r);t.push(new Xa(o,u))}}return this.viewports=t.sort((n,r)=>n.from-r.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?r1:new $d(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(Xr(t,this.scaler))})}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(lo).filter(p=>typeof p!="function");let r=t.changedRanges,o=mi.extendWithRanges(r,uM(n,this.stateDeco,t?t.changes:re.empty(this.state.doc.length))),u=this.heightMap.height,f=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);n1(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=u||Es)&&(t.flags|=2),f?(this.scrollAnchorPos=t.changes.mapPos(f.from,-1),this.scrollAnchorHeight=f.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=u);let h=o.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<h.from||e.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,e));let m=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,t.flags|=this.updateForViewport(),(m||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(tb)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),r=this.heightOracle,o=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Xt.RTL:Xt.LTR;let u=this.heightOracle.mustRefreshForWrapping(o),f=e.getBoundingClientRect(),h=u||this.mustMeasureContent||this.contentDOMHeight!=f.height;this.contentDOMHeight=f.height,this.mustMeasureContent=!1;let m=0,p=0;if(f.width&&f.height){let{scaleX:K,scaleY:z}=kv(e,f);(K>.005&&Math.abs(this.scaleX-K)>.005||z>.005&&Math.abs(this.scaleY-z)>.005)&&(this.scaleX=K,this.scaleY=z,m|=16,u=h=!0)}let y=(parseInt(n.paddingTop)||0)*this.scaleY,v=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=y||this.paddingBottom!=v)&&(this.paddingTop=y,this.paddingBottom=v,m|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(r.lineWrapping&&(h=!0),this.editorWidth=t.scrollDOM.clientWidth,m|=16);let S=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=S&&(this.scrollAnchorHeight=-1,this.scrollTop=S),this.scrolledToBottom=Ev(t.scrollDOM);let w=(this.printing?dM:fM)(e,this.paddingTop),M=w.top-this.pixelViewport.top,k=w.bottom-this.pixelViewport.bottom;this.pixelViewport=w;let R=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(R!=this.inView&&(this.inView=R,R&&(h=!0)),!this.inView&&!this.scrollTarget&&!hM(t.dom))return 0;let Y=f.width;if((this.contentDOMWidth!=Y||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=f.width,this.editorHeight=t.scrollDOM.clientHeight,m|=16),h){let K=t.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(K)&&(u=!0),u||r.lineWrapping&&Math.abs(Y-this.contentDOMWidth)>r.charWidth){let{lineHeight:z,charWidth:G,textHeight:X}=t.docView.measureTextSize();u=z>0&&r.refresh(o,z,G,X,Y/G,K),u&&(t.docView.minWidth=0,m|=16)}M>0&&k>0?p=Math.max(M,k):M<0&&k<0&&(p=Math.min(M,k)),n1();for(let z of this.viewports){let G=z.from==this.viewport.from?K:t.docView.measureVisibleLineHeights(z);this.heightMap=(u?Ne.empty().applyChanges(this.stateDeco,Ot.empty,this.heightOracle,[new mi(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(r,0,u,new rM(z.from,G))}Es&&(m|=2)}let j=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return j&&(m&2&&(m|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),m|=this.updateForViewport()),(m&2||j)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(u?[]:this.lineGaps,t)),m|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),m}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:u,visibleBottom:f}=this,h=new Xa(r.lineAt(u-n*1e3,jt.ByHeight,o,0,0).from,r.lineAt(f+(1-n)*1e3,jt.ByHeight,o,0,0).to);if(e){let{head:m}=e.range;if(m<h.from||m>h.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),y=r.lineAt(m,jt.ByPos,o,0,0),v;e.y=="center"?v=(y.top+y.bottom)/2-p/2:e.y=="start"||e.y=="nearest"&&m<h.from?v=y.top:v=y.bottom-p,h=new Xa(r.lineAt(v-1e3/2,jt.ByHeight,o,0,0).from,r.lineAt(v+p+1e3/2,jt.ByHeight,o,0,0).to)}}return h}mapViewport(t,e){let n=e.mapPos(t.from,-1),r=e.mapPos(t.to,1);return new Xa(this.heightMap.lineAt(n,jt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,jt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,jt.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(e,jt.ByPos,this.heightOracle,0,0),{visibleTop:u,visibleBottom:f}=this;return(t==0||r<=u-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||o>=f+Math.max(10,Math.min(n,250)))&&r>u-2*1e3&&o<f+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let r of t)e.touchesRange(r.from,r.to)||n.push(new kh(e.mapPos(r.from),e.mapPos(r.to),r.size,r.displaySize));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,o=r>>1,u=r<<1;if(this.defaultTextDirection!=Xt.LTR&&!n)return[];let f=[],h=(p,y,v,S)=>{if(y-p<o)return;let w=this.state.selection.main,M=[w.from];w.empty||M.push(w.to);for(let R of M)if(R>p&&R<y){h(p,R-10,v,S),h(R+10,y,v,S);return}let k=pM(t,R=>R.from>=v.from&&R.to<=v.to&&Math.abs(R.from-p)<o&&Math.abs(R.to-y)<o&&!M.some(Y=>R.from<Y&&R.to>Y));if(!k){if(y<v.to&&e&&n&&e.visibleRanges.some(j=>j.from<=y&&j.to>=y)){let j=e.moveToLineBoundary(V.cursor(y),!1,!0).head;j>p&&(y=j)}let R=this.gapSize(v,p,y,S),Y=n||R<2e6?R:2e6;k=new kh(p,y,R,Y)}f.push(k)},m=p=>{if(p.length<u||p.type!=Be.Text)return;let y=gM(p.from,p.to,this.stateDeco);if(y.total<u)return;let v=this.scrollTarget?this.scrollTarget.range.head:null,S,w;if(n){let M=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,k,R;if(v!=null){let Y=Qa(y,v),j=((this.visibleBottom-this.visibleTop)/2+M)/p.height;k=Y-j,R=Y+j}else k=(this.visibleTop-p.top-M)/p.height,R=(this.visibleBottom-p.top+M)/p.height;S=Ka(y,k),w=Ka(y,R)}else{let M=y.total*this.heightOracle.charWidth,k=r*this.heightOracle.charWidth,R=0;if(M>2e6)for(let G of t)G.from>=p.from&&G.from<p.to&&G.size!=G.displaySize&&G.from*this.heightOracle.charWidth+R<this.pixelViewport.left&&(R=G.size-G.displaySize);let Y=this.pixelViewport.left+R,j=this.pixelViewport.right+R,K,z;if(v!=null){let G=Qa(y,v),X=((j-Y)/2+k)/M;K=G-X,z=G+X}else K=(Y-k)/M,z=(j+k)/M;S=Ka(y,K),w=Ka(y,z)}S>p.from&&h(p.from,S,p,y),w<p.to&&h(w,p.to,p,y)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(m):m(p);return f}gapSize(t,e,n,r){let o=Qa(r,n)-Qa(r,e);return this.heightOracle.lineWrapping?t.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(t){kh.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=ut.set(t.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Dt.spans(e,this.viewport.from,this.viewport.to,{span(o,u){n.push({from:o,to:u})},point(){}},20);let r=0;if(n.length!=this.visibleRanges.length)r=12;else for(let o=0;o<n.length&&!(r&8);o++){let u=this.visibleRanges[o],f=n[o];(u.from!=f.from||u.to!=f.to)&&(r|=4,t&&t.mapPos(u.from,-1)==f.from&&t.mapPos(u.to,1)==f.to||(r|=8))}return this.visibleRanges=n,r}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||Xr(this.heightMap.lineAt(t,jt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(e=>e.top<=t&&e.bottom>=t)||Xr(this.heightMap.lineAt(this.scaler.fromDOM(t),jt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return Xr(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Xa{constructor(t,e){this.from=t,this.to=e}}function gM(l,t,e){let n=[],r=l,o=0;return Dt.spans(e,l,t,{span(){},point(u,f){u>r&&(n.push({from:r,to:u}),o+=u-r),r=f}},20),r<t&&(n.push({from:r,to:t}),o+=t-r),{total:o,ranges:n}}function Ka({total:l,ranges:t},e){if(e<=0)return t[0].from;if(e>=1)return t[t.length-1].to;let n=Math.floor(l*e);for(let r=0;;r++){let{from:o,to:u}=t[r],f=u-o;if(n<=f)return o+n;n-=f}}function Qa(l,t){let e=0;for(let{from:n,to:r}of l.ranges){if(t<=r){e+=t-n;break}e+=r-n}return e/l.total}function pM(l,t){for(let e of l)if(t(e))return e}const r1={toDOM(l){return l},fromDOM(l){return l},scale:1,eq(l){return l==this}};class $d{constructor(t,e,n){let r=0,o=0,u=0;this.viewports=n.map(({from:f,to:h})=>{let m=e.lineAt(f,jt.ByPos,t,0,0).top,p=e.lineAt(h,jt.ByPos,t,0,0).bottom;return r+=p-m,{from:f,to:h,top:m,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(e.height-r);for(let f of this.viewports)f.domTop=u+(f.top-o)*this.scale,u=f.domBottom=f.domTop+(f.bottom-f.top),o=f.bottom}toDOM(t){for(let e=0,n=0,r=0;;e++){let o=e<this.viewports.length?this.viewports[e]:null;if(!o||t<o.top)return r+(t-n)*this.scale;if(t<=o.bottom)return o.domTop+(t-o.top);n=o.bottom,r=o.domBottom}}fromDOM(t){for(let e=0,n=0,r=0;;e++){let o=e<this.viewports.length?this.viewports[e]:null;if(!o||t<o.domTop)return n+(t-r)/this.scale;if(t<=o.domBottom)return o.top+(t-o.domTop);n=o.bottom,r=o.domBottom}}eq(t){return t instanceof $d?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((e,n)=>e.from==t.viewports[n].from&&e.to==t.viewports[n].to):!1}}function Xr(l,t){if(t.scale==1)return l;let e=t.toDOM(l.top),n=t.toDOM(l.bottom);return new _i(l.from,l.length,e,n-e,Array.isArray(l._content)?l._content.map(r=>Xr(r,t)):l._content)}const Za=$.define({combine:l=>l.join(" ")}),Sd=$.define({combine:l=>l.indexOf(!0)>-1}),xd=Qn.newName(),bb=Qn.newName(),Sb=Qn.newName(),xb={"&light":"."+bb,"&dark":"."+Sb};function wd(l,t,e){return new Qn(t,{finish(n){return/&/.test(n)?n.replace(/&\w*/,r=>{if(r=="&")return l;if(!e||!e[r])throw new RangeError(`Unsupported selector: ${r}`);return e[r]}):l+" "+n}})}const yM=wd("."+xd,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},xb),vM={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Dh=F.ie&&F.ie_version<=11;class bM{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new tA,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(e=>{for(let n of e)this.queue.push(n);(F.ie&&F.ie_version<=11||F.ios&&t.composing)&&e.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&F.android&&t.constructor.EDIT_CONTEXT!==!1&&!(F.chrome&&F.chrome_version<126)&&(this.editContext=new xM(t),t.state.facet(on)&&(t.contentDOM.editContext=this.editContext.editContext)),Dh&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var e;((e=this.view.docView)===null||e===void 0?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,n)=>e!=t[n]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(on)?n.root.activeElement!=this.dom:!au(this.dom,r))return;let o=r.anchorNode&&n.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(t)){e||(this.selectionChanged=!1);return}(F.ie&&F.ie_version<=11||F.android&&F.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Pr(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=io(t.root);if(!e)return!1;let n=F.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&SM(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let r=au(this.dom,n);return r&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&iA(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(n.nodeType==1)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=e)n.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,vM),Dh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Dh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&As(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,r=!1;for(let o of t){let u=this.readMutation(o);u&&(u.typeOver&&(r=!0),e==-1?{from:e,to:n}=u:(e=Math.min(u.from,e),n=Math.max(u.to,n)))}return{from:e,to:n,typeOver:r}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),r=this.selectionChanged&&au(this.dom,this.selectionRange);if(t<0&&!r)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new _A(this.view,t,e,n);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,r=ub(this.view,e);return this.view.state==n&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty(t.type=="attributes"),t.type=="attributes"&&(e.flags|=4),t.type=="childList"){let n=o1(e,t.previousSibling||t.target.previousSibling,-1),r=o1(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:r?e.posBefore(r):e.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(on)!=t.state.facet(on)&&(t.view.contentDOM.editContext=t.state.facet(on)?this.editContext.editContext:null))}destroy(){var t,e,n;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(e=this.gapIntersection)===null||e===void 0||e.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function o1(l,t,e){for(;t;){let n=Vt.get(t);if(n&&n.parent==l)return n;let r=t.parentNode;t=r!=l.dom?r:e>0?t.nextSibling:t.previousSibling}return null}function a1(l,t){let e=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset,u=l.docView.domAtPos(l.state.selection.main.anchor);return Pr(u.node,u.offset,r,o)&&([e,n,r,o]=[r,o,e,n]),{anchorNode:e,anchorOffset:n,focusNode:r,focusOffset:o}}function SM(l,t){if(t.getComposedRanges){let r=t.getComposedRanges(l.root)[0];if(r)return a1(l,r)}let e=null;function n(r){r.preventDefault(),r.stopImmediatePropagation(),e=r.getTargetRanges()[0]}return l.contentDOM.addEventListener("beforeinput",n,!0),l.dom.ownerDocument.execCommand("indent"),l.contentDOM.removeEventListener("beforeinput",n,!0),e?a1(l,e):null}class xM{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=n=>{let r=t.state.selection.main,{anchor:o,head:u}=r,f=this.toEditorPos(n.updateRangeStart),h=this.toEditorPos(n.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:f,drifted:!1});let m={from:f,to:h,insert:Ot.of(n.text.split(`
`))};if(m.from==this.from&&o<this.from?m.from=o:m.to==this.to&&o>this.to&&(m.to=o),m.from==m.to&&!m.insert.length){let p=V.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));p.main.eq(r)||t.dispatch({selection:p,userEvent:"select"});return}if((F.mac||F.android)&&m.from==u-1&&/^\. ?$/.test(n.text)&&t.contentDOM.getAttribute("autocorrect")=="off"&&(m={from:f,to:h,insert:Ot.of([n.text.replace("."," ")])}),this.pendingContextChange=m,!t.state.readOnly){let p=this.to-this.from+(m.to-m.from+m.insert.length);Fd(t,m,V.single(this.toEditorPos(n.selectionStart,p),this.toEditorPos(n.selectionEnd,p)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))},this.handlers.characterboundsupdate=n=>{let r=[],o=null;for(let u=this.toEditorPos(n.rangeStart),f=this.toEditorPos(n.rangeEnd);u<f;u++){let h=t.coordsForChar(u);o=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||o||new DOMRect,r.push(o)}e.updateCharacterBounds(n.rangeStart,r)},this.handlers.textformatupdate=n=>{let r=[];for(let o of n.getTextFormats()){let u=o.underlineStyle,f=o.underlineThickness;if(u!="None"&&f!="None"){let h=this.toEditorPos(o.rangeStart),m=this.toEditorPos(o.rangeEnd);if(h<m){let p=`text-decoration: underline ${u=="Dashed"?"dashed ":u=="Squiggle"?"wavy ":""}${f=="Thin"?1:2}px`;r.push(ut.mark({attributes:{style:p}}).range(h,m))}}}t.dispatch({effects:ib.of(ut.set(r))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(t.state)}};for(let n in this.handlers)e.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let r=io(n.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,n=!1,r=this.pendingContextChange;return t.changes.iterChanges((o,u,f,h,m)=>{if(n)return;let p=m.length-(u-o);if(r&&u>=r.to)if(r.from==o&&r.to==u&&r.insert.eq(m)){r=this.pendingContextChange=null,e+=p,this.to+=p;return}else r=null,this.revertPending(t.state);if(o+=e,u+=e,u<=this.from)this.from+=p,this.to+=p;else if(o<this.to){if(o<this.from||u>this.to||this.to-this.from+m.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(u),m.toString()),this.to+=p}e+=p}),r&&!n&&this.revertPending(t.state),!n}update(t){let e=this.pendingContextChange,n=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(n.from,n.to)&&t.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.reset(t.state)):(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),r=this.toContextPos(e.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(n,r)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>1e4*3)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let n=this.composing;return n&&n.drifted?n.editorBase+(t-n.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class I{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(r=>r.forEach(o=>n(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=t.root||eA(t.parent)||document,this.viewState=new s1(t.state||kt.create(t)),t.scrollTo&&t.scrollTo.is(Ya)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(bs).map(r=>new Mh(r));for(let r of this.plugins)r.update(this);this.observer=new bM(this),this.inputState=new jA(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Vy(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((e=document.fonts)===null||e===void 0)&&e.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...t){let e=t.length==1&&t[0]instanceof oe?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,n=!1,r,o=this.state;for(let v of t){if(v.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=v.state}if(this.destroyed){this.viewState.state=o;return}let u=this.hasFocus,f=0,h=null;t.some(v=>v.annotation(gb))?(this.inputState.notifiedFocused=u,f=1):u!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=u,h=pb(o,u),h||(f=1));let m=this.observer.delayedAndroidKey,p=null;if(m?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(p=null)):this.observer.clear(),o.facet(kt.phrases)!=this.state.facet(kt.phrases))return this.setState(o);r=Su.create(this,o,t),r.flags|=f;let y=this.viewState.scrollTarget;try{this.updateState=2;for(let v of t){if(y&&(y=y.map(v.changes)),v.scrollIntoView){let{main:S}=v.state.selection;y=new Ms(S.empty?S:V.cursor(S.head,S.head>S.anchor?-1:1))}for(let S of v.effects)S.is(Ya)&&(y=S.value.clip(this.state))}this.viewState.update(r,y),this.bidiCache=wu.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),e=this.docView.update(r),this.state.facet(jr)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(e,t.some(v=>v.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Za)!=r.state.facet(Za)&&(this.viewState.mustMeasureContent=!0),(e||n||y||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),e&&this.docViewUpdate(),!r.empty)for(let v of this.state.facet(pd))try{v(r)}catch(S){je(this.state,S,"update listener")}(h||p)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),p&&!ub(this,p)&&m.force&&As(this.contentDOM,m.key,m.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let e=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new s1(t),this.plugins=t.facet(bs).map(n=>new Mh(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new Vy(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(bs),n=t.state.facet(bs);if(e!=n){let r=[];for(let o of n){let u=e.indexOf(o);if(u<0)r.push(new Mh(o));else{let f=this.plugins[u];f.mustUpdate=t,r.push(f)}}for(let o of this.plugins)o.mustUpdate!=t&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=t;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(n){je(this.state,n,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,r=n.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:u}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(u=-1),this.viewState.scrollAnchorHeight=-1;try{for(let f=0;;f++){if(u<0)if(Ev(n))o=-1,u=this.viewState.heightMap.height;else{let S=this.viewState.scrollAnchorAt(r);o=S.from,u=S.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(f>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let m=[];h&4||([this.measureRequests,m]=[m,this.measureRequests]);let p=m.map(S=>{try{return S.read(this)}catch(w){return je(this.state,w),u1}}),y=Su.create(this,this.state,[]),v=!1;y.flags|=h,e?e.flags|=h:e=y,this.updateState=2,y.empty||(this.updatePlugins(y),this.inputState.update(y),this.updateAttrs(),v=this.docView.update(y),v&&this.docViewUpdate());for(let S=0;S<m.length;S++)if(p[S]!=u1)try{let w=m[S];w.write&&w.write(p[S],this)}catch(w){je(this.state,w)}if(v&&this.docView.updateSelection(!0),!y.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=-1;continue}else{let w=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-u;if(w>1||w<-1){r=r+w,n.scrollTop=r/this.scaleY,u=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let f of this.state.facet(pd))f(e)}get themeClasses(){return xd+" "+(this.state.facet(Sd)?Sb:bb)+" "+this.state.facet(Za)}updateAttrs(){let t=c1(this,nb,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(on)?"true":"false",class:"cm-content",style:`${F.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),c1(this,Wd,e);let n=this.observer.ignore(()=>{let r=fd(this.contentDOM,this.contentAttrs,e),o=fd(this.dom,this.editorAttrs,t);return r||o});return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let r of n.effects)if(r.is(I.announce)){e&&(this.announceDOM.textContent=""),e=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(jr);let t=this.state.facet(I.cspNonce);Qn.mount(this.root,this.styleModules.concat(yM).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key){this.measureRequests[e]=t;return}}this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(e===void 0||e&&e.plugin!=t)&&this.pluginMap.set(t,e=this.plugins.find(n=>n.plugin==t)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return Th(this,t,Ky(this,t,e,n))}moveByGroup(t,e){return Th(this,t,Ky(this,t,e,n=>NA(this,t.head,n)))}visualLineSide(t,e){let n=this.bidiSpans(t),r=this.textDirectionAt(t.from),o=n[e?n.length-1:0];return V.cursor(o.side(e,r)+t.from,o.forward(!e,r)?1:-1)}moveToLineBoundary(t,e,n=!0){return BA(this,t,e,n)}moveVertically(t,e,n){return Th(this,t,LA(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),ab(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(t),o=this.bidiSpans(r),u=o[Gn.find(o,t-r.from,-1,e)];return Vu(n,u.dir==Xt.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet($v)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>wM)return Kv(t.length);let e=this.textDirectionAt(t.from),n;for(let o of this.bidiCache)if(o.from==t.from&&o.dir==e&&(o.fresh||Xv(o.isolates,n=qy(this,t))))return o.order;n||(n=qy(this,t));let r=pA(t.text,e,n);return this.bidiCache.push(new wu(t.from,t.to,e,n,!0,r)),r}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||F.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Dv(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return Ya.of(new Ms(typeof t=="number"?V.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return Ya.of(new Ms(V.cursor(n.from),"start","start",n.top-t,e,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return ne.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return ne.define(()=>({}),{eventObservers:t})}static theme(t,e){let n=Qn.newName(),r=[Za.of(n),jr.of(wd(`.${n}`,t))];return e&&e.dark&&r.push(Sd.of(!0)),r}static baseTheme(t){return Ol.lowest(jr.of(wd("."+xd,t,xb)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),r=n&&Vt.get(n)||Vt.get(t);return((e=r?.rootView)===null||e===void 0?void 0:e.view)||null}}I.styleModule=jr;I.inputHandler=Fv;I.clipboardInputFilter=Qd;I.clipboardOutputFilter=Zd;I.scrollHandler=eb;I.focusChangeEffect=Iv;I.perLineTextDirection=$v;I.exceptionSink=Jv;I.updateListener=pd;I.editable=on;I.mouseSelectionStyle=Pv;I.dragMovesSelection=Wv;I.clickAddsSelectionRange=Zv;I.decorations=lo;I.outerDecorations=lb;I.atomicRanges=Pd;I.bidiIsolatedRanges=sb;I.scrollMargins=rb;I.darkTheme=Sd;I.cspNonce=$.define({combine:l=>l.length?l[0]:""});I.contentAttributes=Wd;I.editorAttributes=nb;I.lineWrapping=I.contentAttributes.of({class:"cm-lineWrapping"});I.announce=pt.define();const wM=4096,u1={};class wu{constructor(t,e,n,r,o,u){this.from=t,this.to=e,this.dir=n,this.isolates=r,this.fresh=o,this.order=u}static update(t,e){if(e.empty&&!t.some(o=>o.fresh))return t;let n=[],r=t.length?t[t.length-1].dir:Xt.LTR;for(let o=Math.max(0,t.length-10);o<t.length;o++){let u=t[o];u.dir==r&&!e.touchesRange(u.from,u.to)&&n.push(new wu(e.mapPos(u.from,1),e.mapPos(u.to,-1),u.dir,u.isolates,!1,u.order))}return n}}function c1(l,t,e){for(let n=l.state.facet(t),r=n.length-1;r>=0;r--){let o=n[r],u=typeof o=="function"?o(l):o;u&&cd(u,e)}return e}const AM=F.mac?"mac":F.windows?"win":F.linux?"linux":"key";function MM(l,t){const e=l.split(/-(?!$)/);let n=e[e.length-1];n=="Space"&&(n=" ");let r,o,u,f;for(let h=0;h<e.length-1;++h){const m=e[h];if(/^(cmd|meta|m)$/i.test(m))f=!0;else if(/^a(lt)?$/i.test(m))r=!0;else if(/^(c|ctrl|control)$/i.test(m))o=!0;else if(/^s(hift)?$/i.test(m))u=!0;else if(/^mod$/i.test(m))t=="mac"?f=!0:o=!0;else throw new Error("Unrecognized modifier name: "+m)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),f&&(n="Meta-"+n),u&&(n="Shift-"+n),n}function Wa(l,t,e){return t.altKey&&(l="Alt-"+l),t.ctrlKey&&(l="Ctrl-"+l),t.metaKey&&(l="Meta-"+l),e!==!1&&t.shiftKey&&(l="Shift-"+l),l}const CM=Ol.default(I.domEventHandlers({keydown(l,t){return Ab(wb(t.state),l,t,"editor")}})),tm=$.define({enables:CM}),f1=new WeakMap;function wb(l){let t=l.facet(tm),e=f1.get(t);return e||f1.set(t,e=DM(t.reduce((n,r)=>n.concat(r),[]))),e}function TM(l,t,e){return Ab(wb(l.state),t,l,e)}let Vn=null;const kM=4e3;function DM(l,t=AM){let e=Object.create(null),n=Object.create(null),r=(u,f)=>{let h=n[u];if(h==null)n[u]=f;else if(h!=f)throw new Error("Key binding "+u+" is used both as a regular binding and as a multi-stroke prefix")},o=(u,f,h,m,p)=>{var y,v;let S=e[u]||(e[u]=Object.create(null)),w=f.split(/ (?!$)/).map(R=>MM(R,t));for(let R=1;R<w.length;R++){let Y=w.slice(0,R).join(" ");r(Y,!0),S[Y]||(S[Y]={preventDefault:!0,stopPropagation:!1,run:[j=>{let K=Vn={view:j,prefix:Y,scope:u};return setTimeout(()=>{Vn==K&&(Vn=null)},kM),!0}]})}let M=w.join(" ");r(M,!1);let k=S[M]||(S[M]={preventDefault:!1,stopPropagation:!1,run:((v=(y=S._any)===null||y===void 0?void 0:y.run)===null||v===void 0?void 0:v.slice())||[]});h&&k.run.push(h),m&&(k.preventDefault=!0),p&&(k.stopPropagation=!0)};for(let u of l){let f=u.scope?u.scope.split(" "):["editor"];if(u.any)for(let m of f){let p=e[m]||(e[m]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:y}=u;for(let v in p)p[v].run.push(S=>y(S,Ad))}let h=u[t]||u.key;if(h)for(let m of f)o(m,h,u.run,u.preventDefault,u.stopPropagation),u.shift&&o(m,"Shift-"+h,u.shift,u.preventDefault,u.stopPropagation)}return e}let Ad=null;function Ab(l,t,e,n){Ad=t;let r=Jw(t),o=qe(r,0),u=Hi(o)==r.length&&r!=" ",f="",h=!1,m=!1,p=!1;Vn&&Vn.view==e&&Vn.scope==n&&(f=Vn.prefix+" ",fb.indexOf(t.keyCode)<0&&(m=!0,Vn=null));let y=new Set,v=k=>{if(k){for(let R of k.run)if(!y.has(R)&&(y.add(R),R(e)))return k.stopPropagation&&(p=!0),!0;k.preventDefault&&(k.stopPropagation&&(p=!0),m=!0)}return!1},S=l[n],w,M;return S&&(v(S[f+Wa(r,t,!u)])?h=!0:u&&(t.altKey||t.metaKey||t.ctrlKey)&&!(F.windows&&t.ctrlKey&&t.altKey)&&(w=Zn[t.keyCode])&&w!=r?(v(S[f+Wa(w,t,!0)])||t.shiftKey&&(M=eo[t.keyCode])!=r&&M!=w&&v(S[f+Wa(M,t,!1)]))&&(h=!0):u&&t.shiftKey&&v(S[f+Wa(r,t,!0)])&&(h=!0),!h&&v(S._any)&&(h=!0)),m&&(h=!0),h&&p&&t.stopPropagation(),Ad=null,h}class vo{constructor(t,e,n,r,o){this.className=t,this.left=e,this.top=n,this.width=r,this.height=o}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,n){if(n.empty){let r=t.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let o=Mb(t);return[new vo(e,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return OM(t,e,n)}}function Mb(l){let t=l.scrollDOM.getBoundingClientRect();return{left:(l.textDirection==Xt.LTR?t.left:t.right-l.scrollDOM.clientWidth*l.scaleX)-l.scrollDOM.scrollLeft*l.scaleX,top:t.top-l.scrollDOM.scrollTop*l.scaleY}}function h1(l,t,e,n){let r=l.coordsAtPos(t,e*2);if(!r)return n;let o=l.dom.getBoundingClientRect(),u=(r.top+r.bottom)/2,f=l.posAtCoords({x:o.left+1,y:u}),h=l.posAtCoords({x:o.right-1,y:u});return f==null||h==null?n:{from:Math.max(n.from,Math.min(f,h)),to:Math.min(n.to,Math.max(f,h))}}function OM(l,t,e){if(e.to<=l.viewport.from||e.from>=l.viewport.to)return[];let n=Math.max(e.from,l.viewport.from),r=Math.min(e.to,l.viewport.to),o=l.textDirection==Xt.LTR,u=l.contentDOM,f=u.getBoundingClientRect(),h=Mb(l),m=u.querySelector(".cm-line"),p=m&&window.getComputedStyle(m),y=f.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),v=f.right-(p?parseInt(p.paddingRight):0),S=vd(l,n,1),w=vd(l,r,-1),M=S.type==Be.Text?S:null,k=w.type==Be.Text?w:null;if(M&&(l.lineWrapping||S.widgetLineBreaks)&&(M=h1(l,n,1,M)),k&&(l.lineWrapping||w.widgetLineBreaks)&&(k=h1(l,r,-1,k)),M&&k&&M.from==k.from&&M.to==k.to)return Y(j(e.from,e.to,M));{let z=M?j(e.from,null,M):K(S,!1),G=k?j(null,e.to,k):K(w,!0),X=[];return(M||S).to<(k||w).from-(M&&k?1:0)||S.widgetLineBreaks>1&&z.bottom+l.defaultLineHeight/2<G.top?X.push(R(y,z.bottom,v,G.top)):z.bottom<G.top&&l.elementAtHeight((z.bottom+G.top)/2).type==Be.Text&&(z.bottom=G.top=(z.bottom+G.top)/2),Y(z).concat(X).concat(Y(G))}function R(z,G,X,st){return new vo(t,z-h.left,G-h.top,X-z,st-G)}function Y({top:z,bottom:G,horizontal:X}){let st=[];for(let ht=0;ht<X.length;ht+=2)st.push(R(X[ht],z,X[ht+1],G));return st}function j(z,G,X){let st=1e9,ht=-1e9,Ct=[];function ft(yt,mt,L,Q,it){let dt=l.coordsAtPos(yt,yt==X.to?-2:2),C=l.coordsAtPos(L,L==X.from?2:-2);!dt||!C||(st=Math.min(dt.top,C.top,st),ht=Math.max(dt.bottom,C.bottom,ht),it==Xt.LTR?Ct.push(o&&mt?y:dt.left,o&&Q?v:C.right):Ct.push(!o&&Q?y:C.left,!o&&mt?v:dt.right))}let tt=z??X.from,xt=G??X.to;for(let yt of l.visibleRanges)if(yt.to>tt&&yt.from<xt)for(let mt=Math.max(yt.from,tt),L=Math.min(yt.to,xt);;){let Q=l.state.doc.lineAt(mt);for(let it of l.bidiSpans(Q)){let dt=it.from+Q.from,C=it.to+Q.from;if(dt>=L)break;C>mt&&ft(Math.max(dt,mt),z==null&&dt<=tt,Math.min(C,L),G==null&&C>=xt,it.dir)}if(mt=Q.to+1,mt>=L)break}return Ct.length==0&&ft(tt,z==null,xt,G==null,l.textDirection),{top:st,bottom:ht,horizontal:Ct}}function K(z,G){let X=f.top+(G?z.top:z.bottom);return{top:X,bottom:X,horizontal:[]}}}function EM(l,t){return l.constructor==t.constructor&&l.eq(t)}class RM{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(hu)!=t.state.facet(hu)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){this.layer.updateOnDocViewUpdate!==!1&&t.requestMeasure(this.measureReq)}setOrder(t){let e=0,n=t.facet(hu);for(;e<n.length&&n[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:e}=this.view;(t!=this.scaleX||e!=this.scaleY)&&(this.scaleX=t,this.scaleY=e,this.dom.style.transform=`scale(${1/t}, ${1/e})`)}draw(t){if(t.length!=this.drawn.length||t.some((e,n)=>!EM(e,this.drawn[n]))){let e=this.dom.firstChild,n=0;for(let r of t)r.update&&e&&r.constructor&&this.drawn[n].constructor&&r.update(e,this.drawn[n])?(e=e.nextSibling,n++):this.dom.insertBefore(r.draw(),e);for(;e;){let r=e.nextSibling;e.remove(),e=r}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const hu=$.define();function Cb(l){return[ne.define(t=>new RM(t,l)),hu.of(l)]}const so=$.define({combine(l){return Gi(l,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})}});function BM(l={}){return[so.of(l),NM,LM,zM,tb.of(!0)]}function Tb(l){return l.startState.facet(so)!=l.state.facet(so)}const NM=Cb({above:!0,markers(l){let{state:t}=l,e=t.facet(so),n=[];for(let r of t.selection.ranges){let o=r==t.selection.main;if(r.empty||e.drawRangeCursor){let u=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",f=r.empty?r:V.cursor(r.head,r.head>r.anchor?-1:1);for(let h of vo.forRange(l,u,f))n.push(h)}}return n},update(l,t){l.transactions.some(n=>n.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let e=Tb(l);return e&&d1(l.state,t),l.docChanged||l.selectionSet||e},mount(l,t){d1(t.state,l)},class:"cm-cursorLayer"});function d1(l,t){t.style.animationDuration=l.facet(so).cursorBlinkRate+"ms"}const LM=Cb({above:!1,markers(l){return l.state.selection.ranges.map(t=>t.empty?[]:vo.forRange(l,"cm-selectionBackground",t)).reduce((t,e)=>t.concat(e))},update(l,t){return l.docChanged||l.selectionSet||l.viewportChanged||Tb(l)},class:"cm-selectionLayer"}),zM=Ol.highest(I.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),kb=pt.define({map(l,t){return l==null?null:t.mapPos(l)}}),Kr=Se.define({create(){return null},update(l,t){return l!=null&&(l=t.changes.mapPos(l)),t.effects.reduce((e,n)=>n.is(kb)?n.value:e,l)}}),HM=ne.fromClass(class{constructor(l){this.view=l,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(l){var t;let e=l.state.field(Kr);e==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(l.startState.field(Kr)!=e||l.docChanged||l.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:l}=this,t=l.state.field(Kr),e=t!=null&&l.coordsAtPos(t);if(!e)return null;let n=l.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+l.scrollDOM.scrollLeft*l.scaleX,top:e.top-n.top+l.scrollDOM.scrollTop*l.scaleY,height:e.bottom-e.top}}drawCursor(l){if(this.cursor){let{scaleX:t,scaleY:e}=this.view;l?(this.cursor.style.left=l.left/t+"px",this.cursor.style.top=l.top/e+"px",this.cursor.style.height=l.height/e+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(l){this.view.state.field(Kr)!=l&&this.view.dispatch({effects:kb.of(l)})}},{eventObservers:{dragover(l){this.setDropPos(this.view.posAtCoords({x:l.clientX,y:l.clientY}))},dragleave(l){(l.target==this.view.contentDOM||!this.view.contentDOM.contains(l.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function _M(){return[Kr,HM]}function m1(l,t,e,n,r){t.lastIndex=0;for(let o=l.iterRange(e,n),u=e,f;!o.next().done;u+=o.value.length)if(!o.lineBreak)for(;f=t.exec(o.value);)r(u+f.index,f)}function UM(l,t){let e=l.visibleRanges;if(e.length==1&&e[0].from==l.viewport.from&&e[0].to==l.viewport.to)return e;let n=[];for(let{from:r,to:o}of e)r=Math.max(l.state.doc.lineAt(r).from,r-t),o=Math.min(l.state.doc.lineAt(o).to,o+t),n.length&&n[n.length-1].to>=r?n[n.length-1].to=o:n.push({from:r,to:o});return n}class qM{constructor(t){const{regexp:e,decoration:n,decorate:r,boundary:o,maxLength:u=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,r)this.addMatch=(f,h,m,p)=>r(p,m,m+f[0].length,f,h);else if(typeof n=="function")this.addMatch=(f,h,m,p)=>{let y=n(f,h,m);y&&p(m,m+f[0].length,y)};else if(n)this.addMatch=(f,h,m,p)=>p(m,m+f[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=u}createDeco(t){let e=new un,n=e.add.bind(e);for(let{from:r,to:o}of UM(t,this.maxLength))m1(t.state.doc,this.regexp,r,o,(u,f)=>this.addMatch(f,t,u,n));return e.finish()}updateDeco(t,e){let n=1e9,r=-1;return t.docChanged&&t.changes.iterChanges((o,u,f,h)=>{h>=t.view.viewport.from&&f<=t.view.viewport.to&&(n=Math.min(f,n),r=Math.max(h,r))}),t.viewportMoved||r-n>1e3?this.createDeco(t.view):r>-1?this.updateRange(t.view,e.map(t.changes),n,r):e}updateRange(t,e,n,r){for(let o of t.visibleRanges){let u=Math.max(o.from,n),f=Math.min(o.to,r);if(f>=u){let h=t.state.doc.lineAt(u),m=h.to<f?t.state.doc.lineAt(f):h,p=Math.max(o.from,h.from),y=Math.min(o.to,m.to);if(this.boundary){for(;u>h.from;u--)if(this.boundary.test(h.text[u-1-h.from])){p=u;break}for(;f<m.to;f++)if(this.boundary.test(m.text[f-m.from])){y=f;break}}let v=[],S,w=(M,k,R)=>v.push(R.range(M,k));if(h==m)for(this.regexp.lastIndex=p-h.from;(S=this.regexp.exec(h.text))&&S.index<y-h.from;)this.addMatch(S,t,S.index+h.from,w);else m1(t.state.doc,this.regexp,p,y,(M,k)=>this.addMatch(k,t,M,w));e=e.update({filterFrom:p,filterTo:y,filter:(M,k)=>M<p||k>y,add:v})}}return e}}const Md=/x/.unicode!=null?"gu":"g",VM=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Md),YM={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Oh=null;function jM(){var l;if(Oh==null&&typeof document<"u"&&document.body){let t=document.body.style;Oh=((l=t.tabSize)!==null&&l!==void 0?l:t.MozTabSize)!=null}return Oh||!1}const du=$.define({combine(l){let t=Gi(l,{render:null,specialChars:VM,addSpecialChars:null});return(t.replaceTabs=!jM())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,Md)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Md)),t}});function GM(l={}){return[du.of(l),XM()]}let g1=null;function XM(){return g1||(g1=ne.fromClass(class{constructor(l){this.view=l,this.decorations=ut.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(l.state.facet(du)),this.decorations=this.decorator.createDeco(l)}makeDecorator(l){return new qM({regexp:l.specialChars,decoration:(t,e,n)=>{let{doc:r}=e.state,o=qe(t[0],0);if(o==9){let u=r.lineAt(n),f=e.state.tabSize,h=Ls(u.text,f,n-u.from);return ut.replace({widget:new WM((f-h%f)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=ut.replace({widget:new ZM(l,o)}))},boundary:l.replaceTabs?void 0:/[^]/})}update(l){let t=l.state.facet(du);l.startState.facet(du)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(l.view)):this.decorations=this.decorator.updateDeco(l,this.decorations)}},{decorations:l=>l.decorations}))}const KM="";function QM(l){return l>=32?KM:l==10?"":String.fromCharCode(9216+l)}class ZM extends Fn{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=QM(this.code),n=t.state.phrase("Control character")+" "+(YM[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,e);if(r)return r;let o=document.createElement("span");return o.textContent=e,o.title=n,o.setAttribute("aria-label",n),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class WM extends Fn{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function PM(){return FM}const JM=ut.line({class:"cm-activeLine"}),FM=ne.fromClass(class{constructor(l){this.decorations=this.getDeco(l)}update(l){(l.docChanged||l.selectionSet)&&(this.decorations=this.getDeco(l.view))}getDeco(l){let t=-1,e=[];for(let n of l.state.selection.ranges){let r=l.lineBlockAt(n.head);r.from>t&&(e.push(JM.range(r.from)),t=r.from)}return ut.set(e)}},{decorations:l=>l.decorations}),Cd=2e3;function IM(l,t,e){let n=Math.min(t.line,e.line),r=Math.max(t.line,e.line),o=[];if(t.off>Cd||e.off>Cd||t.col<0||e.col<0){let u=Math.min(t.off,e.off),f=Math.max(t.off,e.off);for(let h=n;h<=r;h++){let m=l.doc.line(h);m.length<=f&&o.push(V.range(m.from+u,m.to+f))}}else{let u=Math.min(t.col,e.col),f=Math.max(t.col,e.col);for(let h=n;h<=r;h++){let m=l.doc.line(h),p=nd(m.text,u,l.tabSize,!0);if(p<0)o.push(V.cursor(m.to));else{let y=nd(m.text,f,l.tabSize);o.push(V.range(m.from+p,m.from+y))}}}return o}function $M(l,t){let e=l.coordsAtPos(l.viewport.from);return e?Math.round(Math.abs((e.left-t)/l.defaultCharacterWidth)):-1}function p1(l,t){let e=l.posAtCoords({x:t.clientX,y:t.clientY},!1),n=l.state.doc.lineAt(e),r=e-n.from,o=r>Cd?-1:r==n.length?$M(l,t.clientX):Ls(n.text,l.state.tabSize,e-n.from);return{line:n.number,col:o,off:r}}function tC(l,t){let e=p1(l,t),n=l.state.selection;return e?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(e.line).from),u=r.state.doc.lineAt(o);e={line:u.number,col:e.col,off:Math.min(e.off,u.length)},n=n.map(r.changes)}},get(r,o,u){let f=p1(l,r);if(!f)return n;let h=IM(l.state,e,f);return h.length?u?V.create(h.concat(n.ranges)):V.create(h):n}}:null}function eC(l){let t=e=>e.altKey&&e.button==0;return I.mouseSelectionStyle.of((e,n)=>t(n)?tC(e,n):null)}const iC={Alt:[18,l=>!!l.altKey],Control:[17,l=>!!l.ctrlKey],Shift:[16,l=>!!l.shiftKey],Meta:[91,l=>!!l.metaKey]},nC={style:"cursor: crosshair"};function lC(l={}){let[t,e]=iC[l.key||"Alt"],n=ne.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==t||e(r))},keyup(r){(r.keyCode==t||!e(r))&&this.set(!1)},mousemove(r){this.set(e(r))}}});return[n,I.contentAttributes.of(r=>{var o;return!((o=r.plugin(n))===null||o===void 0)&&o.isDown?nC:null})]}const Ur="-10000px";class Db{constructor(t,e,n,r){this.facet=e,this.createTooltipView=n,this.removeTooltipView=r,this.input=t.state.facet(e),this.tooltips=this.input.filter(u=>u);let o=null;this.tooltipViews=this.tooltips.map(u=>o=n(u,o))}update(t,e){var n;let r=t.state.facet(this.facet),o=r.filter(h=>h);if(r===this.input){for(let h of this.tooltipViews)h.update&&h.update(t);return!1}let u=[],f=e?[]:null;for(let h=0;h<o.length;h++){let m=o[h],p=-1;if(m){for(let y=0;y<this.tooltips.length;y++){let v=this.tooltips[y];v&&v.create==m.create&&(p=y)}if(p<0)u[h]=this.createTooltipView(m,h?u[h-1]:null),f&&(f[h]=!!m.above);else{let y=u[h]=this.tooltipViews[p];f&&(f[h]=e[p]),y.update&&y.update(t)}}}for(let h of this.tooltipViews)u.indexOf(h)<0&&(this.removeTooltipView(h),(n=h.destroy)===null||n===void 0||n.call(h));return e&&(f.forEach((h,m)=>e[m]=h),e.length=f.length),this.input=r,this.tooltips=o,this.tooltipViews=u,!0}}function sC(l){let t=l.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const Eh=$.define({combine:l=>{var t,e,n;return{position:F.ios?"absolute":((t=l.find(r=>r.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((e=l.find(r=>r.parent))===null||e===void 0?void 0:e.parent)||null,tooltipSpace:((n=l.find(r=>r.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||sC}}}),y1=new WeakMap,em=ne.fromClass(class{constructor(l){this.view=l,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=l.state.facet(Eh);this.position=t.position,this.parent=t.parent,this.classes=l.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Db(l,im,(e,n)=>this.createTooltip(e,n),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),l.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let l of this.manager.tooltipViews)this.intersectionObserver.observe(l.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(l){l.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(l,this.above);t&&this.observeIntersection();let e=t||l.geometryChanged,n=l.state.facet(Eh);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;e=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);e=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);e&&this.maybeMeasure()}createTooltip(l,t){let e=l.create(this.view),n=t?t.dom:null;if(e.dom.classList.add("cm-tooltip"),l.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",e.dom.appendChild(r)}return e.dom.style.position=this.position,e.dom.style.top=Ur,e.dom.style.left="0px",this.container.insertBefore(e.dom,n),e.mount&&e.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(e.dom),e}destroy(){var l,t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(l=n.destroy)===null||l===void 0||l.call(n);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let l=1,t=1,e=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(F.gecko)e=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==Ur&&o.style.left=="0px"){let u=o.getBoundingClientRect();e=Math.abs(u.top+1e4)>1||Math.abs(u.left)>1}}if(e||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(l=o.width/this.parent.offsetWidth,t=o.height/this.parent.offsetHeight)}else({scaleX:l,scaleY:t}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),r=Jd(this.view);return{visible:{left:n.left+r.left,top:n.top+r.top,right:n.right-r.right,bottom:n.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,u)=>{let f=this.manager.tooltipViews[u];return f.getCoords?f.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(Eh).tooltipSpace(this.view),scaleX:l,scaleY:t,makeAbsolute:e}}writeMeasure(l){var t;if(l.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let f of this.manager.tooltipViews)f.dom.style.position="absolute"}let{visible:e,space:n,scaleX:r,scaleY:o}=l,u=[];for(let f=0;f<this.manager.tooltips.length;f++){let h=this.manager.tooltips[f],m=this.manager.tooltipViews[f],{dom:p}=m,y=l.pos[f],v=l.size[f];if(!y||h.clip!==!1&&(y.bottom<=Math.max(e.top,n.top)||y.top>=Math.min(e.bottom,n.bottom)||y.right<Math.max(e.left,n.left)-.1||y.left>Math.min(e.right,n.right)+.1)){p.style.top=Ur;continue}let S=h.arrow?m.dom.querySelector(".cm-tooltip-arrow"):null,w=S?7:0,M=v.right-v.left,k=(t=y1.get(m))!==null&&t!==void 0?t:v.bottom-v.top,R=m.offset||oC,Y=this.view.textDirection==Xt.LTR,j=v.width>n.right-n.left?Y?n.left:n.right-v.width:Y?Math.max(n.left,Math.min(y.left-(S?14:0)+R.x,n.right-M)):Math.min(Math.max(n.left,y.left-M+(S?14:0)-R.x),n.right-M),K=this.above[f];!h.strictSide&&(K?y.top-k-w-R.y<n.top:y.bottom+k+w+R.y>n.bottom)&&K==n.bottom-y.bottom>y.top-n.top&&(K=this.above[f]=!K);let z=(K?y.top-n.top:n.bottom-y.bottom)-w;if(z<k&&m.resize!==!1){if(z<this.view.defaultLineHeight){p.style.top=Ur;continue}y1.set(m,k),p.style.height=(k=z)/o+"px"}else p.style.height&&(p.style.height="");let G=K?y.top-k-w-R.y:y.bottom+w+R.y,X=j+M;if(m.overlap!==!0)for(let st of u)st.left<X&&st.right>j&&st.top<G+k&&st.bottom>G&&(G=K?st.top-k-2-w:st.bottom+w+2);if(this.position=="absolute"?(p.style.top=(G-l.parent.top)/o+"px",v1(p,(j-l.parent.left)/r)):(p.style.top=G/o+"px",v1(p,j/r)),S){let st=y.left+(Y?R.x:-R.x)-(j+14-7);S.style.left=st/r+"px"}m.overlap!==!0&&u.push({left:j,top:G,right:X,bottom:G+k}),p.classList.toggle("cm-tooltip-above",K),p.classList.toggle("cm-tooltip-below",!K),m.positioned&&m.positioned(l.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let l of this.manager.tooltipViews)l.dom.style.top=Ur}},{eventObservers:{scroll(){this.maybeMeasure()}}});function v1(l,t){let e=parseInt(l.style.left,10);(isNaN(e)||Math.abs(t-e)>1)&&(l.style.left=t+"px")}const rC=I.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),oC={x:0,y:0},im=$.define({enables:[em,rC]}),Au=$.define({combine:l=>l.reduce((t,e)=>t.concat(e),[])});class Gu{static create(t){return new Gu(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Db(t,Au,(e,n)=>this.createHostedView(e,n),e=>e.dom.remove())}createHostedView(t,e){let n=t.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,e?e.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)(t=e.destroy)===null||t===void 0||t.call(e)}passProp(t){let e;for(let n of this.manager.tooltipViews){let r=n[t];if(r!==void 0){if(e===void 0)e=r;else if(e!==r)return}}return e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const aC=im.compute([Au],l=>{let t=l.facet(Au);return t.length===0?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var n;return(n=e.end)!==null&&n!==void 0?n:e.pos})),create:Gu.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class uC{constructor(t,e,n,r,o){this.view=t,this.source=e,this.field=n,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:e}=this,n=t.docView.nearest(e.target);if(!n)return;let r,o=1;if(n instanceof jn)r=n.posAtStart;else{if(r=t.posAtCoords(e),r==null)return;let f=t.coordsAtPos(r);if(!f||e.y<f.top||e.y>f.bottom||e.x<f.left-t.defaultCharacterWidth||e.x>f.right+t.defaultCharacterWidth)return;let h=t.bidiSpans(t.state.doc.lineAt(r)).find(p=>p.from<=r&&p.to>=r),m=h&&h.dir==Xt.RTL?-1:1;o=e.x<f.left?-m:m}let u=this.source(t,r,o);if(u?.then){let f=this.pending={pos:r};u.then(h=>{this.pending==f&&(this.pending=null,h&&!(Array.isArray(h)&&!h.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(h)?h:[h])}))},h=>je(t.state,h,"hover tooltip"))}else u&&!(Array.isArray(u)&&!u.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(u)?u:[u])})}get tooltip(){let t=this.view.plugin(em),e=t?t.manager.tooltips.findIndex(n=>n.create==Gu.create):-1;return e>-1?t.manager.tooltipViews[e]:null}mousemove(t){var e,n;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!cC(o.dom,t)||this.pending){let{pos:u}=r[0]||this.pending,f=(n=(e=r[0])===null||e===void 0?void 0:e.end)!==null&&n!==void 0?n:u;(u==f?this.view.posAtCoords(this.lastMove)!=u:!fC(this.view,u,f,t.clientX,t.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:e}=this;if(e.length){let{tooltip:n}=this;n&&n.dom.contains(t.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let e=n=>{t.removeEventListener("mouseleave",e),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",e)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Pa=4;function cC(l,t){let{left:e,right:n,top:r,bottom:o}=l.getBoundingClientRect(),u;if(u=l.querySelector(".cm-tooltip-arrow")){let f=u.getBoundingClientRect();r=Math.min(f.top,r),o=Math.max(f.bottom,o)}return t.clientX>=e-Pa&&t.clientX<=n+Pa&&t.clientY>=r-Pa&&t.clientY<=o+Pa}function fC(l,t,e,n,r,o){let u=l.scrollDOM.getBoundingClientRect(),f=l.documentTop+l.documentPadding.top+l.contentHeight;if(u.left>n||u.right<n||u.top>r||Math.min(u.bottom,f)<r)return!1;let h=l.posAtCoords({x:n,y:r},!1);return h>=t&&h<=e}function hC(l,t={}){let e=pt.define(),n=Se.define({create(){return[]},update(r,o){if(r.length&&(t.hideOnChange&&(o.docChanged||o.selection)?r=[]:t.hideOn&&(r=r.filter(u=>!t.hideOn(o,u))),o.docChanged)){let u=[];for(let f of r){let h=o.changes.mapPos(f.pos,-1,Re.TrackDel);if(h!=null){let m=Object.assign(Object.create(null),f);m.pos=h,m.end!=null&&(m.end=o.changes.mapPos(m.end)),u.push(m)}}r=u}for(let u of o.effects)u.is(e)&&(r=u.value),u.is(dC)&&(r=[]);return r},provide:r=>Au.from(r)});return{active:n,extension:[n,ne.define(r=>new uC(r,l,n,e,t.hoverTime||300)),aC]}}function Ob(l,t){let e=l.plugin(em);if(!e)return null;let n=e.manager.tooltips.indexOf(t);return n<0?null:e.manager.tooltipViews[n]}const dC=pt.define(),b1=$.define({combine(l){let t,e;for(let n of l)t=t||n.topContainer,e=e||n.bottomContainer;return{topContainer:t,bottomContainer:e}}});function ro(l,t){let e=l.plugin(Eb),n=e?e.specs.indexOf(t):-1;return n>-1?e.panels[n]:null}const Eb=ne.fromClass(class{constructor(l){this.input=l.state.facet(oo),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(e=>e(l));let t=l.state.facet(b1);this.top=new Ja(l,!0,t.topContainer),this.bottom=new Ja(l,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(l){let t=l.state.facet(b1);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Ja(l.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ja(l.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let e=l.state.facet(oo);if(e!=this.input){let n=e.filter(h=>h),r=[],o=[],u=[],f=[];for(let h of n){let m=this.specs.indexOf(h),p;m<0?(p=h(l.view),f.push(p)):(p=this.panels[m],p.update&&p.update(l)),r.push(p),(p.top?o:u).push(p)}this.specs=n,this.panels=r,this.top.sync(o),this.bottom.sync(u);for(let h of f)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let n of this.panels)n.update&&n.update(l)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:l=>I.scrollMargins.of(t=>{let e=t.plugin(l);return e&&{top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()}})});class Ja{constructor(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=S1(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=S1(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function S1(l){let t=l.nextSibling;return l.remove(),t}const oo=$.define({enables:Eb});class fn extends Ml{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}fn.prototype.elementClass="";fn.prototype.toDOM=void 0;fn.prototype.mapMode=Re.TrackBefore;fn.prototype.startSide=fn.prototype.endSide=-1;fn.prototype.point=!0;const mu=$.define(),mC=$.define(),gC={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Dt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Fr=$.define();function pC(l){return[Rb(),Fr.of({...gC,...l})]}const x1=$.define({combine:l=>l.some(t=>t)});function Rb(l){return[yC]}const yC=ne.fromClass(class{constructor(l){this.view=l,this.domAfter=null,this.prevViewport=l.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=l.state.facet(Fr).map(t=>new A1(l,t)),this.fixed=!l.state.facet(x1);for(let t of this.gutters)t.config.side=="after"?this.getDOMAfter().appendChild(t.dom):this.dom.appendChild(t.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),l.scrollDOM.insertBefore(this.dom,l.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(l){if(this.updateGutters(l)){let t=this.prevViewport,e=l.view.viewport,n=Math.min(t.to,e.to)-Math.max(t.from,e.from);this.syncGutters(n<(e.to-e.from)*.8)}if(l.geometryChanged){let t=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=t,this.domAfter&&(this.domAfter.style.minHeight=t)}this.view.state.facet(x1)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=l.view.viewport}syncGutters(l){let t=this.dom.nextSibling;l&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let e=Dt.iter(this.view.state.facet(mu),this.view.viewport.from),n=[],r=this.gutters.map(o=>new vC(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(o.type)){let u=!0;for(let f of o.type)if(f.type==Be.Text&&u){Td(e,n,f.from);for(let h of r)h.line(this.view,f,n);u=!1}else if(f.widget)for(let h of r)h.widget(this.view,f)}else if(o.type==Be.Text){Td(e,n,o.from);for(let u of r)u.line(this.view,o,n)}else if(o.widget)for(let u of r)u.widget(this.view,o);for(let o of r)o.finish();l&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(l){let t=l.startState.facet(Fr),e=l.state.facet(Fr),n=l.docChanged||l.heightChanged||l.viewportChanged||!Dt.eq(l.startState.facet(mu),l.state.facet(mu),l.view.viewport.from,l.view.viewport.to);if(t==e)for(let r of this.gutters)r.update(l)&&(n=!0);else{n=!0;let r=[];for(let o of e){let u=t.indexOf(o);u<0?r.push(new A1(this.view,o)):(this.gutters[u].update(l),r.push(this.gutters[u]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=r}return n}destroy(){for(let l of this.gutters)l.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:l=>I.scrollMargins.of(t=>{let e=t.plugin(l);if(!e||e.gutters.length==0||!e.fixed)return null;let n=e.dom.offsetWidth*t.scaleX,r=e.domAfter?e.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==Xt.LTR?{left:n,right:r}:{right:n,left:r}})});function w1(l){return Array.isArray(l)?l:[l]}function Td(l,t,e){for(;l.value&&l.from<=e;)l.from==e&&t.push(l.value),l.next()}class vC{constructor(t,e,n){this.gutter=t,this.height=n,this.i=0,this.cursor=Dt.iter(t.markers,e.from)}addElement(t,e,n){let{gutter:r}=this,o=(e.top-this.height)/t.scaleY,u=e.height/t.scaleY;if(this.i==r.elements.length){let f=new Bb(t,u,o,n);r.elements.push(f),r.dom.appendChild(f.dom)}else r.elements[this.i].update(t,u,o,n);this.height=e.bottom,this.i++}line(t,e,n){let r=[];Td(this.cursor,r,e.from),n.length&&(r=r.concat(n));let o=this.gutter.config.lineMarker(t,e,r);o&&r.unshift(o);let u=this.gutter;r.length==0&&!u.config.renderEmptyElements||this.addElement(t,e,r)}widget(t,e){let n=this.gutter.config.widgetMarker(t,e.widget,e),r=n?[n]:null;for(let o of t.state.facet(mC)){let u=o(t,e.widget,e);u&&(r||(r=[])).push(u)}r&&this.addElement(t,e,r)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class A1{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in e.domEventHandlers)this.dom.addEventListener(n,r=>{let o=r.target,u;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let h=o.getBoundingClientRect();u=(h.top+h.bottom)/2}else u=r.clientY;let f=t.lineBlockAtHeight(u-t.documentTop);e.domEventHandlers[n](t,f,r)&&r.preventDefault()});this.markers=w1(e.markers(t)),e.initialSpacer&&(this.spacer=new Bb(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=w1(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],t);r!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[r])}let n=t.view.viewport;return!Dt.eq(this.markers,e,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class Bb{constructor(t,e,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,n,r)}update(t,e,n,r){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),bC(this.markers,r)||this.setMarkers(t,r)}setMarkers(t,e){let n="cm-gutterElement",r=this.dom.firstChild;for(let o=0,u=0;;){let f=u,h=o<e.length?e[o++]:null,m=!1;if(h){let p=h.elementClass;p&&(n+=" "+p);for(let y=u;y<this.markers.length;y++)if(this.markers[y].compare(h)){f=y,m=!0;break}}else f=this.markers.length;for(;u<f;){let p=this.markers[u++];if(p.toDOM){p.destroy(r);let y=r.nextSibling;r.remove(),r=y}}if(!h)break;h.toDOM&&(m?r=r.nextSibling:this.dom.insertBefore(h.toDOM(t),r)),m&&u++}this.dom.className=n,this.markers=e}destroy(){this.setMarkers(null,[])}}function bC(l,t){if(l.length!=t.length)return!1;for(let e=0;e<l.length;e++)if(!l[e].compare(t[e]))return!1;return!0}const SC=$.define(),xC=$.define(),Ss=$.define({combine(l){return Gi(l,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let n=Object.assign({},t);for(let r in e){let o=n[r],u=e[r];n[r]=o?(f,h,m)=>o(f,h,m)||u(f,h,m):u}return n}})}});class Rh extends fn{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function Bh(l,t){return l.state.facet(Ss).formatNumber(t,l.state)}const wC=Fr.compute([Ss],l=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(SC)},lineMarker(t,e,n){return n.some(r=>r.toDOM)?null:new Rh(Bh(t,t.state.doc.lineAt(e.from).number))},widgetMarker:(t,e,n)=>{for(let r of t.state.facet(xC)){let o=r(t,e,n);if(o)return o}return null},lineMarkerChange:t=>t.startState.facet(Ss)!=t.state.facet(Ss),initialSpacer(t){return new Rh(Bh(t,M1(t.state.doc.lines)))},updateSpacer(t,e){let n=Bh(e.view,M1(e.view.state.doc.lines));return n==t.number?t:new Rh(n)},domEventHandlers:l.facet(Ss).domEventHandlers,side:"before"}));function AC(l={}){return[Ss.of(l),Rb(),wC]}function M1(l){let t=9;for(;t<l;)t=t*10+9;return t}const MC=new class extends fn{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},CC=mu.compute(["selection"],l=>{let t=[],e=-1;for(let n of l.selection.ranges){let r=l.doc.lineAt(n.head).from;r>e&&(e=r,t.push(MC.range(r)))}return Dt.of(t)});function TC(){return CC}const kC=1024;let DC=0;class Nh{constructor(t,e){this.from=t,this.to=e}}class Mt{constructor(t={}){this.id=DC++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=yi.match(t)),e=>{let n=t(e);return n===void 0?null:[this,n]}}}Mt.closedBy=new Mt({deserialize:l=>l.split(" ")});Mt.openedBy=new Mt({deserialize:l=>l.split(" ")});Mt.group=new Mt({deserialize:l=>l.split(" ")});Mt.isolate=new Mt({deserialize:l=>{if(l&&l!="rtl"&&l!="ltr"&&l!="auto")throw new RangeError("Invalid value for isolate: "+l);return l||"auto"}});Mt.contextHash=new Mt({perNode:!0});Mt.lookAhead=new Mt({perNode:!0});Mt.mounted=new Mt({perNode:!0});class Mu{constructor(t,e,n){this.tree=t,this.overlay=e,this.parser=n}static get(t){return t&&t.props&&t.props[Mt.mounted.id]}}const OC=Object.create(null);class yi{constructor(t,e,n,r=0){this.name=t,this.props=e,this.id=n,this.flags=r}static define(t){let e=t.props&&t.props.length?Object.create(null):OC,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),r=new yi(t.name||"",e,t.id,n);if(t.props){for(let o of t.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[o[0].id]=o[1]}}return r}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(Mt.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let n in t)for(let r of n.split(" "))e[r]=t[n];return n=>{for(let r=n.prop(Mt.group),o=-1;o<(r?r.length:0);o++){let u=e[o<0?n.name:r[o]];if(u)return u}}}}yi.none=new yi("",Object.create(null),0,8);const Fa=new WeakMap,C1=new WeakMap;var ve;(function(l){l[l.ExcludeBuffers=1]="ExcludeBuffers",l[l.IncludeAnonymous=2]="IncludeAnonymous",l[l.IgnoreMounts=4]="IgnoreMounts",l[l.IgnoreOverlays=8]="IgnoreOverlays"})(ve||(ve={}));class ke{constructor(t,e,n,r,o){if(this.type=t,this.children=e,this.positions=n,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[u,f]of o)this.props[typeof u=="number"?u:u.id]=f}}toString(){let t=Mu.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let n of this.children){let r=n.toString();r&&(e&&(e+=","),e+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new Dd(this.topNode,t)}cursorAt(t,e=0,n=0){let r=Fa.get(this)||this.topNode,o=new Dd(r);return o.moveTo(t,e),Fa.set(this,o._tree),o}get topNode(){return new gi(this,0,0,null)}resolve(t,e=0){let n=ao(Fa.get(this)||this.topNode,t,e,!1);return Fa.set(this,n),n}resolveInner(t,e=0){let n=ao(C1.get(this)||this.topNode,t,e,!0);return C1.set(this,n),n}resolveStack(t,e=0){return BC(this,t,e)}iterate(t){let{enter:e,leave:n,from:r=0,to:o=this.length}=t,u=t.mode||0,f=(u&ve.IncludeAnonymous)>0;for(let h=this.cursor(u|ve.IncludeAnonymous);;){let m=!1;if(h.from<=o&&h.to>=r&&(!f&&h.type.isAnonymous||e(h)!==!1)){if(h.firstChild())continue;m=!0}for(;m&&n&&(f||!h.type.isAnonymous)&&n(h),!h.nextSibling();){if(!h.parent())return;m=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:sm(yi.none,this.children,this.positions,0,this.children.length,0,this.length,(e,n,r)=>new ke(this.type,e,n,r,this.propValues),t.makeTree||((e,n,r)=>new ke(yi.none,e,n,r)))}static build(t){return NC(t)}}ke.empty=new ke(yi.none,[],[],0);class nm{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new nm(this.buffer,this.index)}}class Pn{constructor(t,e,n){this.buffer=t,this.length=e,this.set=n}get type(){return yi.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],n=this.buffer[t+3],r=this.set.types[e],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),t+=4,n==t)return o;let u=[];for(;t<n;)u.push(this.childString(t)),t=this.buffer[t+3];return o+"("+u.join(",")+")"}findChild(t,e,n,r,o){let{buffer:u}=this,f=-1;for(let h=t;h!=e&&!(Nb(o,r,u[h+1],u[h+2])&&(f=h,n>0));h=u[h+3]);return f}slice(t,e,n){let r=this.buffer,o=new Uint16Array(e-t),u=0;for(let f=t,h=0;f<e;){o[h++]=r[f++],o[h++]=r[f++]-n;let m=o[h++]=r[f++]-n;o[h++]=r[f++]-t,u=Math.max(u,m)}return new Pn(o,u,this.set)}}function Nb(l,t,e,n){switch(l){case-2:return e<t;case-1:return n>=t&&e<t;case 0:return e<t&&n>t;case 1:return e<=t&&n>t;case 2:return n>t;case 4:return!0}}function ao(l,t,e,n){for(var r;l.from==l.to||(e<1?l.from>=t:l.from>t)||(e>-1?l.to<=t:l.to<t);){let u=!n&&l instanceof gi&&l.index<0?null:l.parent;if(!u)return l;l=u}let o=n?0:ve.IgnoreOverlays;if(n)for(let u=l,f=u.parent;f;u=f,f=u.parent)u instanceof gi&&u.index<0&&((r=f.enter(t,e,o))===null||r===void 0?void 0:r.from)!=u.from&&(l=f);for(;;){let u=l.enter(t,e,o);if(!u)return l;l=u}}class Lb{cursor(t=0){return new Dd(this,t)}getChild(t,e=null,n=null){let r=T1(this,t,e,n);return r.length?r[0]:null}getChildren(t,e=null,n=null){return T1(this,t,e,n)}resolve(t,e=0){return ao(this,t,e,!1)}resolveInner(t,e=0){return ao(this,t,e,!0)}matchContext(t){return kd(this.parent,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),n=this;for(;e;){let r=e.lastChild;if(!r||r.to!=e.to)break;r.type.isError&&r.from==r.to?(n=e,e=r.prevSibling):e=r}return n}get node(){return this}get next(){return this.parent}}class gi extends Lb{constructor(t,e,n,r){super(),this._tree=t,this.from=e,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,n,r,o=0){for(let u=this;;){for(let{children:f,positions:h}=u._tree,m=e>0?f.length:-1;t!=m;t+=e){let p=f[t],y=h[t]+u.from;if(Nb(r,n,y,y+p.length)){if(p instanceof Pn){if(o&ve.ExcludeBuffers)continue;let v=p.findChild(0,p.buffer.length,e,n-y,r);if(v>-1)return new Xn(new EC(u,p,t,y),null,v)}else if(o&ve.IncludeAnonymous||!p.type.isAnonymous||lm(p)){let v;if(!(o&ve.IgnoreMounts)&&(v=Mu.get(p))&&!v.overlay)return new gi(v.tree,y,t,u);let S=new gi(p,y,t,u);return o&ve.IncludeAnonymous||!S.type.isAnonymous?S:S.nextChild(e<0?p.children.length-1:0,e,n,r)}}}if(o&ve.IncludeAnonymous||!u.type.isAnonymous||(u.index>=0?t=u.index+e:t=e<0?-1:u._parent._tree.children.length,u=u._parent,!u))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,n=0){let r;if(!(n&ve.IgnoreOverlays)&&(r=Mu.get(this._tree))&&r.overlay){let o=t-this.from;for(let{from:u,to:f}of r.overlay)if((e>0?u<=o:u<o)&&(e<0?f>=o:f>o))return new gi(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function T1(l,t,e,n){let r=l.cursor(),o=[];if(!r.firstChild())return o;if(e!=null){for(let u=!1;!u;)if(u=r.type.is(e),!r.nextSibling())return o}for(;;){if(n!=null&&r.type.is(n))return o;if(r.type.is(t)&&o.push(r.node),!r.nextSibling())return n==null?o:[]}}function kd(l,t,e=t.length-1){for(let n=l;e>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(t[e]&&t[e]!=n.name)return!1;e--}}return!0}class EC{constructor(t,e,n,r){this.parent=t,this.buffer=e,this.index=n,this.start=r}}class Xn extends Lb{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,n){super(),this.context=t,this._parent=e,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}child(t,e,n){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.context.start,n);return o<0?null:new Xn(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,n=0){if(n&ve.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return o<0?null:new Xn(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Xn(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new Xn(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:n}=this.context,r=this.index+4,o=n.buffer[this.index+3];if(o>r){let u=n.buffer[this.index+1];t.push(n.slice(r,o,u)),e.push(0)}return new ke(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function zb(l){if(!l.length)return null;let t=0,e=l[0];for(let o=1;o<l.length;o++){let u=l[o];(u.from>e.from||u.to<e.to)&&(e=u,t=o)}let n=e instanceof gi&&e.index<0?null:e.parent,r=l.slice();return n?r[t]=n:r.splice(t,1),new RC(r,e)}class RC{constructor(t,e){this.heads=t,this.node=e}get next(){return zb(this.heads)}}function BC(l,t,e){let n=l.resolveInner(t,e),r=null;for(let o=n instanceof gi?n:n.context.parent;o;o=o.parent)if(o.index<0){let u=o.parent;(r||(r=[n])).push(u.resolve(t,e)),o=u}else{let u=Mu.get(o.tree);if(u&&u.overlay&&u.overlay[0].from<=t&&u.overlay[u.overlay.length-1].to>=t){let f=new gi(u.tree,u.overlay[0].from+o.from,-1,o);(r||(r=[n])).push(ao(f,t,e,!1))}}return r?zb(r):n}class Dd{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof gi)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let n=t._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:n,buffer:r}=this.buffer;return this.type=e||r.set.types[r.buffer[t]],this.from=n+r.buffer[t+1],this.to=n+r.buffer[t+2],!0}yield(t){return t?t instanceof gi?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,n,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.buffer.start,n);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,n=this.mode){return this.buffer?n&ve.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ve.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&ve.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,n=this.stack.length-1;if(t<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(e.findChild(r,this.index,-1,0,4))}else{let r=e.buffer[this.index+3];if(r<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,n,{buffer:r}=this;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:e,parent:n}=r)}else({index:e,_parent:n}=this._tree);for(;n;{index:e,_parent:n}=n)if(e>-1)for(let o=e+t,u=t<0?-1:n._tree.children.length;o!=u;o+=t){let f=n._tree.children[o];if(this.mode&ve.IncludeAnonymous||f instanceof Pn||!f.type.isAnonymous||lm(f))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer)t:for(let r=this.index,o=this.stack.length;o>=0;){for(let u=t;u;u=u._parent)if(u.index==r){if(r==this.index)return u;e=u,n=o+1;break t}r=this.stack[--o]}for(let r=n;r<this.stack.length;r++)e=new Xn(this.buffer,e,this.stack[r]);return this.bufferNode=new Xn(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let n=0;;){let r=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&e&&e(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(t){if(!this.buffer)return kd(this.node.parent,t);let{buffer:e}=this.buffer,{types:n}=e.set;for(let r=t.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return kd(this._tree,t,r);let u=n[e.buffer[this.stack[o]]];if(!u.isAnonymous){if(t[r]&&t[r]!=u.name)return!1;r--}}return!0}}function lm(l){return l.children.some(t=>t instanceof Pn||!t.type.isAnonymous||lm(t))}function NC(l){var t;let{buffer:e,nodeSet:n,maxBufferLength:r=kC,reused:o=[],minRepeatType:u=n.types.length}=l,f=Array.isArray(e)?new nm(e,e.length):e,h=n.types,m=0,p=0;function y(z,G,X,st,ht,Ct){let{id:ft,start:tt,end:xt,size:yt}=f,mt=p,L=m;for(;yt<0;)if(f.next(),yt==-1){let U=o[ft];X.push(U),st.push(tt-z);return}else if(yt==-3){m=ft;return}else if(yt==-4){p=ft;return}else throw new RangeError(`Unrecognized record size: ${yt}`);let Q=h[ft],it,dt,C=tt-z;if(xt-tt<=r&&(dt=k(f.pos-G,ht))){let U=new Uint16Array(dt.size-dt.skip),W=f.pos-dt.size,Z=U.length;for(;f.pos>W;)Z=R(dt.start,U,Z);it=new Pn(U,xt-dt.start,n),C=dt.start-z}else{let U=f.pos-yt;f.next();let W=[],Z=[],nt=ft>=u?ft:-1,vt=0,at=xt;for(;f.pos>U;)nt>=0&&f.id==nt&&f.size>=0?(f.end<=at-r&&(w(W,Z,tt,vt,f.end,at,nt,mt,L),vt=W.length,at=f.end),f.next()):Ct>2500?v(tt,U,W,Z):y(tt,U,W,Z,nt,Ct+1);if(nt>=0&&vt>0&&vt<W.length&&w(W,Z,tt,vt,tt,at,nt,mt,L),W.reverse(),Z.reverse(),nt>-1&&vt>0){let xe=S(Q,L);it=sm(Q,W,Z,0,W.length,0,xt-tt,xe,xe)}else it=M(Q,W,Z,xt-tt,mt-xt,L)}X.push(it),st.push(C)}function v(z,G,X,st){let ht=[],Ct=0,ft=-1;for(;f.pos>G;){let{id:tt,start:xt,end:yt,size:mt}=f;if(mt>4)f.next();else{if(ft>-1&&xt<ft)break;ft<0&&(ft=yt-r),ht.push(tt,xt,yt),Ct++,f.next()}}if(Ct){let tt=new Uint16Array(Ct*4),xt=ht[ht.length-2];for(let yt=ht.length-3,mt=0;yt>=0;yt-=3)tt[mt++]=ht[yt],tt[mt++]=ht[yt+1]-xt,tt[mt++]=ht[yt+2]-xt,tt[mt++]=mt;X.push(new Pn(tt,ht[2]-xt,n)),st.push(xt-z)}}function S(z,G){return(X,st,ht)=>{let Ct=0,ft=X.length-1,tt,xt;if(ft>=0&&(tt=X[ft])instanceof ke){if(!ft&&tt.type==z&&tt.length==ht)return tt;(xt=tt.prop(Mt.lookAhead))&&(Ct=st[ft]+tt.length+xt)}return M(z,X,st,ht,Ct,G)}}function w(z,G,X,st,ht,Ct,ft,tt,xt){let yt=[],mt=[];for(;z.length>st;)yt.push(z.pop()),mt.push(G.pop()+X-ht);z.push(M(n.types[ft],yt,mt,Ct-ht,tt-Ct,xt)),G.push(ht-X)}function M(z,G,X,st,ht,Ct,ft){if(Ct){let tt=[Mt.contextHash,Ct];ft=ft?[tt].concat(ft):[tt]}if(ht>25){let tt=[Mt.lookAhead,ht];ft=ft?[tt].concat(ft):[tt]}return new ke(z,G,X,st,ft)}function k(z,G){let X=f.fork(),st=0,ht=0,Ct=0,ft=X.end-r,tt={size:0,start:0,skip:0};t:for(let xt=X.pos-z;X.pos>xt;){let yt=X.size;if(X.id==G&&yt>=0){tt.size=st,tt.start=ht,tt.skip=Ct,Ct+=4,st+=4,X.next();continue}let mt=X.pos-yt;if(yt<0||mt<xt||X.start<ft)break;let L=X.id>=u?4:0,Q=X.start;for(X.next();X.pos>mt;){if(X.size<0)if(X.size==-3)L+=4;else break t;else X.id>=u&&(L+=4);X.next()}ht=Q,st+=yt,Ct+=L}return(G<0||st==z)&&(tt.size=st,tt.start=ht,tt.skip=Ct),tt.size>4?tt:void 0}function R(z,G,X){let{id:st,start:ht,end:Ct,size:ft}=f;if(f.next(),ft>=0&&st<u){let tt=X;if(ft>4){let xt=f.pos-(ft-4);for(;f.pos>xt;)X=R(z,G,X)}G[--X]=tt,G[--X]=Ct-z,G[--X]=ht-z,G[--X]=st}else ft==-3?m=st:ft==-4&&(p=st);return X}let Y=[],j=[];for(;f.pos>0;)y(l.start||0,l.bufferStart||0,Y,j,-1,0);let K=(t=l.length)!==null&&t!==void 0?t:Y.length?j[0]+Y[0].length:0;return new ke(h[l.topID],Y.reverse(),j.reverse(),K)}const k1=new WeakMap;function gu(l,t){if(!l.isAnonymous||t instanceof Pn||t.type!=l)return 1;let e=k1.get(t);if(e==null){e=1;for(let n of t.children){if(n.type!=l||!(n instanceof ke)){e=1;break}e+=gu(l,n)}k1.set(t,e)}return e}function sm(l,t,e,n,r,o,u,f,h){let m=0;for(let w=n;w<r;w++)m+=gu(l,t[w]);let p=Math.ceil(m*1.5/8),y=[],v=[];function S(w,M,k,R,Y){for(let j=k;j<R;){let K=j,z=M[j],G=gu(l,w[j]);for(j++;j<R;j++){let X=gu(l,w[j]);if(G+X>=p)break;G+=X}if(j==K+1){if(G>p){let X=w[K];S(X.children,X.positions,0,X.children.length,M[K]+Y);continue}y.push(w[K])}else{let X=M[j-1]+w[j-1].length-z;y.push(sm(l,w,M,K,j,z,X,null,h))}v.push(z+Y-o)}}return S(t,e,n,r,0),(f||h)(y,v,u)}class wl{constructor(t,e,n,r,o=!1,u=!1){this.from=t,this.to=e,this.tree=n,this.offset=r,this.open=(o?1:0)|(u?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,e=[],n=!1){let r=[new wl(0,t.length,t,0,!1,n)];for(let o of e)o.to>t.length&&r.push(o);return r}static applyChanges(t,e,n=128){if(!e.length)return t;let r=[],o=1,u=t.length?t[0]:null;for(let f=0,h=0,m=0;;f++){let p=f<e.length?e[f]:null,y=p?p.fromA:1e9;if(y-h>=n)for(;u&&u.from<y;){let v=u;if(h>=v.from||y<=v.to||m){let S=Math.max(v.from,h)-m,w=Math.min(v.to,y)-m;v=S>=w?null:new wl(S,w,v.tree,v.offset+m,f>0,!!p)}if(v&&r.push(v),u.to>y)break;u=o<t.length?t[o++]:null}if(!p)break;h=p.toA,m=p.toA-p.toB}return r}}class LC{startParse(t,e,n){return typeof t=="string"&&(t=new zC(t)),n=n?n.length?n.map(r=>new Nh(r.from,r.to)):[new Nh(0,0)]:[new Nh(0,t.length)],this.createParse(t,e||[],n)}parse(t,e,n){let r=this.startParse(t,e,n);for(;;){let o=r.advance();if(o)return o}}}class zC{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new Mt({perNode:!0});let HC=0;class fi{constructor(t,e,n,r){this.name=t,this.set=e,this.base=n,this.modified=r,this.id=HC++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let n=typeof t=="string"?t:"?";if(t instanceof fi&&(e=t),e?.base)throw new Error("Can not derive from a modified tag");let r=new fi(n,[],null,[]);if(r.set.push(r),e)for(let o of e.set)r.set.push(o);return r}static defineModifier(t){let e=new Cu(t);return n=>n.modified.indexOf(e)>-1?n:Cu.get(n.base||n,n.modified.concat(e).sort((r,o)=>r.id-o.id))}}let _C=0;class Cu{constructor(t){this.name=t,this.instances=[],this.id=_C++}static get(t,e){if(!e.length)return t;let n=e[0].instances.find(f=>f.base==t&&UC(e,f.modified));if(n)return n;let r=[],o=new fi(t.name,r,t,e);for(let f of e)f.instances.push(o);let u=qC(e);for(let f of t.set)if(!f.modified.length)for(let h of u)r.push(Cu.get(f,h));return o}}function UC(l,t){return l.length==t.length&&l.every((e,n)=>e==t[n])}function qC(l){let t=[[]];for(let e=0;e<l.length;e++)for(let n=0,r=t.length;n<r;n++)t.push(t[n].concat(l[e]));return t.sort((e,n)=>n.length-e.length)}function VC(l){let t=Object.create(null);for(let e in l){let n=l[e];Array.isArray(n)||(n=[n]);for(let r of e.split(" "))if(r){let o=[],u=2,f=r;for(let y=0;;){if(f=="..."&&y>0&&y+3==r.length){u=1;break}let v=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(f);if(!v)throw new RangeError("Invalid path: "+r);if(o.push(v[0]=="*"?"":v[0][0]=='"'?JSON.parse(v[0]):v[0]),y+=v[0].length,y==r.length)break;let S=r[y++];if(y==r.length&&S=="!"){u=0;break}if(S!="/")throw new RangeError("Invalid path: "+r);f=r.slice(y)}let h=o.length-1,m=o[h];if(!m)throw new RangeError("Invalid path: "+r);let p=new Tu(n,u,h>0?o.slice(0,h):null);t[m]=p.sort(t[m])}}return Hb.add(t)}const Hb=new Mt;class Tu{constructor(t,e,n,r){this.tags=t,this.mode=e,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}Tu.empty=new Tu([],2,null);function _b(l,t){let e=Object.create(null);for(let o of l)if(!Array.isArray(o.tag))e[o.tag.id]=o.class;else for(let u of o.tag)e[u.id]=o.class;let{scope:n,all:r=null}=t||{};return{style:o=>{let u=r;for(let f of o)for(let h of f.set){let m=e[h.id];if(m){u=u?u+" "+m:m;break}}return u},scope:n}}function YC(l,t){let e=null;for(let n of l){let r=n.style(t);r&&(e=e?e+" "+r:r)}return e}function jC(l,t,e,n=0,r=l.length){let o=new GC(n,Array.isArray(t)?t:[t],e);o.highlightRange(l.cursor(),n,r,"",o.highlighters),o.flush(r)}class GC{constructor(t,e,n){this.at=t,this.highlighters=e,this.span=n,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,n,r,o){let{type:u,from:f,to:h}=t;if(f>=n||h<=e)return;u.isTop&&(o=this.highlighters.filter(S=>!S.scope||S.scope(u)));let m=r,p=XC(t)||Tu.empty,y=YC(o,p.tags);if(y&&(m&&(m+=" "),m+=y,p.mode==1&&(r+=(r?" ":"")+y)),this.startSpan(Math.max(e,f),m),p.opaque)return;let v=t.tree&&t.tree.prop(Mt.mounted);if(v&&v.overlay){let S=t.node.enter(v.overlay[0].from+f,1),w=this.highlighters.filter(k=>!k.scope||k.scope(v.tree.type)),M=t.firstChild();for(let k=0,R=f;;k++){let Y=k<v.overlay.length?v.overlay[k]:null,j=Y?Y.from+f:h,K=Math.max(e,R),z=Math.min(n,j);if(K<z&&M)for(;t.from<z&&(this.highlightRange(t,K,z,r,o),this.startSpan(Math.min(z,t.to),m),!(t.to>=j||!t.nextSibling())););if(!Y||j>n)break;R=Y.to+f,R>e&&(this.highlightRange(S.cursor(),Math.max(e,Y.from+f),Math.min(n,R),"",w),this.startSpan(Math.min(n,R),m))}M&&t.parent()}else if(t.firstChild()){v&&(r="");do if(!(t.to<=e)){if(t.from>=n)break;this.highlightRange(t,e,n,r,o),this.startSpan(Math.min(n,t.to),m)}while(t.nextSibling());t.parent()}}}function XC(l){let t=l.type.prop(Hb);for(;t&&t.context&&!l.matchContext(t.context);)t=t.next;return t||null}const P=fi.define,Ia=P(),Un=P(),D1=P(Un),O1=P(Un),qn=P(),$a=P(qn),Lh=P(qn),Li=P(),yl=P(Li),Bi=P(),Ni=P(),Od=P(),qr=P(Od),tu=P(),J={comment:Ia,lineComment:P(Ia),blockComment:P(Ia),docComment:P(Ia),name:Un,variableName:P(Un),typeName:D1,tagName:P(D1),propertyName:O1,attributeName:P(O1),className:P(Un),labelName:P(Un),namespace:P(Un),macroName:P(Un),literal:qn,string:$a,docString:P($a),character:P($a),attributeValue:P($a),number:Lh,integer:P(Lh),float:P(Lh),bool:P(qn),regexp:P(qn),escape:P(qn),color:P(qn),url:P(qn),keyword:Bi,self:P(Bi),null:P(Bi),atom:P(Bi),unit:P(Bi),modifier:P(Bi),operatorKeyword:P(Bi),controlKeyword:P(Bi),definitionKeyword:P(Bi),moduleKeyword:P(Bi),operator:Ni,derefOperator:P(Ni),arithmeticOperator:P(Ni),logicOperator:P(Ni),bitwiseOperator:P(Ni),compareOperator:P(Ni),updateOperator:P(Ni),definitionOperator:P(Ni),typeOperator:P(Ni),controlOperator:P(Ni),punctuation:Od,separator:P(Od),bracket:qr,angleBracket:P(qr),squareBracket:P(qr),paren:P(qr),brace:P(qr),content:Li,heading:yl,heading1:P(yl),heading2:P(yl),heading3:P(yl),heading4:P(yl),heading5:P(yl),heading6:P(yl),contentSeparator:P(Li),list:P(Li),quote:P(Li),emphasis:P(Li),strong:P(Li),link:P(Li),monospace:P(Li),strikethrough:P(Li),inserted:P(),deleted:P(),changed:P(),invalid:P(),meta:tu,documentMeta:P(tu),annotation:P(tu),processingInstruction:P(tu),definition:fi.defineModifier("definition"),constant:fi.defineModifier("constant"),function:fi.defineModifier("function"),standard:fi.defineModifier("standard"),local:fi.defineModifier("local"),special:fi.defineModifier("special")};for(let l in J){let t=J[l];t instanceof fi&&(t.name=l)}_b([{tag:J.link,class:"tok-link"},{tag:J.heading,class:"tok-heading"},{tag:J.emphasis,class:"tok-emphasis"},{tag:J.strong,class:"tok-strong"},{tag:J.keyword,class:"tok-keyword"},{tag:J.atom,class:"tok-atom"},{tag:J.bool,class:"tok-bool"},{tag:J.url,class:"tok-url"},{tag:J.labelName,class:"tok-labelName"},{tag:J.inserted,class:"tok-inserted"},{tag:J.deleted,class:"tok-deleted"},{tag:J.literal,class:"tok-literal"},{tag:J.string,class:"tok-string"},{tag:J.number,class:"tok-number"},{tag:[J.regexp,J.escape,J.special(J.string)],class:"tok-string2"},{tag:J.variableName,class:"tok-variableName"},{tag:J.local(J.variableName),class:"tok-variableName tok-local"},{tag:J.definition(J.variableName),class:"tok-variableName tok-definition"},{tag:J.special(J.variableName),class:"tok-variableName2"},{tag:J.definition(J.propertyName),class:"tok-propertyName tok-definition"},{tag:J.typeName,class:"tok-typeName"},{tag:J.namespace,class:"tok-namespace"},{tag:J.className,class:"tok-className"},{tag:J.macroName,class:"tok-macroName"},{tag:J.propertyName,class:"tok-propertyName"},{tag:J.operator,class:"tok-operator"},{tag:J.comment,class:"tok-comment"},{tag:J.meta,class:"tok-meta"},{tag:J.invalid,class:"tok-invalid"},{tag:J.punctuation,class:"tok-punctuation"}]);var zh;const Qr=new Mt,KC=new Mt;class Ui{constructor(t,e,n=[],r=""){this.data=t,this.name=r,kt.prototype.hasOwnProperty("tree")||Object.defineProperty(kt.prototype,"tree",{get(){return De(this)}}),this.parser=e,this.extension=[Jn.of(this),kt.languageData.of((o,u,f)=>{let h=E1(o,u,f),m=h.type.prop(Qr);if(!m)return[];let p=o.facet(m),y=h.type.prop(KC);if(y){let v=h.resolve(u-h.from,f);for(let S of y)if(S.test(v,o)){let w=o.facet(S.facet);return S.type=="replace"?w:w.concat(p)}}return p})].concat(n)}isActiveAt(t,e,n=-1){return E1(t,e,n).type.prop(Qr)==this.data}findRegions(t){let e=t.facet(Jn);if(e?.data==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let n=[],r=(o,u)=>{if(o.prop(Qr)==this.data){n.push({from:u,to:u+o.length});return}let f=o.prop(Mt.mounted);if(f){if(f.tree.prop(Qr)==this.data){if(f.overlay)for(let h of f.overlay)n.push({from:h.from+u,to:h.to+u});else n.push({from:u,to:u+o.length});return}else if(f.overlay){let h=n.length;if(r(f.tree,f.overlay[0].from+u),n.length>h)return}}for(let h=0;h<o.children.length;h++){let m=o.children[h];m instanceof ke&&r(m,o.positions[h]+u)}};return r(De(t),0),n}get allowsNesting(){return!0}}Ui.setState=pt.define();function E1(l,t,e){let n=l.facet(Jn),r=De(l).topNode;if(!n||n.allowsNesting)for(let o=r;o;o=o.enter(t,e,ve.ExcludeBuffers))o.type.isTop&&(r=o);return r}function De(l){let t=l.field(Ui.state,!1);return t?t.tree:ke.empty}class QC{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}}let Vr=null;class ku{constructor(t,e,n=[],r,o,u,f,h){this.parser=t,this.state=e,this.fragments=n,this.tree=r,this.treeLen=o,this.viewport=u,this.skipped=f,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(t,e,n){return new ku(t,e,[],ke.empty,0,n,[],null)}startParse(){return this.parser.startParse(new QC(this.state.doc),this.fragments)}work(t,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=ke.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof t=="number"){let r=Date.now()+t;t=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(wl.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(wl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=Vr;Vr=this;try{return t()}finally{Vr=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=R1(t,e.from,e.to);return t}changes(t,e){let{fragments:n,tree:r,treeLen:o,viewport:u,skipped:f}=this;if(this.takeTree(),!t.empty){let h=[];if(t.iterChangedRanges((m,p,y,v)=>h.push({fromA:m,toA:p,fromB:y,toB:v})),n=wl.applyChanges(n,h),r=ke.empty,o=0,u={from:t.mapPos(u.from,-1),to:t.mapPos(u.to,1)},this.skipped.length){f=[];for(let m of this.skipped){let p=t.mapPos(m.from,1),y=t.mapPos(m.to,-1);p<y&&f.push({from:p,to:y})}}}return new ku(this.parser,e,n,r,o,u,f,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:o}=this.skipped[n];r<t.to&&o>t.from&&(this.fragments=R1(this.fragments,r,o),this.skipped.splice(n--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends LC{createParse(e,n,r){let o=r[0].from,u=r[r.length-1].to;return{parsedPos:o,advance(){let h=Vr;if(h){for(let m of r)h.tempSkipped.push(m);t&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,t]):t)}return this.parsedPos=u,new ke(yi.none,[],[],u-o)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&e[0].from==0&&e[0].to>=t}static get(){return Vr}}function R1(l,t,e){return wl.applyChanges(l,[{fromA:t,toA:e,fromB:t,toB:e}])}class Rs{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,n)||e.takeTree(),new Rs(e)}static init(t){let e=Math.min(3e3,t.doc.length),n=ku.create(t.facet(Jn).parser,t,{from:0,to:e});return n.work(20,e)||n.takeTree(),new Rs(n)}}Ui.state=Se.define({create:Rs.init,update(l,t){for(let e of t.effects)if(e.is(Ui.setState))return e.value;return t.startState.facet(Jn)!=t.state.facet(Jn)?Rs.init(t.state):l.apply(t)}});let Ub=l=>{let t=setTimeout(()=>l(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(Ub=l=>{let t=-1,e=setTimeout(()=>{t=requestIdleCallback(l,{timeout:400})},100);return()=>t<0?clearTimeout(e):cancelIdleCallback(t)});const Hh=typeof navigator<"u"&&(!((zh=navigator.scheduling)===null||zh===void 0)&&zh.isInputPending)?()=>navigator.scheduling.isInputPending():null,ZC=ne.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(Ui.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(Ui.state);(e.tree!=e.context.tree||!e.context.isDone(t.doc.length))&&(this.working=Ub(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,o=n.field(Ui.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let u=Date.now()+Math.min(this.chunkBudget,100,t&&!Hh?Math.max(25,t.timeRemaining()-5):1e9),f=o.context.treeLen<r&&n.doc.length>r+1e3,h=o.context.work(()=>Hh&&Hh()||Date.now()>u,r+(f?0:1e5));this.chunkBudget-=Date.now()-e,(h||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Ui.setState.of(new Rs(o.context))})),this.chunkBudget>0&&!(h&&!f)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(e=>je(this.view.state,e)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Jn=$.define({combine(l){return l.length?l[0]:null},enables:l=>[Ui.state,ZC,I.contentAttributes.compute([l],t=>{let e=t.facet(l);return e&&e.name?{"data-language":e.name}:{}})]}),WC=$.define(),rm=$.define({combine:l=>{if(!l.length)return"  ";let t=l[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(l[0]));return t}});function Du(l){let t=l.facet(rm);return t.charCodeAt(0)==9?l.tabSize*t.length:t.length}function uo(l,t){let e="",n=l.tabSize,r=l.facet(rm)[0];if(r=="	"){for(;t>=n;)e+="	",t-=n;r=" "}for(let o=0;o<t;o++)e+=r;return e}function om(l,t){l instanceof kt&&(l=new Xu(l));for(let n of l.state.facet(WC)){let r=n(l,t);if(r!==void 0)return r}let e=De(l.state);return e.length>=t?JC(l,e,t):null}class Xu{constructor(t,e={}){this.state=t,this.options=e,this.unit=Du(t)}lineAt(t,e=1){let n=this.state.doc.lineAt(t),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=n.from&&r<=n.to?o&&r==t?{text:"",from:t}:(e<0?r<t:r<=t)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(t,e);return n.slice(t-r,Math.min(n.length,t+100-r))}column(t,e=1){let{text:n,from:r}=this.lineAt(t,e),o=this.countColumn(n,t-r),u=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return u>-1&&(o+=u-this.countColumn(n,n.search(/\S|$/))),o}countColumn(t,e=t.length){return Ls(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:n,from:r}=this.lineAt(t,e),o=this.options.overrideIndentation;if(o){let u=o(r);if(u>-1)return u}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const PC=new Mt;function JC(l,t,e){let n=t.resolveStack(e),r=t.resolveInner(e,-1).resolve(e,0).enterUnfinishedNodesBefore(e);if(r!=n.node){let o=[];for(let u=r;u&&!(u.from<n.node.from||u.to>n.node.to||u.from==n.node.from&&u.type==n.node.type);u=u.parent)o.push(u);for(let u=o.length-1;u>=0;u--)n={node:o[u],next:n}}return qb(n,l,e)}function qb(l,t,e){for(let n=l;n;n=n.next){let r=IC(n.node);if(r)return r(am.create(t,e,n))}return 0}function FC(l){return l.pos==l.options.simulateBreak&&l.options.simulateDoubleBreak}function IC(l){let t=l.type.prop(PC);if(t)return t;let e=l.firstChild,n;if(e&&(n=e.type.prop(Mt.closedBy))){let r=l.lastChild,o=r&&n.indexOf(r.name)>-1;return u=>iT(u,!0,1,void 0,o&&!FC(u)?r.from:void 0)}return l.parent==null?$C:null}function $C(){return 0}class am extends Xu{constructor(t,e,n){super(t.state,t.options),this.base=t,this.pos=e,this.context=n}get node(){return this.context.node}static create(t,e,n){return new am(t,e,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let n=t.resolve(e.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(tT(n,t))break;e=this.state.doc.lineAt(n.from)}return this.lineIndent(e.from)}continue(){return qb(this.context.next,this.base,this.pos)}}function tT(l,t){for(let e=t;e;e=e.parent)if(l==e)return!0;return!1}function eT(l){let t=l.node,e=t.childAfter(t.from),n=t.lastChild;if(!e)return null;let r=l.options.simulateBreak,o=l.state.doc.lineAt(e.from),u=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let f=e.to;;){let h=t.childAfter(f);if(!h||h==n)return null;if(!h.type.isSkipped){if(h.from>=u)return null;let m=/^ */.exec(o.text.slice(e.to-o.from))[0].length;return{from:e.from,to:e.to+m}}f=h.to}}function iT(l,t,e,n,r){let o=l.textAfter,u=o.match(/^\s*/)[0].length,f=n&&o.slice(u,u+n.length)==n||r==l.pos+u,h=eT(l);return h?f?l.column(h.from):l.column(h.to):l.baseIndent+(f?0:l.unit*e)}const nT=200;function lT(){return kt.transactionFilter.of(l=>{if(!l.docChanged||!l.isUserEvent("input.type")&&!l.isUserEvent("input.complete"))return l;let t=l.startState.languageDataAt("indentOnInput",l.startState.selection.main.head);if(!t.length)return l;let e=l.newDoc,{head:n}=l.newSelection.main,r=e.lineAt(n);if(n>r.from+nT)return l;let o=e.sliceString(r.from,n);if(!t.some(m=>m.test(o)))return l;let{state:u}=l,f=-1,h=[];for(let{head:m}of u.selection.ranges){let p=u.doc.lineAt(m);if(p.from==f)continue;f=p.from;let y=om(u,p.from);if(y==null)continue;let v=/^\s*/.exec(p.text)[0],S=uo(u,y);v!=S&&h.push({from:p.from,to:p.from+v.length,insert:S})}return h.length?[l,{changes:h,sequential:!0}]:l})}const sT=$.define(),rT=new Mt;function oT(l,t,e){let n=De(l);if(n.length<e)return null;let r=n.resolveStack(e,1),o=null;for(let u=r;u;u=u.next){let f=u.node;if(f.to<=e||f.from>e)continue;if(o&&f.from<t)break;let h=f.type.prop(rT);if(h&&(f.to<n.length-50||n.length==l.doc.length||!aT(f))){let m=h(f,l);m&&m.from<=e&&m.from>=t&&m.to>e&&(o=m)}}return o}function aT(l){let t=l.lastChild;return t&&t.to==l.to&&t.type.isError}function Ou(l,t,e){for(let n of l.facet(sT)){let r=n(l,t,e);if(r)return r}return oT(l,t,e)}function Vb(l,t){let e=t.mapPos(l.from,1),n=t.mapPos(l.to,-1);return e>=n?void 0:{from:e,to:n}}const Ku=pt.define({map:Vb}),bo=pt.define({map:Vb});function Yb(l){let t=[];for(let{head:e}of l.state.selection.ranges)t.some(n=>n.from<=e&&n.to>=e)||t.push(l.lineBlockAt(e));return t}const Dl=Se.define({create(){return ut.none},update(l,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((e,n)=>l=B1(l,e,n)),l=l.map(t.changes);for(let e of t.effects)if(e.is(Ku)&&!uT(l,e.value.from,e.value.to)){let{preparePlaceholder:n}=t.state.facet(Xb),r=n?ut.replace({widget:new pT(n(t.state,e.value))}):N1;l=l.update({add:[r.range(e.value.from,e.value.to)]})}else e.is(bo)&&(l=l.update({filter:(n,r)=>e.value.from!=n||e.value.to!=r,filterFrom:e.value.from,filterTo:e.value.to}));return t.selection&&(l=B1(l,t.selection.main.head)),l},provide:l=>I.decorations.from(l),toJSON(l,t){let e=[];return l.between(0,t.doc.length,(n,r)=>{e.push(n,r)}),e},fromJSON(l){if(!Array.isArray(l)||l.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let e=0;e<l.length;){let n=l[e++],r=l[e++];if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");t.push(N1.range(n,r))}return ut.set(t,!0)}});function B1(l,t,e=t){let n=!1;return l.between(t,e,(r,o)=>{r<e&&o>t&&(n=!0)}),n?l.update({filterFrom:t,filterTo:e,filter:(r,o)=>r>=e||o<=t}):l}function Eu(l,t,e){var n;let r=null;return(n=l.field(Dl,!1))===null||n===void 0||n.between(t,e,(o,u)=>{(!r||r.from>o)&&(r={from:o,to:u})}),r}function uT(l,t,e){let n=!1;return l.between(t,t,(r,o)=>{r==t&&o==e&&(n=!0)}),n}function jb(l,t){return l.field(Dl,!1)?t:t.concat(pt.appendConfig.of(Kb()))}const cT=l=>{for(let t of Yb(l)){let e=Ou(l.state,t.from,t.to);if(e)return l.dispatch({effects:jb(l.state,[Ku.of(e),Gb(l,e)])}),!0}return!1},fT=l=>{if(!l.state.field(Dl,!1))return!1;let t=[];for(let e of Yb(l)){let n=Eu(l.state,e.from,e.to);n&&t.push(bo.of(n),Gb(l,n,!1))}return t.length&&l.dispatch({effects:t}),t.length>0};function Gb(l,t,e=!0){let n=l.state.doc.lineAt(t.from).number,r=l.state.doc.lineAt(t.to).number;return I.announce.of(`${l.state.phrase(e?"Folded lines":"Unfolded lines")} ${n} ${l.state.phrase("to")} ${r}.`)}const hT=l=>{let{state:t}=l,e=[];for(let n=0;n<t.doc.length;){let r=l.lineBlockAt(n),o=Ou(t,r.from,r.to);o&&e.push(Ku.of(o)),n=(o?l.lineBlockAt(o.to):r).to+1}return e.length&&l.dispatch({effects:jb(l.state,e)}),!!e.length},dT=l=>{let t=l.state.field(Dl,!1);if(!t||!t.size)return!1;let e=[];return t.between(0,l.state.doc.length,(n,r)=>{e.push(bo.of({from:n,to:r}))}),l.dispatch({effects:e}),!0},mT=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:cT},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:fT},{key:"Ctrl-Alt-[",run:hT},{key:"Ctrl-Alt-]",run:dT}],gT={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Xb=$.define({combine(l){return Gi(l,gT)}});function Kb(l){return[Dl,bT]}function Qb(l,t){let{state:e}=l,n=e.facet(Xb),r=u=>{let f=l.lineBlockAt(l.posAtDOM(u.target)),h=Eu(l.state,f.from,f.to);h&&l.dispatch({effects:bo.of(h)}),u.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(l,r,t);let o=document.createElement("span");return o.textContent=n.placeholderText,o.setAttribute("aria-label",e.phrase("folded code")),o.title=e.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const N1=ut.replace({widget:new class extends Fn{toDOM(l){return Qb(l,null)}}});class pT extends Fn{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return Qb(t,this.value)}}const yT={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class _h extends fn{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function vT(l={}){let t={...yT,...l},e=new _h(t,!0),n=new _h(t,!1),r=ne.fromClass(class{constructor(u){this.from=u.viewport.from,this.markers=this.buildMarkers(u)}update(u){(u.docChanged||u.viewportChanged||u.startState.facet(Jn)!=u.state.facet(Jn)||u.startState.field(Dl,!1)!=u.state.field(Dl,!1)||De(u.startState)!=De(u.state)||t.foldingChanged(u))&&(this.markers=this.buildMarkers(u.view))}buildMarkers(u){let f=new un;for(let h of u.viewportLineBlocks){let m=Eu(u.state,h.from,h.to)?n:Ou(u.state,h.from,h.to)?e:null;m&&f.add(h.from,h.from,m)}return f.finish()}}),{domEventHandlers:o}=t;return[r,pC({class:"cm-foldGutter",markers(u){var f;return((f=u.plugin(r))===null||f===void 0?void 0:f.markers)||Dt.empty},initialSpacer(){return new _h(t,!1)},domEventHandlers:{...o,click:(u,f,h)=>{if(o.click&&o.click(u,f,h))return!0;let m=Eu(u.state,f.from,f.to);if(m)return u.dispatch({effects:bo.of(m)}),!0;let p=Ou(u.state,f.from,f.to);return p?(u.dispatch({effects:Ku.of(p)}),!0):!1}}}),Kb()]}const bT=I.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Qu{constructor(t,e){this.specs=t;let n;function r(f){let h=Qn.newName();return(n||(n=Object.create(null)))["."+h]=f,h}const o=typeof e.all=="string"?e.all:e.all?r(e.all):void 0,u=e.scope;this.scope=u instanceof Ui?f=>f.prop(Qr)==u.data:u?f=>f==u:void 0,this.style=_b(t.map(f=>({tag:f.tag,class:f.class||r(Object.assign({},f,{tag:null}))})),{all:o}).style,this.module=n?new Qn(n):null,this.themeType=e.themeType}static define(t,e){return new Qu(t,e||{})}}const Ed=$.define(),Zb=$.define({combine(l){return l.length?[l[0]]:null}});function Uh(l){let t=l.facet(Ed);return t.length?t:l.facet(Zb)}function ST(l,t){let e=[wT],n;return l instanceof Qu&&(l.module&&e.push(I.styleModule.of(l.module)),n=l.themeType),t?.fallback?e.push(Zb.of(l)):n?e.push(Ed.computeN([I.darkTheme],r=>r.facet(I.darkTheme)==(n=="dark")?[l]:[])):e.push(Ed.of(l)),e}class xT{constructor(t){this.markCache=Object.create(null),this.tree=De(t.state),this.decorations=this.buildDeco(t,Uh(t.state)),this.decoratedTo=t.viewport.to}update(t){let e=De(t.state),n=Uh(t.state),r=n!=Uh(t.startState),{viewport:o}=t.view,u=t.changes.mapPos(this.decoratedTo,1);e.length<o.to&&!r&&e.type==this.tree.type&&u>=o.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=u):(e!=this.tree||t.viewportChanged||r)&&(this.tree=e,this.decorations=this.buildDeco(t.view,n),this.decoratedTo=o.to)}buildDeco(t,e){if(!e||!this.tree.length)return ut.none;let n=new un;for(let{from:r,to:o}of t.visibleRanges)jC(this.tree,e,(u,f,h)=>{n.add(u,f,this.markCache[h]||(this.markCache[h]=ut.mark({class:h})))},r,o);return n.finish()}}const wT=Ol.high(ne.fromClass(xT,{decorations:l=>l.decorations})),AT=Qu.define([{tag:J.meta,color:"#404740"},{tag:J.link,textDecoration:"underline"},{tag:J.heading,textDecoration:"underline",fontWeight:"bold"},{tag:J.emphasis,fontStyle:"italic"},{tag:J.strong,fontWeight:"bold"},{tag:J.strikethrough,textDecoration:"line-through"},{tag:J.keyword,color:"#708"},{tag:[J.atom,J.bool,J.url,J.contentSeparator,J.labelName],color:"#219"},{tag:[J.literal,J.inserted],color:"#164"},{tag:[J.string,J.deleted],color:"#a11"},{tag:[J.regexp,J.escape,J.special(J.string)],color:"#e40"},{tag:J.definition(J.variableName),color:"#00f"},{tag:J.local(J.variableName),color:"#30a"},{tag:[J.typeName,J.namespace],color:"#085"},{tag:J.className,color:"#167"},{tag:[J.special(J.variableName),J.macroName],color:"#256"},{tag:J.definition(J.propertyName),color:"#00c"},{tag:J.comment,color:"#940"},{tag:J.invalid,color:"#f00"}]),MT=I.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Wb=1e4,Pb="()[]{}",Jb=$.define({combine(l){return Gi(l,{afterCursor:!0,brackets:Pb,maxScanDistance:Wb,renderMatch:kT})}}),CT=ut.mark({class:"cm-matchingBracket"}),TT=ut.mark({class:"cm-nonmatchingBracket"});function kT(l){let t=[],e=l.matched?CT:TT;return t.push(e.range(l.start.from,l.start.to)),l.end&&t.push(e.range(l.end.from,l.end.to)),t}const DT=Se.define({create(){return ut.none},update(l,t){if(!t.docChanged&&!t.selection)return l;let e=[],n=t.state.facet(Jb);for(let r of t.state.selection.ranges){if(!r.empty)continue;let o=qi(t.state,r.head,-1,n)||r.head>0&&qi(t.state,r.head-1,1,n)||n.afterCursor&&(qi(t.state,r.head,1,n)||r.head<t.state.doc.length&&qi(t.state,r.head+1,-1,n));o&&(e=e.concat(n.renderMatch(o,t.state)))}return ut.set(e,!0)},provide:l=>I.decorations.from(l)}),OT=[DT,MT];function ET(l={}){return[Jb.of(l),OT]}const RT=new Mt;function Rd(l,t,e){let n=l.prop(t<0?Mt.openedBy:Mt.closedBy);if(n)return n;if(l.name.length==1){let r=e.indexOf(l.name);if(r>-1&&r%2==(t<0?1:0))return[e[r+t]]}return null}function Bd(l){let t=l.type.prop(RT);return t?t(l.node):l}function qi(l,t,e,n={}){let r=n.maxScanDistance||Wb,o=n.brackets||Pb,u=De(l),f=u.resolveInner(t,e);for(let h=f;h;h=h.parent){let m=Rd(h.type,e,o);if(m&&h.from<h.to){let p=Bd(h);if(p&&(e>0?t>=p.from&&t<p.to:t>p.from&&t<=p.to))return BT(l,t,e,h,p,m,o)}}return NT(l,t,e,u,f.type,r,o)}function BT(l,t,e,n,r,o,u){let f=n.parent,h={from:r.from,to:r.to},m=0,p=f?.cursor();if(p&&(e<0?p.childBefore(n.from):p.childAfter(n.to)))do if(e<0?p.to<=n.from:p.from>=n.to){if(m==0&&o.indexOf(p.type.name)>-1&&p.from<p.to){let y=Bd(p);return{start:h,end:y?{from:y.from,to:y.to}:void 0,matched:!0}}else if(Rd(p.type,e,u))m++;else if(Rd(p.type,-e,u)){if(m==0){let y=Bd(p);return{start:h,end:y&&y.from<y.to?{from:y.from,to:y.to}:void 0,matched:!1}}m--}}while(e<0?p.prevSibling():p.nextSibling());return{start:h,matched:!1}}function NT(l,t,e,n,r,o,u){let f=e<0?l.sliceDoc(t-1,t):l.sliceDoc(t,t+1),h=u.indexOf(f);if(h<0||h%2==0!=e>0)return null;let m={from:e<0?t-1:t,to:e>0?t+1:t},p=l.doc.iterRange(t,e>0?l.doc.length:0),y=0;for(let v=0;!p.next().done&&v<=o;){let S=p.value;e<0&&(v+=S.length);let w=t+v*e;for(let M=e>0?0:S.length-1,k=e>0?S.length:-1;M!=k;M+=e){let R=u.indexOf(S[M]);if(!(R<0||n.resolveInner(w+M,1).type!=r))if(R%2==0==e>0)y++;else{if(y==1)return{start:m,end:{from:w+M,to:w+M+1},matched:R>>1==h>>1};y--}}e>0&&(v+=S.length)}return p.done?{start:m,matched:!1}:null}const LT=Object.create(null),L1=[yi.none],z1=[],H1=Object.create(null),zT=Object.create(null);for(let[l,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])zT[l]=HT(LT,t);function qh(l,t){z1.indexOf(l)>-1||(z1.push(l),console.warn(t))}function HT(l,t){let e=[];for(let f of t.split(" ")){let h=[];for(let m of f.split(".")){let p=l[m]||J[m];p?typeof p=="function"?h.length?h=h.map(p):qh(m,`Modifier ${m} used at start of tag`):h.length?qh(m,`Tag ${m} used as modifier`):h=Array.isArray(p)?p:[p]:qh(m,`Unknown highlighting tag ${m}`)}for(let m of h)e.push(m)}if(!e.length)return 0;let n=t.replace(/ /g,"_"),r=n+" "+e.map(f=>f.id),o=H1[r];if(o)return o.id;let u=H1[r]=yi.define({id:L1.length,name:n,props:[VC({[n]:e})]});return L1.push(u),u.id}Xt.RTL,Xt.LTR;const _T=l=>{let{state:t}=l,e=t.doc.lineAt(t.selection.main.from),n=cm(l.state,e.from);return n.line?UT(l):n.block?VT(l):!1};function um(l,t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=l(t,e);return r?(n(e.update(r)),!0):!1}}const UT=um(GT,0),qT=um(Fb,0),VT=um((l,t)=>Fb(l,t,jT(t)),0);function cm(l,t){let e=l.languageDataAt("commentTokens",t,1);return e.length?e[0]:{}}const Yr=50;function YT(l,{open:t,close:e},n,r){let o=l.sliceDoc(n-Yr,n),u=l.sliceDoc(r,r+Yr),f=/\s*$/.exec(o)[0].length,h=/^\s*/.exec(u)[0].length,m=o.length-f;if(o.slice(m-t.length,m)==t&&u.slice(h,h+e.length)==e)return{open:{pos:n-f,margin:f&&1},close:{pos:r+h,margin:h&&1}};let p,y;r-n<=2*Yr?p=y=l.sliceDoc(n,r):(p=l.sliceDoc(n,n+Yr),y=l.sliceDoc(r-Yr,r));let v=/^\s*/.exec(p)[0].length,S=/\s*$/.exec(y)[0].length,w=y.length-S-e.length;return p.slice(v,v+t.length)==t&&y.slice(w,w+e.length)==e?{open:{pos:n+v+t.length,margin:/\s/.test(p.charAt(v+t.length))?1:0},close:{pos:r-S-e.length,margin:/\s/.test(y.charAt(w-1))?1:0}}:null}function jT(l){let t=[];for(let e of l.selection.ranges){let n=l.doc.lineAt(e.from),r=e.to<=n.to?n:l.doc.lineAt(e.to);r.from>n.from&&r.from==e.to&&(r=e.to==n.to+1?n:l.doc.lineAt(e.to-1));let o=t.length-1;o>=0&&t[o].to>n.from?t[o].to=r.to:t.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:r.to})}return t}function Fb(l,t,e=t.selection.ranges){let n=e.map(o=>cm(t,o.from).block);if(!n.every(o=>o))return null;let r=e.map((o,u)=>YT(t,n[u],o.from,o.to));if(l!=2&&!r.every(o=>o))return{changes:t.changes(e.map((o,u)=>r[u]?[]:[{from:o.from,insert:n[u].open+" "},{from:o.to,insert:" "+n[u].close}]))};if(l!=1&&r.some(o=>o)){let o=[];for(let u=0,f;u<r.length;u++)if(f=r[u]){let h=n[u],{open:m,close:p}=f;o.push({from:m.pos-h.open.length,to:m.pos+m.margin},{from:p.pos-p.margin,to:p.pos+h.close.length})}return{changes:o}}return null}function GT(l,t,e=t.selection.ranges){let n=[],r=-1;for(let{from:o,to:u}of e){let f=n.length,h=1e9,m=cm(t,o).line;if(m){for(let p=o;p<=u;){let y=t.doc.lineAt(p);if(y.from>r&&(o==u||u>y.from)){r=y.from;let v=/^\s*/.exec(y.text)[0].length,S=v==y.length,w=y.text.slice(v,v+m.length)==m?v:-1;v<y.text.length&&v<h&&(h=v),n.push({line:y,comment:w,token:m,indent:v,empty:S,single:!1})}p=y.to+1}if(h<1e9)for(let p=f;p<n.length;p++)n[p].indent<n[p].line.text.length&&(n[p].indent=h);n.length==f+1&&(n[f].single=!0)}}if(l!=2&&n.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:f,token:h,indent:m,empty:p,single:y}of n)(y||!p)&&o.push({from:f.from+m,insert:h+" "});let u=t.changes(o);return{changes:u,selection:t.selection.map(u,1)}}else if(l!=1&&n.some(o=>o.comment>=0)){let o=[];for(let{line:u,comment:f,token:h}of n)if(f>=0){let m=u.from+f,p=m+h.length;u.text[p-u.from]==" "&&p++,o.push({from:m,to:p})}return{changes:o}}return null}const Nd=hn.define(),XT=hn.define(),KT=$.define(),Ib=$.define({combine(l){return Gi(l,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(n,r)=>t(n,r)||e(n,r)})}}),$b=Se.define({create(){return Vi.empty},update(l,t){let e=t.state.facet(Ib),n=t.annotation(Nd);if(n){let h=Ge.fromTransaction(t,n.selection),m=n.side,p=m==0?l.undone:l.done;return h?p=Ru(p,p.length,e.minDepth,h):p=iS(p,t.startState.selection),new Vi(m==0?n.rest:p,m==0?p:n.rest)}let r=t.annotation(XT);if((r=="full"||r=="before")&&(l=l.isolate()),t.annotation(oe.addToHistory)===!1)return t.changes.empty?l:l.addMapping(t.changes.desc);let o=Ge.fromTransaction(t),u=t.annotation(oe.time),f=t.annotation(oe.userEvent);return o?l=l.addChanges(o,u,f,e,t):t.selection&&(l=l.addSelection(t.startState.selection,u,f,e.newGroupDelay)),(r=="full"||r=="after")&&(l=l.isolate()),l},toJSON(l){return{done:l.done.map(t=>t.toJSON()),undone:l.undone.map(t=>t.toJSON())}},fromJSON(l){return new Vi(l.done.map(Ge.fromJSON),l.undone.map(Ge.fromJSON))}});function QT(l={}){return[$b,Ib.of(l),I.domEventHandlers({beforeinput(t,e){let n=t.inputType=="historyUndo"?tS:t.inputType=="historyRedo"?Ld:null;return n?(t.preventDefault(),n(e)):!1}})]}function Zu(l,t){return function({state:e,dispatch:n}){if(!t&&e.readOnly)return!1;let r=e.field($b,!1);if(!r)return!1;let o=r.pop(l,e,t);return o?(n(o),!0):!1}}const tS=Zu(0,!1),Ld=Zu(1,!1),ZT=Zu(0,!0),WT=Zu(1,!0);class Ge{constructor(t,e,n,r,o){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=r,this.selectionsAfter=o}setSelAfter(t){return new Ge(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,n;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(e=this.mapped)===null||e===void 0?void 0:e.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(t){return new Ge(t.changes&&re.fromJSON(t.changes),[],t.mapped&&Yi.fromJSON(t.mapped),t.startSelection&&V.fromJSON(t.startSelection),t.selectionsAfter.map(V.fromJSON))}static fromTransaction(t,e){let n=hi;for(let r of t.startState.facet(KT)){let o=r(t);o.length&&(n=n.concat(o))}return!n.length&&t.changes.empty?null:new Ge(t.changes.invert(t.startState.doc),n,void 0,e||t.startState.selection,hi)}static selection(t){return new Ge(void 0,hi,void 0,void 0,t)}}function Ru(l,t,e,n){let r=t+1>e+20?t-e-1:0,o=l.slice(r,t);return o.push(n),o}function PT(l,t){let e=[],n=!1;return l.iterChangedRanges((r,o)=>e.push(r,o)),t.iterChangedRanges((r,o,u,f)=>{for(let h=0;h<e.length;){let m=e[h++],p=e[h++];f>=m&&u<=p&&(n=!0)}}),n}function JT(l,t){return l.ranges.length==t.ranges.length&&l.ranges.filter((e,n)=>e.empty!=t.ranges[n].empty).length===0}function eS(l,t){return l.length?t.length?l.concat(t):l:t}const hi=[],FT=200;function iS(l,t){if(l.length){let e=l[l.length-1],n=e.selectionsAfter.slice(Math.max(0,e.selectionsAfter.length-FT));return n.length&&n[n.length-1].eq(t)?l:(n.push(t),Ru(l,l.length-1,1e9,e.setSelAfter(n)))}else return[Ge.selection([t])]}function IT(l){let t=l[l.length-1],e=l.slice();return e[l.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),e}function Vh(l,t){if(!l.length)return l;let e=l.length,n=hi;for(;e;){let r=$T(l[e-1],t,n);if(r.changes&&!r.changes.empty||r.effects.length){let o=l.slice(0,e);return o[e-1]=r,o}else t=r.mapped,e--,n=r.selectionsAfter}return n.length?[Ge.selection(n)]:hi}function $T(l,t,e){let n=eS(l.selectionsAfter.length?l.selectionsAfter.map(f=>f.map(t)):hi,e);if(!l.changes)return Ge.selection(n);let r=l.changes.map(t),o=t.mapDesc(l.changes,!0),u=l.mapped?l.mapped.composeDesc(o):o;return new Ge(r,pt.mapEffects(l.effects,t),u,l.startSelection.map(o),n)}const tk=/^(input\.type|delete)($|\.)/;class Vi{constructor(t,e,n=0,r=void 0){this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new Vi(this.done,this.undone):this}addChanges(t,e,n,r,o){let u=this.done,f=u[u.length-1];return f&&f.changes&&!f.changes.empty&&t.changes&&(!n||tk.test(n))&&(!f.selectionsAfter.length&&e-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,PT(f.changes,t.changes))||n=="input.type.compose")?u=Ru(u,u.length-1,r.minDepth,new Ge(t.changes.compose(f.changes),eS(pt.mapEffects(t.effects,f.changes),f.effects),f.mapped,f.startSelection,hi)):u=Ru(u,u.length,r.minDepth,t),new Vi(u,hi,e,n)}addSelection(t,e,n,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:hi;return o.length>0&&e-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&JT(o[o.length-1],t)?this:new Vi(iS(this.done,t),this.undone,e,n)}addMapping(t){return new Vi(Vh(this.done,t),Vh(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,n){let r=t==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],u=o.selectionsAfter[0]||e.selection;if(n&&o.selectionsAfter.length)return e.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Nd.of({side:t,rest:IT(r),selection:u}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let f=r.length==1?hi:r.slice(0,r.length-1);return o.mapped&&(f=Vh(f,o.mapped)),e.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Nd.of({side:t,rest:f,selection:u}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}Vi.empty=new Vi(hi,hi);const ek=[{key:"Mod-z",run:tS,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ld,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ld,preventDefault:!0},{key:"Mod-u",run:ZT,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:WT,preventDefault:!0}];function zs(l,t){return V.create(l.ranges.map(t),l.mainIndex)}function Xi(l,t){return l.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Mi({state:l,dispatch:t},e){let n=zs(l.selection,e);return n.eq(l.selection,!0)?!1:(t(Xi(l,n)),!0)}function Wu(l,t){return V.cursor(t?l.to:l.from)}function nS(l,t){return Mi(l,e=>e.empty?l.moveByChar(e,t):Wu(e,t))}function Oe(l){return l.textDirectionAt(l.state.selection.main.head)==Xt.LTR}const lS=l=>nS(l,!Oe(l)),sS=l=>nS(l,Oe(l));function rS(l,t){return Mi(l,e=>e.empty?l.moveByGroup(e,t):Wu(e,t))}const ik=l=>rS(l,!Oe(l)),nk=l=>rS(l,Oe(l));function lk(l,t,e){if(t.type.prop(e))return!0;let n=t.to-t.from;return n&&(n>2||/[^\s,.;:]/.test(l.sliceDoc(t.from,t.to)))||t.firstChild}function Pu(l,t,e){let n=De(l).resolveInner(t.head),r=e?Mt.closedBy:Mt.openedBy;for(let h=t.head;;){let m=e?n.childAfter(h):n.childBefore(h);if(!m)break;lk(l,m,r)?n=m:h=e?m.to:m.from}let o=n.type.prop(r),u,f;return o&&(u=e?qi(l,n.from,1):qi(l,n.to,-1))&&u.matched?f=e?u.end.to:u.end.from:f=e?n.to:n.from,V.cursor(f,e?-1:1)}const sk=l=>Mi(l,t=>Pu(l.state,t,!Oe(l))),rk=l=>Mi(l,t=>Pu(l.state,t,Oe(l)));function oS(l,t){return Mi(l,e=>{if(!e.empty)return Wu(e,t);let n=l.moveVertically(e,t);return n.head!=e.head?n:l.moveToLineBoundary(e,t)})}const aS=l=>oS(l,!1),uS=l=>oS(l,!0);function cS(l){let t=l.scrollDOM.clientHeight<l.scrollDOM.scrollHeight-2,e=0,n=0,r;if(t){for(let o of l.state.facet(I.scrollMargins)){let u=o(l);u?.top&&(e=Math.max(u?.top,e)),u?.bottom&&(n=Math.max(u?.bottom,n))}r=l.scrollDOM.clientHeight-e-n}else r=(l.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:e,marginBottom:n,selfScroll:t,height:Math.max(l.defaultLineHeight,r-5)}}function fS(l,t){let e=cS(l),{state:n}=l,r=zs(n.selection,u=>u.empty?l.moveVertically(u,t,e.height):Wu(u,t));if(r.eq(n.selection))return!1;let o;if(e.selfScroll){let u=l.coordsAtPos(n.selection.main.head),f=l.scrollDOM.getBoundingClientRect(),h=f.top+e.marginTop,m=f.bottom-e.marginBottom;u&&u.top>h&&u.bottom<m&&(o=I.scrollIntoView(r.main.head,{y:"start",yMargin:u.top-h}))}return l.dispatch(Xi(n,r),{effects:o}),!0}const _1=l=>fS(l,!1),zd=l=>fS(l,!0);function In(l,t,e){let n=l.lineBlockAt(t.head),r=l.moveToLineBoundary(t,e);if(r.head==t.head&&r.head!=(e?n.to:n.from)&&(r=l.moveToLineBoundary(t,e,!1)),!e&&r.head==n.from&&n.length){let o=/^\s*/.exec(l.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;o&&t.head!=n.from+o&&(r=V.cursor(n.from+o))}return r}const ok=l=>Mi(l,t=>In(l,t,!0)),ak=l=>Mi(l,t=>In(l,t,!1)),uk=l=>Mi(l,t=>In(l,t,!Oe(l))),ck=l=>Mi(l,t=>In(l,t,Oe(l))),fk=l=>Mi(l,t=>V.cursor(l.lineBlockAt(t.head).from,1)),hk=l=>Mi(l,t=>V.cursor(l.lineBlockAt(t.head).to,-1));function dk(l,t,e){let n=!1,r=zs(l.selection,o=>{let u=qi(l,o.head,-1)||qi(l,o.head,1)||o.head>0&&qi(l,o.head-1,1)||o.head<l.doc.length&&qi(l,o.head+1,-1);if(!u||!u.end)return o;n=!0;let f=u.start.from==o.head?u.end.to:u.end.from;return V.cursor(f)});return n?(t(Xi(l,r)),!0):!1}const mk=({state:l,dispatch:t})=>dk(l,t);function vi(l,t){let e=zs(l.state.selection,n=>{let r=t(n);return V.range(n.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return e.eq(l.state.selection)?!1:(l.dispatch(Xi(l.state,e)),!0)}function hS(l,t){return vi(l,e=>l.moveByChar(e,t))}const dS=l=>hS(l,!Oe(l)),mS=l=>hS(l,Oe(l));function gS(l,t){return vi(l,e=>l.moveByGroup(e,t))}const gk=l=>gS(l,!Oe(l)),pk=l=>gS(l,Oe(l)),yk=l=>vi(l,t=>Pu(l.state,t,!Oe(l))),vk=l=>vi(l,t=>Pu(l.state,t,Oe(l)));function pS(l,t){return vi(l,e=>l.moveVertically(e,t))}const yS=l=>pS(l,!1),vS=l=>pS(l,!0);function bS(l,t){return vi(l,e=>l.moveVertically(e,t,cS(l).height))}const U1=l=>bS(l,!1),q1=l=>bS(l,!0),bk=l=>vi(l,t=>In(l,t,!0)),Sk=l=>vi(l,t=>In(l,t,!1)),xk=l=>vi(l,t=>In(l,t,!Oe(l))),wk=l=>vi(l,t=>In(l,t,Oe(l))),Ak=l=>vi(l,t=>V.cursor(l.lineBlockAt(t.head).from)),Mk=l=>vi(l,t=>V.cursor(l.lineBlockAt(t.head).to)),V1=({state:l,dispatch:t})=>(t(Xi(l,{anchor:0})),!0),Y1=({state:l,dispatch:t})=>(t(Xi(l,{anchor:l.doc.length})),!0),j1=({state:l,dispatch:t})=>(t(Xi(l,{anchor:l.selection.main.anchor,head:0})),!0),G1=({state:l,dispatch:t})=>(t(Xi(l,{anchor:l.selection.main.anchor,head:l.doc.length})),!0),Ck=({state:l,dispatch:t})=>(t(l.update({selection:{anchor:0,head:l.doc.length},userEvent:"select"})),!0),Tk=({state:l,dispatch:t})=>{let e=Ju(l).map(({from:n,to:r})=>V.range(n,Math.min(r+1,l.doc.length)));return t(l.update({selection:V.create(e),userEvent:"select"})),!0},kk=({state:l,dispatch:t})=>{let e=zs(l.selection,n=>{let r=De(l),o=r.resolveStack(n.from,1);if(n.empty){let u=r.resolveStack(n.from,-1);u.node.from>=o.node.from&&u.node.to<=o.node.to&&(o=u)}for(let u=o;u;u=u.next){let{node:f}=u;if((f.from<n.from&&f.to>=n.to||f.to>n.to&&f.from<=n.from)&&u.next)return V.range(f.to,f.from)}return n});return e.eq(l.selection)?!1:(t(Xi(l,e)),!0)},Dk=({state:l,dispatch:t})=>{let e=l.selection,n=null;return e.ranges.length>1?n=V.create([e.main]):e.main.empty||(n=V.create([V.cursor(e.main.head)])),n?(t(Xi(l,n)),!0):!1};function So(l,t){if(l.state.readOnly)return!1;let e="delete.selection",{state:n}=l,r=n.changeByRange(o=>{let{from:u,to:f}=o;if(u==f){let h=t(o);h<u?(e="delete.backward",h=eu(l,h,!1)):h>u&&(e="delete.forward",h=eu(l,h,!0)),u=Math.min(u,h),f=Math.max(f,h)}else u=eu(l,u,!1),f=eu(l,f,!0);return u==f?{range:o}:{changes:{from:u,to:f},range:V.cursor(u,u<o.head?-1:1)}});return r.changes.empty?!1:(l.dispatch(n.update(r,{scrollIntoView:!0,userEvent:e,effects:e=="delete.selection"?I.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function eu(l,t,e){if(l instanceof I)for(let n of l.state.facet(I.atomicRanges).map(r=>r(l)))n.between(t,t,(r,o)=>{r<t&&o>t&&(t=e?o:r)});return t}const SS=(l,t,e)=>So(l,n=>{let r=n.from,{state:o}=l,u=o.doc.lineAt(r),f,h;if(e&&!t&&r>u.from&&r<u.from+200&&!/[^ \t]/.test(f=u.text.slice(0,r-u.from))){if(f[f.length-1]=="	")return r-1;let m=Ls(f,o.tabSize),p=m%Du(o)||Du(o);for(let y=0;y<p&&f[f.length-1-y]==" ";y++)r--;h=r}else h=be(u.text,r-u.from,t,t)+u.from,h==r&&u.number!=(t?o.doc.lines:1)?h+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(u.text.slice(h-u.from,r-u.from))&&(h=be(u.text,h-u.from,!1,!1)+u.from);return h}),Hd=l=>SS(l,!1,!0),xS=l=>SS(l,!0,!1),wS=(l,t)=>So(l,e=>{let n=e.head,{state:r}=l,o=r.doc.lineAt(n),u=r.charCategorizer(n);for(let f=null;;){if(n==(t?o.to:o.from)){n==e.head&&o.number!=(t?r.doc.lines:1)&&(n+=t?1:-1);break}let h=be(o.text,n-o.from,t)+o.from,m=o.text.slice(Math.min(n,h)-o.from,Math.max(n,h)-o.from),p=u(m);if(f!=null&&p!=f)break;(m!=" "||n!=e.head)&&(f=p),n=h}return n}),AS=l=>wS(l,!1),Ok=l=>wS(l,!0),Ek=l=>So(l,t=>{let e=l.lineBlockAt(t.head).to;return t.head<e?e:Math.min(l.state.doc.length,t.head+1)}),Rk=l=>So(l,t=>{let e=l.moveToLineBoundary(t,!1).head;return t.head>e?e:Math.max(0,t.head-1)}),Bk=l=>So(l,t=>{let e=l.moveToLineBoundary(t,!0).head;return t.head<e?e:Math.min(l.state.doc.length,t.head+1)}),Nk=({state:l,dispatch:t})=>{if(l.readOnly)return!1;let e=l.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Ot.of(["",""])},range:V.cursor(n.from)}));return t(l.update(e,{scrollIntoView:!0,userEvent:"input"})),!0},Lk=({state:l,dispatch:t})=>{if(l.readOnly)return!1;let e=l.changeByRange(n=>{if(!n.empty||n.from==0||n.from==l.doc.length)return{range:n};let r=n.from,o=l.doc.lineAt(r),u=r==o.from?r-1:be(o.text,r-o.from,!1)+o.from,f=r==o.to?r+1:be(o.text,r-o.from,!0)+o.from;return{changes:{from:u,to:f,insert:l.doc.slice(r,f).append(l.doc.slice(u,r))},range:V.cursor(f)}});return e.changes.empty?!1:(t(l.update(e,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ju(l){let t=[],e=-1;for(let n of l.selection.ranges){let r=l.doc.lineAt(n.from),o=l.doc.lineAt(n.to);if(!n.empty&&n.to==o.from&&(o=l.doc.lineAt(n.to-1)),e>=r.number){let u=t[t.length-1];u.to=o.to,u.ranges.push(n)}else t.push({from:r.from,to:o.to,ranges:[n]});e=o.number+1}return t}function MS(l,t,e){if(l.readOnly)return!1;let n=[],r=[];for(let o of Ju(l)){if(e?o.to==l.doc.length:o.from==0)continue;let u=l.doc.lineAt(e?o.to+1:o.from-1),f=u.length+1;if(e){n.push({from:o.to,to:u.to},{from:o.from,insert:u.text+l.lineBreak});for(let h of o.ranges)r.push(V.range(Math.min(l.doc.length,h.anchor+f),Math.min(l.doc.length,h.head+f)))}else{n.push({from:u.from,to:o.from},{from:o.to,insert:l.lineBreak+u.text});for(let h of o.ranges)r.push(V.range(h.anchor-f,h.head-f))}}return n.length?(t(l.update({changes:n,scrollIntoView:!0,selection:V.create(r,l.selection.mainIndex),userEvent:"move.line"})),!0):!1}const zk=({state:l,dispatch:t})=>MS(l,t,!1),Hk=({state:l,dispatch:t})=>MS(l,t,!0);function CS(l,t,e){if(l.readOnly)return!1;let n=[];for(let r of Ju(l))e?n.push({from:r.from,insert:l.doc.slice(r.from,r.to)+l.lineBreak}):n.push({from:r.to,insert:l.lineBreak+l.doc.slice(r.from,r.to)});return t(l.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const _k=({state:l,dispatch:t})=>CS(l,t,!1),Uk=({state:l,dispatch:t})=>CS(l,t,!0),qk=l=>{if(l.state.readOnly)return!1;let{state:t}=l,e=t.changes(Ju(t).map(({from:r,to:o})=>(r>0?r--:o<t.doc.length&&o++,{from:r,to:o}))),n=zs(t.selection,r=>{let o;if(l.lineWrapping){let u=l.lineBlockAt(r.head),f=l.coordsAtPos(r.head,r.assoc||1);f&&(o=u.bottom+l.documentTop-f.bottom+l.defaultLineHeight/2)}return l.moveVertically(r,!0,o)}).map(e);return l.dispatch({changes:e,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Vk(l,t){if(/\(\)|\[\]|\{\}/.test(l.sliceDoc(t-1,t+1)))return{from:t,to:t};let e=De(l).resolveInner(t),n=e.childBefore(t),r=e.childAfter(t),o;return n&&r&&n.to<=t&&r.from>=t&&(o=n.type.prop(Mt.closedBy))&&o.indexOf(r.name)>-1&&l.doc.lineAt(n.to).from==l.doc.lineAt(r.from).from&&!/\S/.test(l.sliceDoc(n.to,r.from))?{from:n.to,to:r.from}:null}const X1=TS(!1),Yk=TS(!0);function TS(l){return({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{let{from:o,to:u}=r,f=t.doc.lineAt(o),h=!l&&o==u&&Vk(t,o);l&&(o=u=(u<=f.to?f:t.doc.lineAt(u)).to);let m=new Xu(t,{simulateBreak:o,simulateDoubleBreak:!!h}),p=om(m,o);for(p==null&&(p=Ls(/^\s*/.exec(t.doc.lineAt(o).text)[0],t.tabSize));u<f.to&&/\s/.test(f.text[u-f.from]);)u++;h?{from:o,to:u}=h:o>f.from&&o<f.from+100&&!/\S/.test(f.text.slice(0,o))&&(o=f.from);let y=["",uo(t,p)];return h&&y.push(uo(t,m.lineIndent(f.from,-1))),{changes:{from:o,to:u,insert:Ot.of(y)},range:V.cursor(o+1+y[1].length)}});return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function fm(l,t){let e=-1;return l.changeByRange(n=>{let r=[];for(let u=n.from;u<=n.to;){let f=l.doc.lineAt(u);f.number>e&&(n.empty||n.to>f.from)&&(t(f,r,n),e=f.number),u=f.to+1}let o=l.changes(r);return{changes:r,range:V.range(o.mapPos(n.anchor,1),o.mapPos(n.head,1))}})}const jk=({state:l,dispatch:t})=>{if(l.readOnly)return!1;let e=Object.create(null),n=new Xu(l,{overrideIndentation:o=>{let u=e[o];return u??-1}}),r=fm(l,(o,u,f)=>{let h=om(n,o.from);if(h==null)return;/\S/.test(o.text)||(h=0);let m=/^\s*/.exec(o.text)[0],p=uo(l,h);(m!=p||f.from<o.from+m.length)&&(e[o.from]=h,u.push({from:o.from,to:o.from+m.length,insert:p}))});return r.changes.empty||t(l.update(r,{userEvent:"indent"})),!0},Gk=({state:l,dispatch:t})=>l.readOnly?!1:(t(l.update(fm(l,(e,n)=>{n.push({from:e.from,insert:l.facet(rm)})}),{userEvent:"input.indent"})),!0),Xk=({state:l,dispatch:t})=>l.readOnly?!1:(t(l.update(fm(l,(e,n)=>{let r=/^\s*/.exec(e.text)[0];if(!r)return;let o=Ls(r,l.tabSize),u=0,f=uo(l,Math.max(0,o-Du(l)));for(;u<r.length&&u<f.length&&r.charCodeAt(u)==f.charCodeAt(u);)u++;n.push({from:e.from+u,to:e.from+r.length,insert:f.slice(u)})}),{userEvent:"delete.dedent"})),!0),Kk=l=>(l.setTabFocusMode(),!0),Qk=[{key:"Ctrl-b",run:lS,shift:dS,preventDefault:!0},{key:"Ctrl-f",run:sS,shift:mS},{key:"Ctrl-p",run:aS,shift:yS},{key:"Ctrl-n",run:uS,shift:vS},{key:"Ctrl-a",run:fk,shift:Ak},{key:"Ctrl-e",run:hk,shift:Mk},{key:"Ctrl-d",run:xS},{key:"Ctrl-h",run:Hd},{key:"Ctrl-k",run:Ek},{key:"Ctrl-Alt-h",run:AS},{key:"Ctrl-o",run:Nk},{key:"Ctrl-t",run:Lk},{key:"Ctrl-v",run:zd}],Zk=[{key:"ArrowLeft",run:lS,shift:dS,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:ik,shift:gk,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:uk,shift:xk,preventDefault:!0},{key:"ArrowRight",run:sS,shift:mS,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:nk,shift:pk,preventDefault:!0},{mac:"Cmd-ArrowRight",run:ck,shift:wk,preventDefault:!0},{key:"ArrowUp",run:aS,shift:yS,preventDefault:!0},{mac:"Cmd-ArrowUp",run:V1,shift:j1},{mac:"Ctrl-ArrowUp",run:_1,shift:U1},{key:"ArrowDown",run:uS,shift:vS,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Y1,shift:G1},{mac:"Ctrl-ArrowDown",run:zd,shift:q1},{key:"PageUp",run:_1,shift:U1},{key:"PageDown",run:zd,shift:q1},{key:"Home",run:ak,shift:Sk,preventDefault:!0},{key:"Mod-Home",run:V1,shift:j1},{key:"End",run:ok,shift:bk,preventDefault:!0},{key:"Mod-End",run:Y1,shift:G1},{key:"Enter",run:X1,shift:X1},{key:"Mod-a",run:Ck},{key:"Backspace",run:Hd,shift:Hd},{key:"Delete",run:xS},{key:"Mod-Backspace",mac:"Alt-Backspace",run:AS},{key:"Mod-Delete",mac:"Alt-Delete",run:Ok},{mac:"Mod-Backspace",run:Rk},{mac:"Mod-Delete",run:Bk}].concat(Qk.map(l=>({mac:l.key,run:l.run,shift:l.shift}))),Wk=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:sk,shift:yk},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:rk,shift:vk},{key:"Alt-ArrowUp",run:zk},{key:"Shift-Alt-ArrowUp",run:_k},{key:"Alt-ArrowDown",run:Hk},{key:"Shift-Alt-ArrowDown",run:Uk},{key:"Escape",run:Dk},{key:"Mod-Enter",run:Yk},{key:"Alt-l",mac:"Ctrl-l",run:Tk},{key:"Mod-i",run:kk,preventDefault:!0},{key:"Mod-[",run:Xk},{key:"Mod-]",run:Gk},{key:"Mod-Alt-\\",run:jk},{key:"Shift-Mod-k",run:qk},{key:"Shift-Mod-\\",run:mk},{key:"Mod-/",run:_T},{key:"Alt-A",run:qT},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Kk}].concat(Zk),K1=typeof String.prototype.normalize=="function"?l=>l.normalize("NFKD"):l=>l;class Bs{constructor(t,e,n=0,r=t.length,o,u){this.test=u,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,r),this.bufferStart=n,this.normalize=o?f=>o(K1(f)):K1,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return qe(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=Vd(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=Hi(t);let r=this.normalize(e);if(r.length)for(let o=0,u=n;;o++){let f=r.charCodeAt(o),h=this.match(f,u,this.bufferPos+this.bufferStart);if(o==r.length-1){if(h)return this.value=h,this;break}u==n&&o<e.length&&e.charCodeAt(o)==f&&u++}}}match(t,e,n){let r=null;for(let o=0;o<this.matches.length;o+=2){let u=this.matches[o],f=!1;this.query.charCodeAt(u)==t&&(u==this.query.length-1?r={from:this.matches[o+1],to:n}:(this.matches[o]++,f=!0)),f||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?r={from:e,to:n}:this.matches.push(1,e)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Bs.prototype[Symbol.iterator]=function(){return this});const kS={from:-1,to:-1,match:/.*/.exec("")},hm="gm"+(/x/.unicode==null?"":"u");class DS{constructor(t,e,n,r=0,o=t.length){if(this.text=t,this.to=o,this.curLine="",this.done=!1,this.value=kS,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new OS(t,e,n,r,o);this.re=new RegExp(e,hm+(n?.ignoreCase?"i":"")),this.test=n?.test,this.iter=t.iter();let u=t.lineAt(r);this.curLineStart=u.from,this.matchPos=Bu(t,r),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let n=this.curLineStart+e.index,r=n+e[0].length;if(this.matchPos=Bu(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,e)))return this.value={from:n,to:r,match:e},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const Yh=new WeakMap;class Cs{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,n){let r=Yh.get(t);if(!r||r.from>=n||r.to<=e){let f=new Cs(e,t.sliceString(e,n));return Yh.set(t,f),f}if(r.from==e&&r.to==n)return r;let{text:o,from:u}=r;return u>e&&(o=t.sliceString(e,u)+o,u=e),r.to<n&&(o+=t.sliceString(r.to,n)),Yh.set(t,new Cs(u,o)),new Cs(e,o.slice(e-u,n-u))}}class OS{constructor(t,e,n,r,o){this.text=t,this.to=o,this.done=!1,this.value=kS,this.matchPos=Bu(t,r),this.re=new RegExp(e,hm+(n?.ignoreCase?"i":"")),this.test=n?.test,this.flat=Cs.get(t,r,this.chunkEnd(r+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let n=this.flat.from+e.index,r=n+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,r,e)))return this.value={from:n,to:r,match:e},this.matchPos=Bu(this.text,r+(n==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Cs.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(DS.prototype[Symbol.iterator]=OS.prototype[Symbol.iterator]=function(){return this});function Pk(l){try{return new RegExp(l,hm),!0}catch{return!1}}function Bu(l,t){if(t>=l.length)return t;let e=l.lineAt(t),n;for(;t<e.to&&(n=e.text.charCodeAt(t-e.from))>=56320&&n<57344;)t++;return t}function _d(l){let t=String(l.state.doc.lineAt(l.state.selection.main.head).number),e=Ut("input",{class:"cm-textfield",name:"line",value:t}),n=Ut("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),l.dispatch({effects:Ir.of(!1)}),l.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},Ut("label",l.state.phrase("Go to line"),": ",e)," ",Ut("button",{class:"cm-button",type:"submit"},l.state.phrase("go")),Ut("button",{name:"close",onclick:()=>{l.dispatch({effects:Ir.of(!1)}),l.focus()},"aria-label":l.state.phrase("close"),type:"button"},[""]));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!o)return;let{state:u}=l,f=u.doc.lineAt(u.selection.main.head),[,h,m,p,y]=o,v=p?+p.slice(1):0,S=m?+m:f.number;if(m&&y){let k=S/100;h&&(k=k*(h=="-"?-1:1)+f.number/u.doc.lines),S=Math.round(u.doc.lines*k)}else m&&h&&(S=S*(h=="-"?-1:1)+f.number);let w=u.doc.line(Math.max(1,Math.min(u.doc.lines,S))),M=V.cursor(w.from+Math.max(0,Math.min(v,w.length)));l.dispatch({effects:[Ir.of(!1),I.scrollIntoView(M.from,{y:"center"})],selection:M}),l.focus()}return{dom:n}}const Ir=pt.define(),Q1=Se.define({create(){return!0},update(l,t){for(let e of t.effects)e.is(Ir)&&(l=e.value);return l},provide:l=>oo.from(l,t=>t?_d:null)}),Jk=l=>{let t=ro(l,_d);if(!t){let e=[Ir.of(!0)];l.state.field(Q1,!1)==null&&e.push(pt.appendConfig.of([Q1,Fk])),l.dispatch({effects:e}),t=ro(l,_d)}return t&&t.dom.querySelector("input").select(),!0},Fk=I.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Ik={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},$k=$.define({combine(l){return Gi(l,Ik,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})}});function tD(l){return[sD,lD]}const eD=ut.mark({class:"cm-selectionMatch"}),iD=ut.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Z1(l,t,e,n){return(e==0||l(t.sliceDoc(e-1,e))!=Zt.Word)&&(n==t.doc.length||l(t.sliceDoc(n,n+1))!=Zt.Word)}function nD(l,t,e,n){return l(t.sliceDoc(e,e+1))==Zt.Word&&l(t.sliceDoc(n-1,n))==Zt.Word}const lD=ne.fromClass(class{constructor(l){this.decorations=this.getDeco(l)}update(l){(l.selectionSet||l.docChanged||l.viewportChanged)&&(this.decorations=this.getDeco(l.view))}getDeco(l){let t=l.state.facet($k),{state:e}=l,n=e.selection;if(n.ranges.length>1)return ut.none;let r=n.main,o,u=null;if(r.empty){if(!t.highlightWordAroundCursor)return ut.none;let h=e.wordAt(r.head);if(!h)return ut.none;u=e.charCategorizer(r.head),o=e.sliceDoc(h.from,h.to)}else{let h=r.to-r.from;if(h<t.minSelectionLength||h>200)return ut.none;if(t.wholeWords){if(o=e.sliceDoc(r.from,r.to),u=e.charCategorizer(r.head),!(Z1(u,e,r.from,r.to)&&nD(u,e,r.from,r.to)))return ut.none}else if(o=e.sliceDoc(r.from,r.to),!o)return ut.none}let f=[];for(let h of l.visibleRanges){let m=new Bs(e.doc,o,h.from,h.to);for(;!m.next().done;){let{from:p,to:y}=m.value;if((!u||Z1(u,e,p,y))&&(r.empty&&p<=r.from&&y>=r.to?f.push(iD.range(p,y)):(p>=r.to||y<=r.from)&&f.push(eD.range(p,y)),f.length>t.maxMatches))return ut.none}}return ut.set(f)}},{decorations:l=>l.decorations}),sD=I.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),rD=({state:l,dispatch:t})=>{let{selection:e}=l,n=V.create(e.ranges.map(r=>l.wordAt(r.head)||V.cursor(r.head)),e.mainIndex);return n.eq(e)?!1:(t(l.update({selection:n})),!0)};function oD(l,t){let{main:e,ranges:n}=l.selection,r=l.wordAt(e.head),o=r&&r.from==e.from&&r.to==e.to;for(let u=!1,f=new Bs(l.doc,t,n[n.length-1].to);;)if(f.next(),f.done){if(u)return null;f=new Bs(l.doc,t,0,Math.max(0,n[n.length-1].from-1)),u=!0}else{if(u&&n.some(h=>h.from==f.value.from))continue;if(o){let h=l.wordAt(f.value.from);if(!h||h.from!=f.value.from||h.to!=f.value.to)continue}return f.value}}const aD=({state:l,dispatch:t})=>{let{ranges:e}=l.selection;if(e.some(o=>o.from===o.to))return rD({state:l,dispatch:t});let n=l.sliceDoc(e[0].from,e[0].to);if(l.selection.ranges.some(o=>l.sliceDoc(o.from,o.to)!=n))return!1;let r=oD(l,n);return r?(t(l.update({selection:l.selection.addRange(V.range(r.from,r.to),!1),effects:I.scrollIntoView(r.to)})),!0):!1},Hs=$.define({combine(l){return Gi(l,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new SD(t),scrollToMatch:t=>I.scrollIntoView(t)})}});class ES{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||Pk(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(e,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new hD(this):new cD(this)}getCursor(t,e=0,n){let r=t.doc?t:kt.create({doc:t});return n==null&&(n=r.doc.length),this.regexp?vs(this,r,e,n):ys(this,r,e,n)}}class RS{constructor(t){this.spec=t}}function ys(l,t,e,n){return new Bs(t.doc,l.unquoted,e,n,l.caseSensitive?void 0:r=>r.toLowerCase(),l.wholeWord?uD(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function uD(l,t){return(e,n,r,o)=>((o>e||o+r.length<n)&&(o=Math.max(0,e-2),r=l.sliceString(o,Math.min(l.length,n+2))),(t(Nu(r,e-o))!=Zt.Word||t(Lu(r,e-o))!=Zt.Word)&&(t(Lu(r,n-o))!=Zt.Word||t(Nu(r,n-o))!=Zt.Word))}class cD extends RS{constructor(t){super(t)}nextMatch(t,e,n){let r=ys(this.spec,t,n,t.doc.length).nextOverlapping();if(r.done){let o=Math.min(t.doc.length,e+this.spec.unquoted.length);r=ys(this.spec,t,0,o).nextOverlapping()}return r.done||r.value.from==e&&r.value.to==n?null:r.value}prevMatchInRange(t,e,n){for(let r=n;;){let o=Math.max(e,r-1e4-this.spec.unquoted.length),u=ys(this.spec,t,o,r),f=null;for(;!u.nextOverlapping().done;)f=u.value;if(f)return f;if(o==e)return null;r-=1e4}}prevMatch(t,e,n){let r=this.prevMatchInRange(t,0,e);return r||(r=this.prevMatchInRange(t,Math.max(0,n-this.spec.unquoted.length),t.doc.length)),r&&(r.from!=e||r.to!=n)?r:null}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let n=ys(this.spec,t,0,t.doc.length),r=[];for(;!n.next().done;){if(r.length>=e)return null;r.push(n.value)}return r}highlight(t,e,n,r){let o=ys(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,t.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function vs(l,t,e,n){return new DS(t.doc,l.search,{ignoreCase:!l.caseSensitive,test:l.wholeWord?fD(t.charCategorizer(t.selection.main.head)):void 0},e,n)}function Nu(l,t){return l.slice(be(l,t,!1),t)}function Lu(l,t){return l.slice(t,be(l,t))}function fD(l){return(t,e,n)=>!n[0].length||(l(Nu(n.input,n.index))!=Zt.Word||l(Lu(n.input,n.index))!=Zt.Word)&&(l(Lu(n.input,n.index+n[0].length))!=Zt.Word||l(Nu(n.input,n.index+n[0].length))!=Zt.Word)}class hD extends RS{nextMatch(t,e,n){let r=vs(this.spec,t,n,t.doc.length).next();return r.done&&(r=vs(this.spec,t,0,e).next()),r.done?null:r.value}prevMatchInRange(t,e,n){for(let r=1;;r++){let o=Math.max(e,n-r*1e4),u=vs(this.spec,t,o,n),f=null;for(;!u.next().done;)f=u.value;if(f&&(o==e||f.from>o+10))return f;if(o==e)return null}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(e,n)=>{if(n=="&")return t.match[0];if(n=="$")return"$";for(let r=n.length;r>0;r--){let o=+n.slice(0,r);if(o>0&&o<t.match.length)return t.match[o]+n.slice(r)}return e})}matchAll(t,e){let n=vs(this.spec,t,0,t.doc.length),r=[];for(;!n.next().done;){if(r.length>=e)return null;r.push(n.value)}return r}highlight(t,e,n,r){let o=vs(this.spec,t,Math.max(0,e-250),Math.min(n+250,t.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const co=pt.define(),dm=pt.define(),Kn=Se.define({create(l){return new jh(Ud(l).create(),null)},update(l,t){for(let e of t.effects)e.is(co)?l=new jh(e.value.create(),l.panel):e.is(dm)&&(l=new jh(l.query,e.value?mm:null));return l},provide:l=>oo.from(l,t=>t.panel)});class jh{constructor(t,e){this.query=t,this.panel=e}}const dD=ut.mark({class:"cm-searchMatch"}),mD=ut.mark({class:"cm-searchMatch cm-searchMatch-selected"}),gD=ne.fromClass(class{constructor(l){this.view=l,this.decorations=this.highlight(l.state.field(Kn))}update(l){let t=l.state.field(Kn);(t!=l.startState.field(Kn)||l.docChanged||l.selectionSet||l.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:l,panel:t}){if(!t||!l.spec.valid)return ut.none;let{view:e}=this,n=new un;for(let r=0,o=e.visibleRanges,u=o.length;r<u;r++){let{from:f,to:h}=o[r];for(;r<u-1&&h>o[r+1].from-2*250;)h=o[++r].to;l.highlight(e.state,f,h,(m,p)=>{let y=e.state.selection.ranges.some(v=>v.from==m&&v.to==p);n.add(m,p,y?mD:dD)})}return n.finish()}},{decorations:l=>l.decorations});function xo(l){return t=>{let e=t.state.field(Kn,!1);return e&&e.query.spec.valid?l(t,e):LS(t)}}const zu=xo((l,{query:t})=>{let{to:e}=l.state.selection.main,n=t.nextMatch(l.state,e,e);if(!n)return!1;let r=V.single(n.from,n.to),o=l.state.facet(Hs);return l.dispatch({selection:r,effects:[gm(l,n),o.scrollToMatch(r.main,l)],userEvent:"select.search"}),NS(l),!0}),Hu=xo((l,{query:t})=>{let{state:e}=l,{from:n}=e.selection.main,r=t.prevMatch(e,n,n);if(!r)return!1;let o=V.single(r.from,r.to),u=l.state.facet(Hs);return l.dispatch({selection:o,effects:[gm(l,r),u.scrollToMatch(o.main,l)],userEvent:"select.search"}),NS(l),!0}),pD=xo((l,{query:t})=>{let e=t.matchAll(l.state,1e3);return!e||!e.length?!1:(l.dispatch({selection:V.create(e.map(n=>V.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),yD=({state:l,dispatch:t})=>{let e=l.selection;if(e.ranges.length>1||e.main.empty)return!1;let{from:n,to:r}=e.main,o=[],u=0;for(let f=new Bs(l.doc,l.sliceDoc(n,r));!f.next().done;){if(o.length>1e3)return!1;f.value.from==n&&(u=o.length),o.push(V.range(f.value.from,f.value.to))}return t(l.update({selection:V.create(o,u),userEvent:"select.search.matches"})),!0},W1=xo((l,{query:t})=>{let{state:e}=l,{from:n,to:r}=e.selection.main;if(e.readOnly)return!1;let o=t.nextMatch(e,n,n);if(!o)return!1;let u=o,f=[],h,m,p=[];u.from==n&&u.to==r&&(m=e.toText(t.getReplacement(u)),f.push({from:u.from,to:u.to,insert:m}),u=t.nextMatch(e,u.from,u.to),p.push(I.announce.of(e.phrase("replaced match on line $",e.doc.lineAt(n).number)+".")));let y=l.state.changes(f);return u&&(h=V.single(u.from,u.to).map(y),p.push(gm(l,u)),p.push(e.facet(Hs).scrollToMatch(h.main,l))),l.dispatch({changes:y,selection:h,effects:p,userEvent:"input.replace"}),!0}),vD=xo((l,{query:t})=>{if(l.state.readOnly)return!1;let e=t.matchAll(l.state,1e9).map(r=>{let{from:o,to:u}=r;return{from:o,to:u,insert:t.getReplacement(r)}});if(!e.length)return!1;let n=l.state.phrase("replaced $ matches",e.length)+".";return l.dispatch({changes:e,effects:I.announce.of(n),userEvent:"input.replace.all"}),!0});function mm(l){return l.state.facet(Hs).createPanel(l)}function Ud(l,t){var e,n,r,o,u;let f=l.selection.main,h=f.empty||f.to>f.from+100?"":l.sliceDoc(f.from,f.to);if(t&&!h)return t;let m=l.facet(Hs);return new ES({search:((e=t?.literal)!==null&&e!==void 0?e:m.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(n=t?.caseSensitive)!==null&&n!==void 0?n:m.caseSensitive,literal:(r=t?.literal)!==null&&r!==void 0?r:m.literal,regexp:(o=t?.regexp)!==null&&o!==void 0?o:m.regexp,wholeWord:(u=t?.wholeWord)!==null&&u!==void 0?u:m.wholeWord})}function BS(l){let t=ro(l,mm);return t&&t.dom.querySelector("[main-field]")}function NS(l){let t=BS(l);t&&t==l.root.activeElement&&t.select()}const LS=l=>{let t=l.state.field(Kn,!1);if(t&&t.panel){let e=BS(l);if(e&&e!=l.root.activeElement){let n=Ud(l.state,t.query.spec);n.valid&&l.dispatch({effects:co.of(n)}),e.focus(),e.select()}}else l.dispatch({effects:[dm.of(!0),t?co.of(Ud(l.state,t.query.spec)):pt.appendConfig.of(wD)]});return!0},zS=l=>{let t=l.state.field(Kn,!1);if(!t||!t.panel)return!1;let e=ro(l,mm);return e&&e.dom.contains(l.root.activeElement)&&l.focus(),l.dispatch({effects:dm.of(!1)}),!0},bD=[{key:"Mod-f",run:LS,scope:"editor search-panel"},{key:"F3",run:zu,shift:Hu,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:zu,shift:Hu,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:zS,scope:"editor search-panel"},{key:"Mod-Shift-l",run:yD},{key:"Mod-Alt-g",run:Jk},{key:"Mod-d",run:aD,preventDefault:!0}];class SD{constructor(t){this.view=t;let e=this.query=t.state.field(Kn).query.spec;this.commit=this.commit.bind(this),this.searchField=Ut("input",{value:e.search,placeholder:$e(t,"Find"),"aria-label":$e(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ut("input",{value:e.replace,placeholder:$e(t,"Replace"),"aria-label":$e(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ut("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=Ut("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=Ut("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit});function n(r,o,u){return Ut("button",{class:"cm-button",name:r,onclick:o,type:"button"},u)}this.dom=Ut("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,n("next",()=>zu(t),[$e(t,"next")]),n("prev",()=>Hu(t),[$e(t,"previous")]),n("select",()=>pD(t),[$e(t,"all")]),Ut("label",null,[this.caseField,$e(t,"match case")]),Ut("label",null,[this.reField,$e(t,"regexp")]),Ut("label",null,[this.wordField,$e(t,"by word")]),...t.state.readOnly?[]:[Ut("br"),this.replaceField,n("replace",()=>W1(t),[$e(t,"replace")]),n("replaceAll",()=>vD(t),[$e(t,"replace all")])],Ut("button",{name:"close",onclick:()=>zS(t),"aria-label":$e(t,"close"),type:"button"},[""])])}commit(){let t=new ES({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:co.of(t)}))}keydown(t){TM(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Hu:zu)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),W1(this.view))}update(t){for(let e of t.transactions)for(let n of e.effects)n.is(co)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Hs).top}}function $e(l,t){return l.state.phrase(t)}const iu=30,nu=/[\s\.,:;?!]/;function gm(l,{from:t,to:e}){let n=l.state.doc.lineAt(t),r=l.state.doc.lineAt(e).to,o=Math.max(n.from,t-iu),u=Math.min(r,e+iu),f=l.state.sliceDoc(o,u);if(o!=n.from){for(let h=0;h<iu;h++)if(!nu.test(f[h+1])&&nu.test(f[h])){f=f.slice(h);break}}if(u!=r){for(let h=f.length-1;h>f.length-iu;h--)if(!nu.test(f[h-1])&&nu.test(f[h])){f=f.slice(0,h);break}}return I.announce.of(`${l.state.phrase("current match")}. ${f} ${l.state.phrase("on line")} ${n.number}.`)}const xD=I.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),wD=[Kn,Ol.low(gD),xD];class HS{constructor(t,e,n,r){this.state=t,this.pos=e,this.explicit=n,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(t){let e=De(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),r=e.text.slice(n-e.from,this.pos-e.from),o=r.search(_S(t,!1));return o<0?null:{from:n+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(t,e,n){t=="abort"&&this.abortListeners&&(this.abortListeners.push(e),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function P1(l){let t=Object.keys(l).join(""),e=/\w/.test(t);return e&&(t=t.replace(/\w/g,"")),`[${e?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function AD(l){let t=Object.create(null),e=Object.create(null);for(let{label:r}of l){t[r[0]]=!0;for(let o=1;o<r.length;o++)e[r[o]]=!0}let n=P1(t)+P1(e)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function MD(l){let t=l.map(r=>typeof r=="string"?{label:r}:r),[e,n]=t.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:AD(t);return r=>{let o=r.matchBefore(n);return o||r.explicit?{from:o?o.from:r.pos,options:t,validFor:e}:null}}class J1{constructor(t,e,n,r){this.completion=t,this.source=e,this.match=n,this.score=r}}function Al(l){return l.selection.main.from}function _S(l,t){var e;let{source:n}=l,r=t&&n[0]!="^",o=n[n.length-1]!="$";return!r&&!o?l:new RegExp(`${r?"^":""}(?:${n})${o?"$":""}`,(e=l.flags)!==null&&e!==void 0?e:l.ignoreCase?"i":"")}const US=hn.define();function CD(l,t,e,n){let{main:r}=l.selection,o=e-r.from,u=n-r.from;return Object.assign(Object.assign({},l.changeByRange(f=>{if(f!=r&&e!=n&&l.sliceDoc(f.from+o,f.from+u)!=l.sliceDoc(e,n))return{range:f};let h=l.toText(t);return{changes:{from:f.from+o,to:n==r.from?f.to:f.from+u,insert:h},range:V.cursor(f.from+o+h.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const F1=new WeakMap;function TD(l){if(!Array.isArray(l))return l;let t=F1.get(l);return t||F1.set(l,t=MD(l)),t}const _u=pt.define(),fo=pt.define();class kD{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let e=0;e<t.length;){let n=qe(t,e),r=Hi(n);this.chars.push(n);let o=t.slice(e,e+r),u=o.toUpperCase();this.folded.push(qe(u==o?o.toLowerCase():u,0)),e+=r}this.astral=t.length!=this.chars.length}ret(t,e){return this.score=t,this.matched=e,this}match(t){if(this.pattern.length==0)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:e,folded:n,any:r,precise:o,byWord:u}=this;if(e.length==1){let Y=qe(t,0),j=Hi(Y),K=j==t.length?0:-100;if(Y!=e[0])if(Y==n[0])K+=-200;else return null;return this.ret(K,[0,j])}let f=t.indexOf(this.pattern);if(f==0)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=e.length,m=0;if(f<0){for(let Y=0,j=Math.min(t.length,200);Y<j&&m<h;){let K=qe(t,Y);(K==e[m]||K==n[m])&&(r[m++]=Y),Y+=Hi(K)}if(m<h)return null}let p=0,y=0,v=!1,S=0,w=-1,M=-1,k=/[a-z]/.test(t),R=!0;for(let Y=0,j=Math.min(t.length,200),K=0;Y<j&&y<h;){let z=qe(t,Y);f<0&&(p<h&&z==e[p]&&(o[p++]=Y),S<h&&(z==e[S]||z==n[S]?(S==0&&(w=Y),M=Y+1,S++):S=0));let G,X=z<255?z>=48&&z<=57||z>=97&&z<=122?2:z>=65&&z<=90?1:0:(G=Vd(z))!=G.toLowerCase()?1:G!=G.toUpperCase()?2:0;(!Y||X==1&&k||K==0&&X!=0)&&(e[y]==z||n[y]==z&&(v=!0)?u[y++]=Y:u.length&&(R=!1)),K=X,Y+=Hi(z)}return y==h&&u[0]==0&&R?this.result(-100+(v?-200:0),u,t):S==h&&w==0?this.ret(-200-t.length+(M==t.length?0:-100),[0,M]):f>-1?this.ret(-700-t.length,[f,f+this.pattern.length]):S==h?this.ret(-900-t.length,[w,M]):y==h?this.result(-100+(v?-200:0)+-700+(R?0:-1100),u,t):e.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,t)}result(t,e,n){let r=[],o=0;for(let u of e){let f=u+(this.astral?Hi(qe(n,u)):1);o&&r[o-1]==u?r[o-1]=f:(r[o++]=u,r[o++]=f)}return this.ret(t-n.length,r)}}class DD{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let e=t.slice(0,this.pattern.length),n=e==this.pattern?0:e.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,e.length],this.score=n+(t.length==this.pattern.length?0:-100),this)}}const he=$.define({combine(l){return Gi(l,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:OD,filterStrict:!1,compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>n=>I1(t(n),e(n)),optionClass:(t,e)=>n=>I1(t(n),e(n)),addToOptions:(t,e)=>t.concat(e),filterStrict:(t,e)=>t||e})}});function I1(l,t){return l?t?l+" "+t:l:t}function OD(l,t,e,n,r,o){let u=l.textDirection==Xt.RTL,f=u,h=!1,m="top",p,y,v=t.left-r.left,S=r.right-t.right,w=n.right-n.left,M=n.bottom-n.top;if(f&&v<Math.min(w,S)?f=!1:!f&&S<Math.min(w,v)&&(f=!0),w<=(f?v:S))p=Math.max(r.top,Math.min(e.top,r.bottom-M))-t.top,y=Math.min(400,f?v:S);else{h=!0,y=Math.min(400,(u?t.right:r.right-t.left)-30);let Y=r.bottom-t.bottom;Y>=M||Y>t.top?p=e.bottom-t.top:(m="bottom",p=t.bottom-e.top)}let k=(t.bottom-t.top)/o.offsetHeight,R=(t.right-t.left)/o.offsetWidth;return{style:`${m}: ${p/k}px; max-width: ${y/R}px`,class:"cm-completionInfo-"+(h?u?"left-narrow":"right-narrow":f?"left":"right")}}function ED(l){let t=l.addToOptions.slice();return l.icons&&t.push({render(e){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),e.type&&n.classList.add(...e.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),n.setAttribute("aria-hidden","true"),n},position:20}),t.push({render(e,n,r,o){let u=document.createElement("span");u.className="cm-completionLabel";let f=e.displayLabel||e.label,h=0;for(let m=0;m<o.length;){let p=o[m++],y=o[m++];p>h&&u.appendChild(document.createTextNode(f.slice(h,p)));let v=u.appendChild(document.createElement("span"));v.appendChild(document.createTextNode(f.slice(p,y))),v.className="cm-completionMatchedText",h=y}return h<f.length&&u.appendChild(document.createTextNode(f.slice(h))),u},position:50},{render(e){if(!e.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=e.detail,n},position:80}),t.sort((e,n)=>e.position-n.position).map(e=>e.render)}function Gh(l,t,e){if(l<=e)return{from:0,to:l};if(t<0&&(t=0),t<=l>>1){let r=Math.floor(t/e);return{from:r*e,to:(r+1)*e}}let n=Math.floor((l-t)/e);return{from:l-(n+1)*e,to:l-n*e}}class RD{constructor(t,e,n){this.view=t,this.stateField=e,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let r=t.state.field(e),{options:o,selected:u}=r.open,f=t.state.facet(he);this.optionContent=ED(f),this.optionClass=f.optionClass,this.tooltipClass=f.tooltipClass,this.range=Gh(o.length,u,f.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",h=>{let{options:m}=t.state.field(e).open;for(let p=h.target,y;p&&p!=this.dom;p=p.parentNode)if(p.nodeName=="LI"&&(y=/-(\d+)$/.exec(p.id))&&+y[1]<m.length){this.applyCompletion(t,m[+y[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let m=t.state.field(this.stateField,!1);m&&m.tooltip&&t.state.facet(he).closeOnBlur&&h.relatedTarget!=t.contentDOM&&t.dispatch({effects:fo.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(t,e){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,e,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(t){var e;let n=t.state.field(this.stateField),r=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),n!=r){let{options:o,selected:u,disabled:f}=n.open;(!r.open||r.open.options!=o)&&(this.range=Gh(o.length,u,t.state.facet(he).maxRenderedOptions),this.showOptions(o,n.id)),this.updateSel(),f!=((e=r.open)===null||e===void 0?void 0:e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!f)}}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of e.split(" "))n&&this.dom.classList.add(n);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=Gh(e.options.length,e.selected,this.view.state.facet(he).maxRenderedOptions),this.showOptions(e.options,t.id)),this.updateSelectedOption(e.selected)){this.destroyInfo();let{completion:n}=e.options[e.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(u=>{u&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(u,n)}).catch(u=>je(this.view.state,u,"completion info")):this.addInfoPane(o,n)}}addInfoPane(t,e){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",t.nodeType!=null)n.appendChild(t),this.infoDestroy=null;else{let{dom:r,destroy:o}=t;n.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let e=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)n.nodeName!="LI"||!n.id?r--:r==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),e=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return e&&ND(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=t.getBoundingClientRect(),o=this.space;if(!o){let u=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:u.clientWidth,bottom:u.clientHeight}}return r.top>Math.min(o.bottom,e.bottom)-10||r.bottom<Math.max(o.top,e.top)+10?null:this.view.state.facet(he).positionInfo(this.view,e,r,n,o,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,e,n){const r=document.createElement("ul");r.id=e,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",u=>{u.target==r&&u.preventDefault()});let o=null;for(let u=n.from;u<n.to;u++){let{completion:f,match:h}=t[u],{section:m}=f;if(m){let v=typeof m=="string"?m:m.name;if(v!=o&&(u>n.from||n.from==0))if(o=v,typeof m!="string"&&m.header)r.appendChild(m.header(m));else{let S=r.appendChild(document.createElement("completion-section"));S.textContent=v}}const p=r.appendChild(document.createElement("li"));p.id=e+"-"+u,p.setAttribute("role","option");let y=this.optionClass(f);y&&(p.className=y);for(let v of this.optionContent){let S=v(f,this.view.state,this.view,h);S&&p.appendChild(S)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function BD(l,t){return e=>new RD(e,l,t)}function ND(l,t){let e=l.getBoundingClientRect(),n=t.getBoundingClientRect(),r=e.height/l.offsetHeight;n.top<e.top?l.scrollTop-=(e.top-n.top)/r:n.bottom>e.bottom&&(l.scrollTop+=(n.bottom-e.bottom)/r)}function $1(l){return(l.boost||0)*100+(l.apply?10:0)+(l.info?5:0)+(l.type?1:0)}function LD(l,t){let e=[],n=null,r=m=>{e.push(m);let{section:p}=m.completion;if(p){n||(n=[]);let y=typeof p=="string"?p:p.name;n.some(v=>v.name==y)||n.push(typeof p=="string"?{name:y}:p)}},o=t.facet(he);for(let m of l)if(m.hasResult()){let p=m.result.getMatch;if(m.result.filter===!1)for(let y of m.result.options)r(new J1(y,m.source,p?p(y):[],1e9-e.length));else{let y=t.sliceDoc(m.from,m.to),v,S=o.filterStrict?new DD(y):new kD(y);for(let w of m.result.options)if(v=S.match(w.label)){let M=w.displayLabel?p?p(w,v.matched):[]:v.matched;r(new J1(w,m.source,M,v.score+(w.boost||0)))}}}if(n){let m=Object.create(null),p=0,y=(v,S)=>{var w,M;return((w=v.rank)!==null&&w!==void 0?w:1e9)-((M=S.rank)!==null&&M!==void 0?M:1e9)||(v.name<S.name?-1:1)};for(let v of n.sort(y))p-=1e5,m[v.name]=p;for(let v of e){let{section:S}=v.completion;S&&(v.score+=m[typeof S=="string"?S:S.name])}}let u=[],f=null,h=o.compareCompletions;for(let m of e.sort((p,y)=>y.score-p.score||h(p.completion,y.completion))){let p=m.completion;!f||f.label!=p.label||f.detail!=p.detail||f.type!=null&&p.type!=null&&f.type!=p.type||f.apply!=p.apply||f.boost!=p.boost?u.push(m):$1(m.completion)>$1(f)&&(u[u.length-1]=m),f=m.completion}return u}class xs{constructor(t,e,n,r,o,u){this.options=t,this.attrs=e,this.tooltip=n,this.timestamp=r,this.selected=o,this.disabled=u}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new xs(this.options,tv(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,n,r,o,u){if(r&&!u&&t.some(m=>m.isPending))return r.setDisabled();let f=LD(t,e);if(!f.length)return r&&t.some(m=>m.isPending)?r.setDisabled():null;let h=e.facet(he).selectOnOpen?0:-1;if(r&&r.selected!=h&&r.selected!=-1){let m=r.options[r.selected].completion;for(let p=0;p<f.length;p++)if(f[p].completion==m){h=p;break}}return new xs(f,tv(n,h),{pos:t.reduce((m,p)=>p.hasResult()?Math.min(m,p.from):m,1e8),create:VD,above:o.aboveCursor},r?r.timestamp:Date.now(),h,!1)}map(t){return new xs(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new xs(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Uu{constructor(t,e,n){this.active=t,this.id=e,this.open=n}static start(){return new Uu(UD,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:e}=t,n=e.facet(he),o=(n.override||e.languageDataAt("autocomplete",Al(e)).map(TD)).map(h=>(this.active.find(p=>p.source==h)||new di(h,this.active.some(p=>p.state!=0)?1:0)).update(t,n));o.length==this.active.length&&o.every((h,m)=>h==this.active[m])&&(o=this.active);let u=this.open,f=t.effects.some(h=>h.is(pm));u&&t.docChanged&&(u=u.map(t.changes)),t.selection||o.some(h=>h.hasResult()&&t.changes.touchesRange(h.from,h.to))||!zD(o,this.active)||f?u=xs.build(o,e,this.id,u,n,f):u&&u.disabled&&!o.some(h=>h.isPending)&&(u=null),!u&&o.every(h=>!h.isPending)&&o.some(h=>h.hasResult())&&(o=o.map(h=>h.hasResult()?new di(h.source,0):h));for(let h of t.effects)h.is(VS)&&(u=u&&u.setSelected(h.value,this.id));return o==this.active&&u==this.open?this:new Uu(o,this.id,u)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?HD:_D}}function zD(l,t){if(l==t)return!0;for(let e=0,n=0;;){for(;e<l.length&&!l[e].hasResult();)e++;for(;n<t.length&&!t[n].hasResult();)n++;let r=e==l.length,o=n==t.length;if(r||o)return r==o;if(l[e++].result!=t[n++].result)return!1}}const HD={"aria-autocomplete":"list"},_D={};function tv(l,t){let e={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":l};return t>-1&&(e["aria-activedescendant"]=l+"-"+t),e}const UD=[];function qS(l,t){if(l.isUserEvent("input.complete")){let n=l.annotation(US);if(n&&t.activateOnCompletion(n))return 12}let e=l.isUserEvent("input.type");return e&&t.activateOnTyping?5:e?1:l.isUserEvent("delete.backward")?2:l.selection?8:l.docChanged?16:0}class di{constructor(t,e,n=!1){this.source=t,this.state=e,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(t,e){let n=qS(t,e),r=this;(n&8||n&16&&this.touches(t))&&(r=new di(r.source,0)),n&4&&r.state==0&&(r=new di(this.source,1)),r=r.updateFor(t,n);for(let o of t.effects)if(o.is(_u))r=new di(r.source,1,o.value);else if(o.is(fo))r=new di(r.source,0);else if(o.is(pm))for(let u of o.value)u.source==r.source&&(r=u);return r}updateFor(t,e){return this.map(t.changes)}map(t){return this}touches(t){return t.changes.touchesRange(Al(t.state))}}class Ts extends di{constructor(t,e,n,r,o,u){super(t,3,e),this.limit=n,this.result=r,this.from=o,this.to=u}hasResult(){return!0}updateFor(t,e){var n;if(!(e&3))return this.map(t.changes);let r=this.result;r.map&&!t.changes.empty&&(r=r.map(r,t.changes));let o=t.changes.mapPos(this.from),u=t.changes.mapPos(this.to,1),f=Al(t.state);if(f>u||!r||e&2&&(Al(t.startState)==this.from||f<this.limit))return new di(this.source,e&4?1:0);let h=t.changes.mapPos(this.limit);return qD(r.validFor,t.state,o,u)?new Ts(this.source,this.explicit,h,r,o,u):r.update&&(r=r.update(r,o,u,new HS(t.state,f,!1)))?new Ts(this.source,this.explicit,h,r,r.from,(n=r.to)!==null&&n!==void 0?n:Al(t.state)):new di(this.source,1,this.explicit)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new Ts(this.source,this.explicit,t.mapPos(this.limit),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new di(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}}function qD(l,t,e,n){if(!l)return!1;let r=t.sliceDoc(e,n);return typeof l=="function"?l(r,e,n,t):_S(l,!0).test(r)}const pm=pt.define({map(l,t){return l.map(e=>e.map(t))}}),VS=pt.define(),Ye=Se.define({create(){return Uu.start()},update(l,t){return l.update(t)},provide:l=>[im.from(l,t=>t.tooltip),I.contentAttributes.from(l,t=>t.attrs)]});function ym(l,t){const e=t.completion.apply||t.completion.label;let n=l.state.field(Ye).active.find(r=>r.source==t.source);return n instanceof Ts?(typeof e=="string"?l.dispatch(Object.assign(Object.assign({},CD(l.state,e,n.from,n.to)),{annotations:US.of(t.completion)})):e(l,t.completion,n.from,n.to),!0):!1}const VD=BD(Ye,ym);function lu(l,t="option"){return e=>{let n=e.state.field(Ye,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<e.state.facet(he).interactionDelay)return!1;let r=1,o;t=="page"&&(o=Ob(e,n.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:u}=n.open.options,f=n.open.selected>-1?n.open.selected+r*(l?1:-1):l?0:u-1;return f<0?f=t=="page"?0:u-1:f>=u&&(f=t=="page"?u-1:0),e.dispatch({effects:VS.of(f)}),!0}}const YD=l=>{let t=l.state.field(Ye,!1);return l.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<l.state.facet(he).interactionDelay?!1:ym(l,t.open.options[t.open.selected])},ev=l=>l.state.field(Ye,!1)?(l.dispatch({effects:_u.of(!0)}),!0):!1,jD=l=>{let t=l.state.field(Ye,!1);return!t||!t.active.some(e=>e.state!=0)?!1:(l.dispatch({effects:fo.of(null)}),!0)};class GD{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const XD=50,KD=1e3,QD=ne.fromClass(class{constructor(l){this.view=l,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of l.state.field(Ye).active)t.isPending&&this.startQuery(t)}update(l){let t=l.state.field(Ye),e=l.state.facet(he);if(!l.selectionSet&&!l.docChanged&&l.startState.field(Ye)==t)return;let n=l.transactions.some(o=>{let u=qS(o,e);return u&8||(o.selection||o.docChanged)&&!(u&3)});for(let o=0;o<this.running.length;o++){let u=this.running[o];if(n||u.context.abortOnDocChange&&l.docChanged||u.updates.length+l.transactions.length>XD&&Date.now()-u.time>KD){for(let f of u.context.abortListeners)try{f()}catch(h){je(this.view.state,h)}u.context.abortListeners=null,this.running.splice(o--,1)}else u.updates.push(...l.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),l.transactions.some(o=>o.effects.some(u=>u.is(_u)))&&(this.pendingStart=!0);let r=this.pendingStart?50:e.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(o=>o.isPending&&!this.running.some(u=>u.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of l.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:l}=this.view,t=l.field(Ye);for(let e of t.active)e.isPending&&!this.running.some(n=>n.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(he).updateSyncTime))}startQuery(l){let{state:t}=this.view,e=Al(t),n=new HS(t,e,l.explicit,this.view),r=new GD(l,n);this.running.push(r),Promise.resolve(l.source(n)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:fo.of(null)}),je(this.view.state,o)})}scheduleAccept(){this.running.every(l=>l.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(he).updateSyncTime))}accept(){var l;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],e=this.view.state.facet(he),n=this.view.state.field(Ye);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(o.done===void 0)continue;if(this.running.splice(r--,1),o.done){let f=Al(o.updates.length?o.updates[0].startState:this.view.state),h=Math.min(f,o.done.from+(o.active.explicit?0:1)),m=new Ts(o.active.source,o.active.explicit,h,o.done,o.done.from,(l=o.done.to)!==null&&l!==void 0?l:f);for(let p of o.updates)m=m.update(p,e);if(m.hasResult()){t.push(m);continue}}let u=n.active.find(f=>f.source==o.active.source);if(u&&u.isPending)if(o.done==null){let f=new di(o.active.source,0);for(let h of o.updates)f=f.update(h,e);f.isPending||t.push(f)}else this.startQuery(u)}(t.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:pm.of(t)})}},{eventHandlers:{blur(l){let t=this.view.state.field(Ye,!1);if(t&&t.tooltip&&this.view.state.facet(he).closeOnBlur){let e=t.open&&Ob(this.view,t.open.tooltip);(!e||!e.dom.contains(l.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:fo.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:_u.of(!1)}),20),this.composing=0}}}),ZD=typeof navigator=="object"&&/Win/.test(navigator.platform),WD=Ol.highest(I.domEventHandlers({keydown(l,t){let e=t.state.field(Ye,!1);if(!e||!e.open||e.open.disabled||e.open.selected<0||l.key.length>1||l.ctrlKey&&!(ZD&&l.altKey)||l.metaKey)return!1;let n=e.open.options[e.open.selected],r=e.active.find(u=>u.source==n.source),o=n.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(l.key)>-1&&ym(t,n),!1}})),PD=I.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),ho={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},xl=pt.define({map(l,t){let e=t.mapPos(l,-1,Re.TrackAfter);return e??void 0}}),vm=new class extends Ml{};vm.startSide=1;vm.endSide=-1;const YS=Se.define({create(){return Dt.empty},update(l,t){if(l=l.map(t.changes),t.selection){let e=t.state.doc.lineAt(t.selection.main.head);l=l.update({filter:n=>n>=e.from&&n<=e.to})}for(let e of t.effects)e.is(xl)&&(l=l.update({add:[vm.range(e.value,e.value+1)]}));return l}});function JD(){return[ID,YS]}const Xh="()[]{}<>";function jS(l){for(let t=0;t<Xh.length;t+=2)if(Xh.charCodeAt(t)==l)return Xh.charAt(t+1);return Vd(l<128?l:l+1)}function GS(l,t){return l.languageDataAt("closeBrackets",t)[0]||ho}const FD=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),ID=I.inputHandler.of((l,t,e,n)=>{if((FD?l.composing:l.compositionStarted)||l.state.readOnly)return!1;let r=l.state.selection.main;if(n.length>2||n.length==2&&Hi(qe(n,0))==1||t!=r.from||e!=r.to)return!1;let o=eO(l.state,n);return o?(l.dispatch(o),!0):!1}),$D=({state:l,dispatch:t})=>{if(l.readOnly)return!1;let n=GS(l,l.selection.main.head).brackets||ho.brackets,r=null,o=l.changeByRange(u=>{if(u.empty){let f=iO(l.doc,u.head);for(let h of n)if(h==f&&Fu(l.doc,u.head)==jS(qe(h,0)))return{changes:{from:u.head-h.length,to:u.head+h.length},range:V.cursor(u.head-h.length)}}return{range:r=u}});return r||t(l.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},tO=[{key:"Backspace",run:$D}];function eO(l,t){let e=GS(l,l.selection.main.head),n=e.brackets||ho.brackets;for(let r of n){let o=jS(qe(r,0));if(t==r)return o==r?sO(l,r,n.indexOf(r+r+r)>-1,e):nO(l,r,o,e.before||ho.before);if(t==o&&XS(l,l.selection.main.from))return lO(l,r,o)}return null}function XS(l,t){let e=!1;return l.field(YS).between(0,l.doc.length,n=>{n==t&&(e=!0)}),e}function Fu(l,t){let e=l.sliceString(t,t+2);return e.slice(0,Hi(qe(e,0)))}function iO(l,t){let e=l.sliceString(t-2,t);return Hi(qe(e,0))==e.length?e:e.slice(1)}function nO(l,t,e,n){let r=null,o=l.changeByRange(u=>{if(!u.empty)return{changes:[{insert:t,from:u.from},{insert:e,from:u.to}],effects:xl.of(u.to+t.length),range:V.range(u.anchor+t.length,u.head+t.length)};let f=Fu(l.doc,u.head);return!f||/\s/.test(f)||n.indexOf(f)>-1?{changes:{insert:t+e,from:u.head},effects:xl.of(u.head+t.length),range:V.cursor(u.head+t.length)}:{range:r=u}});return r?null:l.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function lO(l,t,e){let n=null,r=l.changeByRange(o=>o.empty&&Fu(l.doc,o.head)==e?{changes:{from:o.head,to:o.head+e.length,insert:e},range:V.cursor(o.head+e.length)}:n={range:o});return n?null:l.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function sO(l,t,e,n){let r=n.stringPrefixes||ho.stringPrefixes,o=null,u=l.changeByRange(f=>{if(!f.empty)return{changes:[{insert:t,from:f.from},{insert:t,from:f.to}],effects:xl.of(f.to+t.length),range:V.range(f.anchor+t.length,f.head+t.length)};let h=f.head,m=Fu(l.doc,h),p;if(m==t){if(iv(l,h))return{changes:{insert:t+t,from:h},effects:xl.of(h+t.length),range:V.cursor(h+t.length)};if(XS(l,h)){let v=e&&l.sliceDoc(h,h+t.length*3)==t+t+t?t+t+t:t;return{changes:{from:h,to:h+v.length,insert:v},range:V.cursor(h+v.length)}}}else{if(e&&l.sliceDoc(h-2*t.length,h)==t+t&&(p=nv(l,h-2*t.length,r))>-1&&iv(l,p))return{changes:{insert:t+t+t+t,from:h},effects:xl.of(h+t.length),range:V.cursor(h+t.length)};if(l.charCategorizer(h)(m)!=Zt.Word&&nv(l,h,r)>-1&&!rO(l,h,t,r))return{changes:{insert:t+t,from:h},effects:xl.of(h+t.length),range:V.cursor(h+t.length)}}return{range:o=f}});return o?null:l.update(u,{scrollIntoView:!0,userEvent:"input.type"})}function iv(l,t){let e=De(l).resolveInner(t+1);return e.parent&&e.from==t}function rO(l,t,e,n){let r=De(l).resolveInner(t,-1),o=n.reduce((u,f)=>Math.max(u,f.length),0);for(let u=0;u<5;u++){let f=l.sliceDoc(r.from,Math.min(r.to,r.from+e.length+o)),h=f.indexOf(e);if(!h||h>-1&&n.indexOf(f.slice(0,h))>-1){let p=r.firstChild;for(;p&&p.from==r.from&&p.to-p.from>e.length+h;){if(l.sliceDoc(p.to-e.length,p.to)==e)return!1;p=p.firstChild}return!0}let m=r.to==t&&r.parent;if(!m)break;r=m}return!1}function nv(l,t,e){let n=l.charCategorizer(t);if(n(l.sliceDoc(t-1,t))!=Zt.Word)return t;for(let r of e){let o=t-r.length;if(l.sliceDoc(o,t)==r&&n(l.sliceDoc(o-1,o))!=Zt.Word)return o}return-1}function oO(l={}){return[WD,Ye,he.of(l),QD,aO,PD]}const KS=[{key:"Ctrl-Space",run:ev},{mac:"Alt-`",run:ev},{key:"Escape",run:jD},{key:"ArrowDown",run:lu(!0)},{key:"ArrowUp",run:lu(!1)},{key:"PageDown",run:lu(!0,"page")},{key:"PageUp",run:lu(!1,"page")},{key:"Enter",run:YD}],aO=Ol.highest(tm.computeN([he],l=>l.facet(he).defaultKeymap?[KS]:[]));class lv{constructor(t,e,n){this.from=t,this.to=e,this.diagnostic=n}}class bl{constructor(t,e,n){this.diagnostics=t,this.panel=e,this.selected=n}static init(t,e,n){let r=n.facet(mo).markerFilter;r&&(t=r(t,n));let o=t.slice().sort((p,y)=>p.from-y.from||p.to-y.to),u=new un,f=[],h=0;for(let p=0;;){let y=p==o.length?null:o[p];if(!y&&!f.length)break;let v,S;for(f.length?(v=h,S=f.reduce((M,k)=>Math.min(M,k.to),y&&y.from>v?y.from:1e8)):(v=y.from,S=y.to,f.push(y),p++);p<o.length;){let M=o[p];if(M.from==v&&(M.to>M.from||M.to==v))f.push(M),p++,S=Math.min(M.to,S);else{S=Math.min(M.from,S);break}}let w=xO(f);if(f.some(M=>M.from==M.to||M.from==M.to-1&&n.doc.lineAt(M.from).to==M.from))u.add(v,v,ut.widget({widget:new yO(w),diagnostics:f.slice()}));else{let M=f.reduce((k,R)=>R.markClass?k+" "+R.markClass:k,"");u.add(v,S,ut.mark({class:"cm-lintRange cm-lintRange-"+w+M,diagnostics:f.slice(),inclusiveEnd:f.some(k=>k.to>S)}))}h=S;for(let M=0;M<f.length;M++)f[M].to<=h&&f.splice(M--,1)}let m=u.finish();return new bl(m,e,Ns(m))}}function Ns(l,t=null,e=0){let n=null;return l.between(e,1e9,(r,o,{spec:u})=>{if(!(t&&u.diagnostics.indexOf(t)<0))if(!n)n=new lv(r,o,t||u.diagnostics[0]);else{if(u.diagnostics.indexOf(n.diagnostic)<0)return!1;n=new lv(n.from,o,n.diagnostic)}}),n}function uO(l,t){let e=t.pos,n=t.end||e,r=l.state.facet(mo).hideOn(l,e,n);if(r!=null)return r;let o=l.startState.doc.lineAt(t.pos);return!!(l.effects.some(u=>u.is(QS))||l.changes.touchesRange(o.from,Math.max(o.to,n)))}function cO(l,t){return l.field(ei,!1)?t:t.concat(pt.appendConfig.of(wO))}const QS=pt.define(),bm=pt.define(),ZS=pt.define(),ei=Se.define({create(){return new bl(ut.none,null,null)},update(l,t){if(t.docChanged&&l.diagnostics.size){let e=l.diagnostics.map(t.changes),n=null,r=l.panel;if(l.selected){let o=t.changes.mapPos(l.selected.from,1);n=Ns(e,l.selected.diagnostic,o)||Ns(e,null,o)}!e.size&&r&&t.state.facet(mo).autoPanel&&(r=null),l=new bl(e,r,n)}for(let e of t.effects)if(e.is(QS)){let n=t.state.facet(mo).autoPanel?e.value.length?go.open:null:l.panel;l=bl.init(e.value,n,t.state)}else e.is(bm)?l=new bl(l.diagnostics,e.value?go.open:null,l.selected):e.is(ZS)&&(l=new bl(l.diagnostics,l.panel,e.value));return l},provide:l=>[oo.from(l,t=>t.panel),I.decorations.from(l,t=>t.diagnostics)]}),fO=ut.mark({class:"cm-lintRange cm-lintRange-active"});function hO(l,t,e){let{diagnostics:n}=l.state.field(ei),r,o=-1,u=-1;n.between(t-(e<0?1:0),t+(e>0?1:0),(h,m,{spec:p})=>{if(t>=h&&t<=m&&(h==m||(t>h||e>0)&&(t<m||e<0)))return r=p.diagnostics,o=h,u=m,!1});let f=l.state.facet(mo).tooltipFilter;return r&&f&&(r=f(r,l.state)),r?{pos:o,end:u,above:l.state.doc.lineAt(o).to<u,create(){return{dom:dO(l,r)}}}:null}function dO(l,t){return Ut("ul",{class:"cm-tooltip-lint"},t.map(e=>PS(l,e,!1)))}const mO=l=>{let t=l.state.field(ei,!1);(!t||!t.panel)&&l.dispatch({effects:cO(l.state,[bm.of(!0)])});let e=ro(l,go.open);return e&&e.dom.querySelector(".cm-panel-lint ul").focus(),!0},sv=l=>{let t=l.state.field(ei,!1);return!t||!t.panel?!1:(l.dispatch({effects:bm.of(!1)}),!0)},gO=l=>{let t=l.state.field(ei,!1);if(!t)return!1;let e=l.state.selection.main,n=t.diagnostics.iter(e.to+1);return!n.value&&(n=t.diagnostics.iter(0),!n.value||n.from==e.from&&n.to==e.to)?!1:(l.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},pO=[{key:"Mod-Shift-m",run:mO,preventDefault:!0},{key:"F8",run:gO}],mo=$.define({combine(l){return Object.assign({sources:l.map(t=>t.source).filter(t=>t!=null)},Gi(l.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(t,e)=>t?e?n=>t(n)||e(n):t:e}))}});function WS(l){let t=[];if(l)t:for(let{name:e}of l){for(let n=0;n<e.length;n++){let r=e[n];if(/[a-zA-Z]/.test(r)&&!t.some(o=>o.toLowerCase()==r.toLowerCase())){t.push(r);continue t}}t.push("")}return t}function PS(l,t,e){var n;let r=e?WS(t.actions):[];return Ut("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Ut("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(l):t.message),(n=t.actions)===null||n===void 0?void 0:n.map((o,u)=>{let f=!1,h=v=>{if(v.preventDefault(),f)return;f=!0;let S=Ns(l.state.field(ei).diagnostics,t);S&&o.apply(l,S.from,S.to)},{name:m}=o,p=r[u]?m.indexOf(r[u]):-1,y=p<0?m:[m.slice(0,p),Ut("u",m.slice(p,p+1)),m.slice(p+1)];return Ut("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${m}${p<0?"":` (access key "${r[u]})"`}.`},y)}),t.source&&Ut("div",{class:"cm-diagnosticSource"},t.source))}class yO extends Fn{constructor(t){super(),this.sev=t}eq(t){return t.sev==this.sev}toDOM(){return Ut("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class rv{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=PS(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class go{constructor(t){this.view=t,this.items=[];let e=r=>{if(r.keyCode==27)sv(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],u=WS(o.actions);for(let f=0;f<u.length;f++)if(u[f].toUpperCase().charCodeAt(0)==r.keyCode){let h=Ns(this.view.state.field(ei).diagnostics,o);h&&o.actions[f].apply(t,h.from,h.to)}}else return;r.preventDefault()},n=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=Ut("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e,onclick:n}),this.dom=Ut("div",{class:"cm-panel-lint"},this.list,Ut("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>sv(this.view)},"")),this.update()}get selectedIndex(){let t=this.view.state.field(ei).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(ei),n=0,r=!1,o=null,u=new Set;for(t.between(0,this.view.state.doc.length,(f,h,{spec:m})=>{for(let p of m.diagnostics){if(u.has(p))continue;u.add(p);let y=-1,v;for(let S=n;S<this.items.length;S++)if(this.items[S].diagnostic==p){y=S;break}y<0?(v=new rv(this.view,p),this.items.splice(n,0,v),r=!0):(v=this.items[y],y>n&&(this.items.splice(n,y-n),r=!0)),e&&v.diagnostic==e.diagnostic?v.dom.hasAttribute("aria-selected")||(v.dom.setAttribute("aria-selected","true"),o=v):v.dom.hasAttribute("aria-selected")&&v.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new rv(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:f,panel:h})=>{let m=h.height/this.list.offsetHeight;f.top<h.top?this.list.scrollTop-=(h.top-f.top)/m:f.bottom>h.bottom&&(this.list.scrollTop+=(f.bottom-h.bottom)/m)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let t=this.list.firstChild;function e(){let n=t;t=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)e();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=this.view.state.field(ei),n=Ns(e.diagnostics,this.items[t].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:ZS.of(n)})}static open(t){return new go(t)}}function vO(l,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(l)}</svg>')`}function su(l){return vO(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${l}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const bO=I.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:su("#d11")},".cm-lintRange-warning":{backgroundImage:su("orange")},".cm-lintRange-info":{backgroundImage:su("#999")},".cm-lintRange-hint":{backgroundImage:su("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function SO(l){return l=="error"?4:l=="warning"?3:l=="info"?2:1}function xO(l){let t="hint",e=1;for(let n of l){let r=SO(n.severity);r>e&&(e=r,t=n.severity)}return t}const wO=[ei,I.decorations.compute([ei],l=>{let{selected:t,panel:e}=l.field(ei);return!t||!e||t.from==t.to?ut.none:ut.set([fO.range(t.from,t.to)])}),hC(hO,{hideOn:uO}),bO],AO=[AC(),TC(),GM(),QT(),vT(),BM(),_M(),kt.allowMultipleSelections.of(!0),lT(),ST(AT,{fallback:!0}),ET(),JD(),oO(),eC(),lC(),PM(),tD(),tm.of([...tO,...Wk,...bD,...ek,...mT,...KS,...pO])],MO=({chord:l,lyric:t})=>Gt.jsxs("div",{style:{display:"inline-block"},children:[Gt.jsxs("div",{style:{fontSize:"var(--chord-font-size)",position:"relative"},children:[l&&Gt.jsx("span",{style:{position:"absolute",top:"0",color:"var(--chord-color)",fontWeight:"bold",fontFamily:"monospace"},children:l}),Gt.jsx("div",{style:{height:"1em"}})]}),Gt.jsx("span",{style:{height:"1em"},children:t.replace(/ /g,"")})]});function CO(l){const t=l.split(/\r?\n/),e=[];for(const n of t){const r=n.trim();if(r.length===0){e.push({type:"br"});continue}const o=r.match(/^\{(\w+):\s*(.+?)\s*\}$/);if(o){e.push({type:"directive",key:o[1].toLowerCase(),value:o[2]});continue}const u=[],f=/\[([^\]]+)\]/g;let h=0,m;for(;(m=f.exec(r))!==null;)m.index>h&&u.push({lyric:r.substring(h,m.index)}),u.push({chord:m[1],lyric:""}),h=f.lastIndex;h<r.length&&u.push({lyric:r.substring(h)}),u.length>0&&e.push({type:"lyrics",segments:u})}return e}const TO=({text:l})=>{const t=CO(l);return Gt.jsx("div",{children:t.map((e,n)=>{if(e.type==="br")return Gt.jsx("br",{},n);if(e.type==="directive")switch(e.key){case"title":return Gt.jsx("h2",{children:e.value},n);case"artist":return Gt.jsx("h4",{children:e.value},n);case"comment":return Gt.jsx("i",{children:e.value},n);default:return Gt.jsx("div",{children:e.value},n)}return e.type==="lyrics"&&e.segments?Gt.jsx("div",{style:{display:"flex",flexWrap:"nowrap",lineHeight:1.2,whiteSpace:"pre"},children:e.segments.map((r,o)=>Gt.jsx(MO,{chord:r.chord,lyric:r.lyric},o))},n):null})})},kO=()=>{const[l,t]=ps.useState(`{title: Fly High}
{artist: Example Band}
{comment: Verse 1}
[C]I hear the [G]sound of the wind
[Am]Whispering [F]stories again

[C]Walking this [G]old dusty road
[Am]Wondering [F]where I should go

{comment: Chorus}
[C]And Ill [G]fly, high above the [Am]sky
Leaving all my [F]fears behind`),e=ps.useRef(null),n=ps.useRef(null);return ps.useEffect(()=>{if(!e.current)return;const r=I.updateListener.of(u=>{if(u.docChanged){const f=u.state.doc.toString();t(f)}}),o=kt.create({doc:l,extensions:[AO,r]});return n.current=new I({state:o,parent:e.current}),()=>{n.current&&(n.current.destroy(),n.current=null)}},[]),ps.useEffect(()=>{if(n.current){const r=n.current.state.doc.toString();r!==l&&n.current.dispatch({changes:{from:0,to:r.length,insert:l}})}},[l]),Gt.jsx("div",{style:{display:"flex",flexDirection:"column",height:"100vh",width:"100vw"},children:Gt.jsxs("div",{style:{display:"flex",flex:"1 1 0",padding:"10px",boxSizing:"border-box"},children:[Gt.jsxs("div",{style:{display:"flex",flex:"1",flexDirection:"column",marginRight:"10px"},children:[Gt.jsx("h3",{children:"Editor"}),Gt.jsx("div",{style:{flex:1,marginRight:"10px"},children:Gt.jsx("div",{ref:e,style:{border:"1px solid #ccc",height:"100%",overflow:"auto"}})})]}),Gt.jsxs("div",{style:{display:"flex",flex:"1",flexDirection:"column",marginRight:"10px"},children:[Gt.jsx("h3",{children:"Preview"}),Gt.jsx("div",{style:{flex:1,border:"1px solid #ccc",padding:"10px",overflowY:"auto",fontFamily:"sans-serif"},children:Gt.jsx(TO,{text:l})})]})]})})};kw.createRoot(document.getElementById("root")).render(Gt.jsx(ps.StrictMode,{children:Gt.jsx(kO,{})}));
